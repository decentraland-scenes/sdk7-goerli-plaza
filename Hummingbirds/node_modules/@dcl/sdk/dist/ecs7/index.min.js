(function(exports){"use strict";var commonjsGlobal="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},dist$1={},Quaternion={},Vector3$1={},types$1={},hasRequiredTypes$1;function requireTypes$1(){return hasRequiredTypes$1||(hasRequiredTypes$1=1,function(e){var t,n;Object.defineProperty(e,"__esModule",{value:!0}),e.RAD2DEG=e.DEG2RAD=e.Epsilon=e.ToLinearSpace=e.ToGammaSpace=e.Space=e.Orientation=void 0,(t=e.Orientation||(e.Orientation={}))[t.CW=0]="CW",t[t.CCW=1]="CCW",(n=e.Space||(e.Space={}))[n.LOCAL=0]="LOCAL",n[n.WORLD=1]="WORLD",n[n.BONE=2]="BONE",e.ToGammaSpace=1/2.2,e.ToLinearSpace=2.2,e.Epsilon=1e-6,e.DEG2RAD=Math.PI/180,e.RAD2DEG=360/(2*Math.PI)}(types$1)),types$1}var Scalar={},hasRequiredScalar,hasRequiredVector3;function requireScalar(){if(hasRequiredScalar)return Scalar;hasRequiredScalar=1,Object.defineProperty(Scalar,"__esModule",{value:!0}),Scalar.Scalar=void 0;const e=2*Math.PI;function t(e){const t=+e;return 0===t||isNaN(t)?t:t>0?1:-1}function n(e,t=0,n=1){return Math.min(n,Math.max(t,e))}function i(e,t){return e-Math.floor(e/t)*t}function r(e,t){let n=i(t-e,360);return n>180&&(n-=360),n}function o(e,n,i){let r=0;return r=Math.abs(n-e)<=i?n:e+t(n-e)*i,r}return Scalar.Scalar={withinEpsilon:function(e,t,n=1401298e-51){const i=e-t;return-n<=i&&i<=n},toHex:function(e){const t=e.toString(16);return e<=15?("0"+t).toUpperCase():t.toUpperCase()},sign:t,clamp:n,log2:function(e){return Math.log(e)*Math.LOG2E},repeat:i,normalize:function(e,t,n){return(e-t)/(n-t)},denormalize:function(e,t,n){return e*(n-t)+t},deltaAngle:r,pingPong:function(e,t){const n=i(e,2*t);return t-Math.abs(n-t)},smoothStep:function(e,t,i){let r=n(i);return r=-2*r*r*r+3*r*r,t*r+e*(1-r)},moveTowards:o,moveTowardsAngle:function(e,t,n){const i=r(e,t);let a=0;return a=-n<i&&i<n?t:o(e,e+i,n),a},lerp:function(e,t,n){return e+(t-e)*n},lerpAngle:function(e,t,r){let o=i(t-e,360);return o>180&&(o-=360),e+o*n(r)},inverseLerp:function(e,t,i){let r=0;return r=e!==t?n((i-e)/(t-e)):0,r},hermite:function(e,t,n,i,r){const o=r*r,a=r*o;return e*(2*a-3*o+1)+n*(-2*a+3*o)+t*(a-2*o+r)+i*(a-o)},randomRange:function(e,t){return e===t?e:Math.random()*(t-e)+e},rangeToPercent:function(e,t,n){return(e-t)/(n-t)},percentToRange:function(e,t,n){return(n-t)*e+t},normalizeRadians:function(t){return t-e*Math.floor((t+Math.PI)/e)},TwoPi:e},Scalar}function requireVector3(){return hasRequiredVector3||(hasRequiredVector3=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.Vector3=void 0;const t=requireTypes$1(),n=requireQuaternion(),i=requireScalar();!function(e){function r(e=0,t=0,n=0){return{x:e,y:t,z:n}}function o(e,t){return{x:e.x+t.x,y:e.y+t.y,z:e.z+t.z}}function a(e,t){t.x=e.x,t.y=e.y,t.z=e.z}function s(e,t,n,i){i.x=e,i.y=t,i.z=n}function c(e){return Object.assign({},e)}function l(e,t=0){return r(e[t],e[t+1],e[t+2])}function u(e,t,n){n.x=e[t],n.y=e[t+1],n.z=e[t+2]}function d(e){return Math.sqrt(e.x*e.x+e.y*e.y+e.z*e.z)}function f(e,t,n){n.x=e.x*t,n.y=e.y*t,n.z=e.z*t}function h(e,t){const n=r(0,0,0);return p(e,t,n),n}function p(e,t,n){0!==t&&1!==t?f(e,1/t,n):a(e,n)}function m(e){return h(e,d(e))}function y(e,t){return e.x*t.x+e.y*t.y+e.z*t.z}function g(e,t,n){const{x:i,y:r,z:o}=e,a=t._m,s=1/(a[3]*i+a[7]*r+a[11]*o+a[15]);n.x=(a[0]*i+a[4]*r+a[8]*o+a[12])*s,n.y=(a[1]*i+a[5]*r+a[9]*o+a[13])*s,n.z=(a[2]*i+a[6]*r+a[10]*o+a[14])*s}function b(e,t,n){const{x:i,y:r,z:o}=e,{x:a,y:s,z:c,w:l}=t,u=l*i+s*o-c*r,d=l*r+c*i-a*o,f=l*o+a*r-s*i,h=-a*i-s*r-c*o;n.x=u*l+h*-a+d*-c-f*-s,n.y=d*l+h*-s+f*-a-u*-c,n.z=f*l+h*-c+u*-s-d*-a}function v(e,t,n,i){i.x=e.x+(t.x-e.x)*n,i.y=e.y+(t.y-e.y)*n,i.z=e.z+(t.z-e.z)*n}function E(e,t,n){n.x=e.y*t.z-e.z*t.y,n.y=e.z*t.x-e.x*t.z,n.z=e.x*t.y-e.y*t.x}function x(e,t,n){return R(e.x,e.y,e.z,t,n)}function R(e,t,n,i,r){const o=i._m,a=e*o[0]+t*o[4]+n*o[8]+o[12],s=e*o[1]+t*o[5]+n*o[9]+o[13],c=e*o[2]+t*o[6]+n*o[10]+o[14],l=1/(e*o[3]+t*o[7]+n*o[11]+o[15]);r.x=a*l,r.y=s*l,r.z=c*l}function B(e,t,n){P(e.x,e.y,e.z,t,n)}function P(e,t,n,i,r){const o=i._m;r.x=e*o[0]+t*o[4]+n*o[8],r.y=e*o[1]+t*o[5]+n*o[9],r.z=e*o[2]+t*o[6]+n*o[10]}function w(e,t,n,i){let r=e.x;r=r>n.x?n.x:r,r=r<t.x?t.x:r;let o=e.y;o=o>n.y?n.y:o,o=o<t.y?t.y:o;let a=e.z;a=a>n.z?n.z:a,a=a<t.z?t.z:a,s(r,o,a,i)}function C(e,t){const n=e.x-t.x,i=e.y-t.y,r=e.z-t.z;return n*n+i*i+r*r}function T(e,t,i,r){const o=n.Quaternion.create();n.Quaternion.rotationQuaternionFromAxisToRef(e,t,i,o),a(n.Quaternion.eulerAngles(o),r)}function S(e,t,n){n.x=e.x*t.x,n.y=e.y*t.y,n.z=e.z*t.z}function M(e,t,n,i,r){r.x=e.x*t,r.y=e.y*n,r.z=e.z*i}function _(e,t,n,i,r){t>e.x?r.x=t:r.x=e.x,n>e.y?r.y=n:r.y=e.y,i>e.z?r.z=i:r.z=e.z}function O(e,t,n,i,r){t<e.x?r.x=t:r.x=e.x,n<e.y?r.y=n:r.y=e.y,i<e.z?r.z=i:r.z=e.z}e.isNonUniform=function(e){const t=Math.abs(e.x);return t!==Math.abs(e.y)||t!==Math.abs(e.z)},e.create=r,e.add=o,e.addToRef=function(e,t,n){n.x=e.x+t.x,n.y=e.y+t.y,n.z=e.z+t.z},e.subtract=function(e,t){return{x:e.x-t.x,y:e.y-t.y,z:e.z-t.z}},e.subtractToRef=function(e,t,n){n.x=e.x-t.x,n.y=e.y-t.y,n.z=e.z-t.z},e.subtractFromFloatsToRef=function(e,t,n,i,r){r.x=e.x-t,r.y=e.y-n,r.z=e.z-i},e.negate=function(e){return{x:-e.x,y:-e.y,z:-e.z}},e.copy=a,e.copyFromFloats=s,e.clone=c,e.getClipFactor=function(e,t,n,i){const r=y(e,n)-i;return r/(r-(y(t,n)-i))},e.getAngleBetweenVectors=function(e,t,n){const i=m(e),o=m(t),a=y(i,o),s=r();return E(i,o,s),y(s,n)>0?Math.acos(a):-Math.acos(a)},e.fromArray=l,e.fromFloatArray=function(e,t){return l(e,t)},e.fromArrayToRef=u,e.fromFloatArrayToRef=function(e,t,n){return u(e,t,n)},e.length=d,e.lengthSquared=function(e){return e.x*e.x+e.y*e.y+e.z*e.z},e.scaleToRef=f,e.scale=function(e,t){return r(e.x*t,e.y*t,e.z*t)},e.normalizeFromLength=h,e.normalizeFromLengthToRef=p,e.normalize=m,e.normalizeToRef=function(e,t){p(e,d(e),t)},e.dot=y,e.applyMatrix4=function(e,t){const n=c(e);return g(e,t,n),n},e.applyMatrix4ToRef=g,e.rotate=function(e,t){const n=r();return b(e,t,n),n},e.rotateToRef=b,e.lerp=function(e,t,n){const i=r(0,0,0);return v(e,t,n,i),i},e.lerpToRef=v,e.cross=function(t,n){const i=e.Zero();return e.crossToRef(t,n,i),i},e.crossToRef=E,e.transformCoordinates=function(t,n){const i=e.Zero();return x(t,n,i),i},e.transformCoordinatesToRef=x,e.transformCoordinatesFromFloatsToRef=R,e.transformNormal=function(t,n){const i=e.Zero();return B(t,n,i),i},e.transformNormalToRef=B,e.transformNormalFromFloatsToRef=P,e.catmullRom=function(e,t,n,i,o){const a=o*o,s=o*a;return r(.5*(2*t.x+(-e.x+n.x)*o+(2*e.x-5*t.x+4*n.x-i.x)*a+(-e.x+3*t.x-3*n.x+i.x)*s),.5*(2*t.y+(-e.y+n.y)*o+(2*e.y-5*t.y+4*n.y-i.y)*a+(-e.y+3*t.y-3*n.y+i.y)*s),.5*(2*t.z+(-e.z+n.z)*o+(2*e.z-5*t.z+4*n.z-i.z)*a+(-e.z+3*t.z-3*n.z+i.z)*s))},e.clamp=function(e,t,n){const i=r();return w(e,t,n,i),i},e.clampToRef=w,e.hermite=function(e,t,n,i,o){const a=o*o,s=o*a,c=2*s-3*a+1,l=-2*s+3*a,u=s-2*a+o,d=s-a;return r(e.x*c+n.x*l+t.x*u+i.x*d,e.y*c+n.y*l+t.y*u+i.y*d,e.z*c+n.z*l+t.z*u+i.z*d)},e.minimize=function(e,t){const n=r();return O(t,e.x,e.y,e.z,n),n},e.maximize=function(e,t){const n=r();return _(e,t.x,t.y,t.z,n),n},e.distance=function(e,t){return Math.sqrt(C(e,t))},e.distanceSquared=C,e.center=function(e,t){const n=o(e,t);return f(n,.5,n),n},e.rotationFromAxis=function(t,n,i){const r=e.Zero();return T(t,n,i,r),r},e.rotationFromAxisToRef=T,e.toString=function(e){return`(${e.x}, ${e.y}, ${e.z})`},e.getHashCode=function(e){let t=e.x||0;return t=397*t^(e.y||0),t=397*t^(e.z||0),t},e.equals=function(e,t){return e.x===t.x&&e.y===t.y&&e.z===t.z},e.equalsWithEpsilon=function(e,n,r=t.Epsilon){return i.Scalar.withinEpsilon(e.x,n.x,r)&&i.Scalar.withinEpsilon(e.y,n.y,r)&&i.Scalar.withinEpsilon(e.z,n.z,r)},e.equalsToFloats=function(e,t,n,i){return e.x===t&&e.y===n&&e.z===i},e.multiply=function(e,t){const n=r();return S(e,t,n),n},e.multiplyToRef=S,e.multiplyByFloatsToRef=M,e.multiplyByFloats=function(e,t,n,i){const o=r();return M(e,t,n,i,o),o},e.divide=function(e,t){return{x:e.x/t.x,y:e.y/t.y,z:e.z/t.z}},e.divideToRef=function(e,t,n){n.x=e.x/t.x,n.y=e.y/t.y,n.z=e.z/t.z},e.maximizeInPlaceFromFloatsToRef=_,e.minimizeInPlaceFromFloatsToRef=O,e.floor=function(e){return r(Math.floor(e.x),Math.floor(e.y),Math.floor(e.z))},e.fract=function(e){return r(e.x-Math.floor(e.x),e.y-Math.floor(e.y),e.z-Math.floor(e.z))},e.Zero=function(){return r(0,0,0)},e.One=function(){return r(1,1,1)},e.Up=function(){return r(0,1,0)},e.Down=function(){return r(0,-1,0)},e.Forward=function(){return r(0,0,1)},e.Backward=function(){return r(0,0,-1)},e.Right=function(){return r(1,0,0)},e.Left=function(){return r(-1,0,0)},e.Random=function(){return r(Math.random(),Math.random(),Math.random())}}(e.Vector3||(e.Vector3={}))}(Vector3$1)),Vector3$1}var Matrix={},Plane={},hasRequiredPlane,hasRequiredMatrix,hasRequiredQuaternion,hasRequiredDist$1;function requirePlane(){return hasRequiredPlane||(hasRequiredPlane=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.Plane=void 0;const t=requireVector3(),n=requireMatrix();!function(e){function i(e,n,i,r){return{normal:t.Vector3.create(e,n,i),d:r}}e.create=i,e.fromArray=function(e){return i(e[0],e[1],e[2],e[3])},e.fromPoints=function(e,t,n){return i(0,0,0,0)},e.romPositionAndNormal=function(e,n){const r=i(0,0,0,0);return r.normal=t.Vector3.normalize(n),r.d=-(n.x*e.x+n.y*e.y+n.z*e.z),r},e.signedDistanceToPlaneFromPositionAndNormal=function(e,n,i){const r=-(n.x*e.x+n.y*e.y+n.z*e.z);return t.Vector3.dot(i,n)+r},e.asArray=function(e){return[e.normal.x,e.normal.y,e.normal.z,e.d]},e.clone=function(e){return i(e.normal.x,e.normal.y,e.normal.z,e.d)},e.getHashCode=function(e){return 0},e.normalize=function(e){const t=i(0,0,0,0),n=Math.sqrt(e.normal.x*e.normal.x+e.normal.y*e.normal.y+e.normal.z*e.normal.z);let r=0;return 0!==n&&(r=1/n),t.normal.x=e.normal.x*r,t.normal.y=e.normal.y*r,t.normal.z=e.normal.z*r,t.d*=r,e},e.transform=function(e,t){const r=n.Matrix.create();n.Matrix.transposeToRef(t,r);const o=r._m,a=e.normal.x,s=e.normal.y,c=e.normal.z,l=e.d;return i(a*o[0]+s*o[1]+c*o[2]+l*o[3],a*o[4]+s*o[5]+c*o[6]+l*o[7],a*o[8]+s*o[9]+c*o[10]+l*o[11],a*o[12]+s*o[13]+c*o[14]+l*o[15])},e.dotCoordinate=function(e,t){return e.normal.x*t.x+e.normal.y*t.y+e.normal.z*t.z+e.d},e.copyFromPoints=function(e,n,i){const r=n.x-e.x,o=n.y-e.y,a=n.z-e.z,s=i.x-e.x,c=i.y-e.y,l=i.z-e.z,u=o*l-a*c,d=a*s-r*l,f=r*c-o*s,h=Math.sqrt(u*u+d*d+f*f);let p;p=0!==h?1/h:0;const m=t.Vector3.create(u*p,d*p,f*p);return{normal:m,d:-(m.x*e.x+m.y*e.y+m.z*e.z)}},e.isFrontFacingTo=function(e,n,i){return t.Vector3.dot(e.normal,n)<=i},e.signedDistanceTo=function(e,n){return t.Vector3.dot(n,e.normal)+e.d}}(e.Plane||(e.Plane={}))}(Plane)),Plane}function requireMatrix(){return hasRequiredMatrix||(hasRequiredMatrix=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.Matrix=void 0;const t=requireVector3(),n=requireQuaternion(),i=requirePlane();!function(e){e.m=function(e){return e._m};let r=0;const o={};function a(){const e={updateFlag:0,isIdentity:!1,isIdentity3x2:!0,_isIdentityDirty:!0,_isIdentity3x2Dirty:!0,_m:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]};return W(e,!1),e}function s(e,t,n){for(let i=0;i<16;i++)n._m[i]=e[i+t];O(n)}function c(e,t,n,i,r,o,a,s,c,l,u,d,f,h,p,m,y){const g=y._m;g[0]=e,g[1]=t,g[2]=n,g[3]=i,g[4]=r,g[5]=o,g[6]=a,g[7]=s,g[8]=c,g[9]=l,g[10]=u,g[11]=d,g[12]=f,g[13]=h,g[14]=p,g[15]=m,O(y)}function l(e,t,n,i,r,o,s,c,l,u,d,f,h,p,m,y){const g=a(),b=g._m;return b[0]=e,b[1]=t,b[2]=n,b[3]=i,b[4]=r,b[5]=o,b[6]=s,b[7]=c,b[8]=l,b[9]=u,b[10]=d,b[11]=f,b[12]=h,b[13]=p,b[14]=m,b[15]=y,O(g),g}function u(e,t,n,i){const r=[a(),a(),a()];g(e.x,e.y,e.z,r[1]),_(t,r[0]),G(r[1],r[0],i),U(i,n)}function d(){const e=l(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1);return W(e,!0),e}function f(e,t){const n=Math.sin(e),i=Math.cos(e);c(1,0,0,0,0,i,n,0,0,-n,i,0,0,0,0,1,t),W(t,1===i&&0===n)}function h(e,t){const n=Math.sin(e),i=Math.cos(e);c(i,0,-n,0,0,1,0,0,n,0,i,0,0,0,0,1,t),W(t,1===i&&0===n)}function p(e,t){const n=Math.sin(e),i=Math.cos(e);c(i,n,0,0,-n,i,0,0,0,0,1,0,0,0,0,1,t),W(t,1===i&&0===n)}function m(e,n,i){const r=Math.sin(-n),o=Math.cos(-n),a=1-o,s=t.Vector3.normalize(e),c=i._m;c[0]=s.x*s.x*a+o,c[1]=s.x*s.y*a-s.z*r,c[2]=s.x*s.z*a+s.y*r,c[3]=0,c[4]=s.y*s.x*a+s.z*r,c[5]=s.y*s.y*a+o,c[6]=s.y*s.z*a-s.x*r,c[7]=0,c[8]=s.z*s.x*a-s.y*r,c[9]=s.z*s.y*a+s.x*r,c[10]=s.z*s.z*a+o,c[11]=0,c[12]=0,c[13]=0,c[14]=0,c[15]=1,O(i)}function y(e,t,i,r){const o=n.Quaternion.Zero();n.Quaternion.rotationYawPitchRollToRef(e,t,i,o),_(o,r)}function g(e,t,n,i){c(e,0,0,0,0,t,0,0,0,0,n,0,0,0,0,1,i),W(i,1===e&&1===t&&1===n)}function b(e,t,n,i){c(1,0,0,0,0,1,0,0,0,0,1,0,e,t,n,1,i),W(i,0===e&&0===t&&0===n)}function v(e,t,n,i){for(let r=0;r<16;r++)i._m[r]=e._m[r]*(1-n)+t._m[r]*n;O(i)}function E(e,i,r,o){const a=t.Vector3.Zero(),s=n.Quaternion.Zero(),c=t.Vector3.Zero();L(e,a,s,c);const l=t.Vector3.Zero(),d=n.Quaternion.Zero(),f=t.Vector3.Zero();L(i,l,d,f);const h=t.Vector3.Zero();t.Vector3.lerpToRef(a,l,r,h);const p=n.Quaternion.Zero();n.Quaternion.slerpToRef(s,d,r,p);const m=t.Vector3.Zero();t.Vector3.lerpToRef(c,f,r,m),u(h,p,m,o)}function x(e,n,i,r){const o=t.Vector3.Zero(),a=t.Vector3.Zero(),s=t.Vector3.Zero();t.Vector3.subtractToRef(n,e,s),t.Vector3.normalizeToRef(s,s),t.Vector3.crossToRef(i,s,o);const l=t.Vector3.lengthSquared(o);0===l?o.x=1:t.Vector3.normalizeFromLengthToRef(o,Math.sqrt(l),o),t.Vector3.crossToRef(s,o,a),t.Vector3.normalizeToRef(a,a);const u=-t.Vector3.dot(o,e),d=-t.Vector3.dot(a,e),f=-t.Vector3.dot(s,e);c(o.x,a.x,s.x,0,o.y,a.y,s.y,0,o.z,a.z,s.z,0,u,d,f,1,r)}function R(e,n,i,r){const o=t.Vector3.Zero(),a=t.Vector3.Zero(),s=t.Vector3.Zero();t.Vector3.subtractToRef(e,n,s),t.Vector3.normalizeToRef(s,s),t.Vector3.crossToRef(i,s,o);const l=t.Vector3.lengthSquared(o);0===l?o.x=1:t.Vector3.normalizeFromLengthToRef(o,Math.sqrt(l),o),t.Vector3.crossToRef(s,o,a),t.Vector3.normalizeToRef(a,a);const u=-t.Vector3.dot(o,e),d=-t.Vector3.dot(a,e),f=-t.Vector3.dot(s,e);c(o.x,a.x,s.x,0,o.y,a.y,s.y,0,o.z,a.z,s.z,0,u,d,f,1,r)}function B(e,t,n,i,r){const o=2/e,a=2/t,s=2/(i-n),l=-(i+n)/(i-n);c(o,0,0,0,0,a,0,0,0,0,s,0,0,0,l,1,r),W(r,1===o&&1===a&&1===s&&0===l)}function P(e,t,n,i,r,o,a){c(2/(t-e),0,0,0,0,2/(i-n),0,0,0,0,2/(o-r),0,(e+t)/(e-t),(i+n)/(n-i),-(o+r)/(o-r),1,a),O(a)}function w(e,t,n,i,r,o,a){P(e,t,n,i,r,o,a),a._m[10]*=-1}function C(e,t,n,i,r,o=!0){const a=n,s=i,l=1/Math.tan(.5*e);c(o?l/t:l,0,0,0,0,o?l:l*t,0,0,0,0,(s+a)/(s-a),1,0,0,-2*s*a/(s-a),0,r),W(r,!1)}function T(e,t,n,i,r,o=!0){const a=n,s=i,l=1/Math.tan(.5*e);c(o?l/t:l,0,0,0,0,o?l:l*t,0,0,0,0,-(s+a)/(s-a),-1,0,0,-2*s*a/(s-a),0,r),W(r,!1)}function S(e,t){const n=t._m,i=e._m;n[0]=i[0],n[1]=i[4],n[2]=i[8],n[3]=i[12],n[4]=i[1],n[5]=i[5],n[6]=i[9],n[7]=i[13],n[8]=i[2],n[9]=i[6],n[10]=i[10],n[11]=i[14],n[12]=i[3],n[13]=i[7],n[14]=i[11],n[15]=i[15],W(t,e.isIdentity,e._isIdentityDirty)}function M(e,t){const n=i.Plane.normalize(e),r=n.normal.x,o=n.normal.y,a=n.normal.z,s=-2*r,l=-2*o,u=-2*a;c(s*r+1,l*r,u*r,0,s*o,l*o+1,u*o,0,s*a,l*a,u*a+1,0,s*n.d,l*n.d,u*n.d,1,t)}function _(e,t){const n=e.x*e.x,i=e.y*e.y,r=e.z*e.z,o=e.x*e.y,a=e.z*e.w,s=e.z*e.x,c=e.y*e.w,l=e.y*e.z,u=e.x*e.w;t._m[0]=1-2*(i+r),t._m[1]=2*(o+a),t._m[2]=2*(s-c),t._m[3]=0,t._m[4]=2*(o-a),t._m[5]=1-2*(r+n),t._m[6]=2*(l+u),t._m[7]=0,t._m[8]=2*(s+c),t._m[9]=2*(l-u),t._m[10]=1-2*(i+n),t._m[11]=0,t._m[12]=0,t._m[13]=0,t._m[14]=0,t._m[15]=1,O(t)}function O(e){e.updateFlag=r++,e.isIdentity=!1,e.isIdentity3x2=!1,e._isIdentityDirty=!0,e._isIdentity3x2Dirty=!0}function A(e){if(!0===e.isIdentity)return 1;const t=e._m,n=t[0],i=t[1],r=t[2],o=t[3],a=t[4],s=t[5],c=t[6],l=t[7],u=t[8],d=t[9],f=t[10],h=t[11],p=t[12],m=t[13],y=t[14],g=t[15],b=f*g-y*h,v=d*g-m*h,E=d*y-m*f,x=u*g-p*h,R=u*y-f*p,B=u*m-p*d;return n*+(s*b-c*v+l*E)+i*-(a*b-c*x+l*R)+r*+(a*v-s*x+l*B)+o*-(a*E-s*R+c*B)}function k(e,t,n){for(let i=0;i<16;i++)n._m[i]=e._m[i]+t._m[i];O(n)}function N(e,t){if(!0===e.isIdentity)return void z(e,t);const n=e._m,i=n[0],r=n[1],o=n[2],a=n[3],s=n[4],l=n[5],u=n[6],d=n[7],f=n[8],h=n[9],p=n[10],m=n[11],y=n[12],g=n[13],b=n[14],v=n[15],E=p*v-b*m,x=h*v-g*m,R=h*b-g*p,B=f*v-y*m,P=f*b-p*y,w=f*g-y*h,C=+(l*E-u*x+d*R),T=-(s*E-u*B+d*P),S=+(s*x-l*B+d*w),M=-(s*R-l*P+u*w),_=i*C+r*T+o*S+a*M;if(0===_)return void z(e,t);const O=1/_,A=u*v-b*d,k=l*v-g*d,N=l*b-g*u,I=s*v-y*d,U=s*b-y*u,D=s*g-y*l,G=u*m-p*d,q=l*m-h*d,L=l*p-h*u,F=s*m-f*d,V=s*p-f*u,W=s*h-f*l;c(C*O,-(r*E-o*x+a*R)*O,+(r*A-o*k+a*N)*O,-(r*G-o*q+a*L)*O,T*O,+(i*E-o*B+a*P)*O,-(i*A-o*I+a*U)*O,+(i*G-o*F+a*V)*O,S*O,-(i*x-r*B+a*w)*O,+(i*k-r*I+a*D)*O,-(i*q-r*F+a*W)*O,M*O,+(i*R-r*P+o*w)*O,-(i*N-r*U+o*D)*O,+(i*L-r*V+o*W)*O,t)}function I(e,t,n,i){e._m[12]=t,e._m[13]=n,e._m[14]=i,O(e)}function U(e,t){I(e,t.x,t.y,t.z)}function z(e,t){D(e,t._m),W(t,e.isIdentity,e._isIdentityDirty,e.isIdentity3x2,e._isIdentity3x2Dirty)}function D(e,t,n=0){for(let i=0;i<16;i++)t[n+i]=e._m[i]}function G(e,t,n){e.isIdentity?z(t,n):t.isIdentity?z(e,n):(q(e,t,n._m,0),O(n))}function q(e,t,n,i){const r=e._m,o=t._m,a=r[0],s=r[1],c=r[2],l=r[3],u=r[4],d=r[5],f=r[6],h=r[7],p=r[8],m=r[9],y=r[10],g=r[11],b=r[12],v=r[13],E=r[14],x=r[15],R=o[0],B=o[1],P=o[2],w=o[3],C=o[4],T=o[5],S=o[6],M=o[7],_=o[8],O=o[9],A=o[10],k=o[11],N=o[12],I=o[13],U=o[14],z=o[15];n[i]=a*R+s*C+c*_+l*N,n[i+1]=a*B+s*T+c*O+l*I,n[i+2]=a*P+s*S+c*A+l*U,n[i+3]=a*w+s*M+c*k+l*z,n[i+4]=u*R+d*C+f*_+h*N,n[i+5]=u*B+d*T+f*O+h*I,n[i+6]=u*P+d*S+f*A+h*U,n[i+7]=u*w+d*M+f*k+h*z,n[i+8]=p*R+m*C+y*_+g*N,n[i+9]=p*B+m*T+y*O+g*I,n[i+10]=p*P+m*S+y*A+g*U,n[i+11]=p*w+m*M+y*k+g*z,n[i+12]=b*R+v*C+E*_+x*N,n[i+13]=b*B+v*T+E*O+x*I,n[i+14]=b*P+v*S+E*A+x*U,n[i+15]=b*w+v*M+E*k+x*z}function L(e,i,r,o){if(e.isIdentity)return o&&(o=t.Vector3.create(0,0,0)),i&&(i=t.Vector3.create(0,0,0)),r&&(r=n.Quaternion.create(0,0,0,1)),!0;const s=e._m;o&&(o=t.Vector3.create(s[12],s[13],s[14]));const l=i||t.Vector3.Zero();if(l.x=Math.sqrt(s[0]*s[0]+s[1]*s[1]+s[2]*s[2]),l.y=Math.sqrt(s[4]*s[4]+s[5]*s[5]+s[6]*s[6]),l.z=Math.sqrt(s[8]*s[8]+s[9]*s[9]+s[10]*s[10]),A(e)<=0&&(l.y*=-1),0===l.x||0===l.y||0===l.z)return r&&(r=n.Quaternion.create(0,0,0,1)),!1;if(r){const e=1/l.x,t=1/l.y,i=1/l.z,o=a();c(s[0]*e,s[1]*e,s[2]*e,0,s[4]*t,s[5]*t,s[6]*t,0,s[8]*i,s[9]*i,s[10]*i,0,0,0,0,1,o),n.Quaternion.fromRotationMatrixToRef(o,r)}return!0}function F(e,t,n){for(let i=0;i<16;i++)n._m[i]=e._m[i]*t;O(n)}function V(e,n){const i=t.Vector3.Zero();if(!L(e,i))return void(n=d());const r=e._m,o=1/i.x,a=1/i.y,s=1/i.z;c(r[0]*o,r[1]*o,r[2]*o,0,r[4]*a,r[5]*a,r[6]*a,0,r[8]*s,r[9]*s,r[10]*s,0,0,0,0,1,n)}function W(e,t,n=!1,i=!1,o=!0){e.updateFlag=r++,e.isIdentity=t,e.isIdentity3x2=t||i,e._isIdentityDirty=!e.isIdentity&&n,e._isIdentity3x2Dirty=!e.isIdentity3x2&&o}e.IdentityReadOnly=function(){return o},e.create=a,e.fromArray=function(e,t=0){const n=a();return s(e,t,n),n},e.fromArrayToRef=s,e.fromFloatArrayToRefScaled=function(e,t,n,i){for(let r=0;r<16;r++)i._m[r]=e[r+t]*n;O(i)},e.fromValuesToRef=c,e.fromValues=l,e.compose=function(e,t,n){const i=a();return u(e,t,n,i),i},e.composeToRef=u,e.Identity=d,e.IdentityToRef=function(e){c(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1,e),W(e,!0)},e.Zero=function(){const e=l(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);return W(e,!1),e},e.RotationX=function(e){const t=a();return f(e,t),t},e.rotationXToRef=f,e.rotationY=function(e){const t=a();return h(e,t),t},e.rotationYToRef=h,e.rotationZ=function(e){const t=a();return p(e,t),t},e.rotationZToRef=p,e.rotationAxis=function(e,t){const n=a();return m(e,t,n),n},e.rotationAxisToRef=m,e.rotationYawPitchRoll=function(e,t,n){const i=a();return y(e,t,n,i),i},e.rotationYawPitchRollToRef=y,e.scaling=function(e,t,n){const i=a();return g(e,t,n,i),i},e.scalingToRef=g,e.translation=function(e,t,n){const i=a();return b(e,t,n,i),i},e.translationToRef=b,e.lerp=function(e,t,n){const i=a();return v(e,t,n,i),i},e.lerpToRef=v,e.decomposeLerp=function(e,t,n){const i=a();return E(e,t,n,i),i},e.decomposeLerpToRef=E,e.LookAtLH=function(e,t,n){const i=a();return x(e,t,n,i),i},e.lookAtLHToRef=x,e.lookAtRH=function(e,t,n){const i=a();return R(e,t,n,i),i},e.lookAtRHToRef=R,e.orthoLH=function(e,t,n,i){const r=a();return B(e,t,n,i,r),r},e.orthoLHToRef=B,e.OrthoOffCenterLH=function(e,t,n,i,r,o){const s=a();return P(e,t,n,i,r,o,s),s},e.orthoOffCenterLHToRef=P,e.orthoOffCenterRH=function(e,t,n,i,r,o){const s=a();return w(e,t,n,i,r,o,s),s},e.orthoOffCenterRHToRef=w,e.perspectiveLH=function(e,t,n,i){const r=a();return c(2*n/e,0,0,0,0,2*n/t,0,0,0,0,(i+n)/(i-n),1,0,0,-2*i*n/(i-n),0,r),W(r,!1),r},e.perspectiveFovLH=function(e,t,n,i){const r=a();return C(e,t,n,i,r),r},e.perspectiveFovLHToRef=C,e.PerspectiveFovRH=function(e,t,n,i){const r=a();return T(e,t,n,i,r),r},e.perspectiveFovRHToRef=T,e.perspectiveFovWebVRToRef=function(e,t,n,i,r=!1){const o=r?-1:1,a=Math.tan(e.upDegrees*Math.PI/180),s=Math.tan(e.downDegrees*Math.PI/180),c=Math.tan(e.leftDegrees*Math.PI/180),l=Math.tan(e.rightDegrees*Math.PI/180),u=2/(c+l),d=2/(a+s),f=i._m;f[0]=u,f[1]=f[2]=f[3]=f[4]=0,f[5]=d,f[6]=f[7]=0,f[8]=(c-l)*u*.5,f[9]=-(a-s)*d*.5,f[10]=-n/(t-n),f[11]=1*o,f[12]=f[13]=f[15]=0,f[14]=-2*n*t/(n-t),O(i)},e.GetAsMatrix2x2=function(e){return[e._m[0],e._m[1],e._m[4],e._m[5]]},e.GetAsMatrix3x3=function(e){return[e._m[0],e._m[1],e._m[2],e._m[4],e._m[5],e._m[6],e._m[8],e._m[9],e._m[10]]},e.transpose=function(e){const t=a();return S(e,t),t},e.transposeToRef=S,e.reflection=function(e){const t=a();return M(e,t),t},e.reflectionToRef=M,e.fromXYZAxesToRef=function(e,t,n,i){c(e.x,e.y,e.z,0,t.x,t.y,t.z,0,n.x,n.y,n.z,0,0,0,0,1,i)},e.fromQuaternionToRef=_,e.isIdentityUpdate=function(e){if(e._isIdentityDirty){e._isIdentityDirty=!1;const t=e._m;e.isIdentity=1===t[0]&&0===t[1]&&0===t[2]&&0===t[3]&&0===t[4]&&1===t[5]&&0===t[6]&&0===t[7]&&0===t[8]&&0===t[9]&&1===t[10]&&0===t[11]&&0===t[12]&&0===t[13]&&0===t[14]&&1===t[15]}return e.isIdentity},e.isIdentityAs3x2Update=function(e){return e._isIdentity3x2Dirty&&(e._isIdentity3x2Dirty=!1,1!==e._m[0]||1!==e._m[5]||1!==e._m[15]||0!==e._m[1]||0!==e._m[2]||0!==e._m[3]||0!==e._m[4]||0!==e._m[6]||0!==e._m[7]||0!==e._m[8]||0!==e._m[9]||0!==e._m[10]||0!==e._m[11]||0!==e._m[12]||0!==e._m[13]||0!==e._m[14]?e.isIdentity3x2=!1:e.isIdentity3x2=!0),e.isIdentity3x2},e.determinant=A,e.toArray=function(e){return e._m},e.asArray=function(e){return e._m},e.reset=function(e){c(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,e),W(e,!1)},e.add=function(e,t){const n=a();return k(e,t,n),n},e.addToRef=k,e.addToSelf=function(e,t){for(let n=0;n<16;n++)e._m[n]+=t._m[n];O(e)},e.invert=function(e){const t=a();return N(e,t),t},e.invertToRef=N,e.addAtIndex=function(e,t,n){e._m[t]+=n,O(e)},e.multiplyAtIndex=function(e,t,n){return e._m[t]*=n,O(e),e},e.setTranslationFromFloats=I,e.setTranslation=U,e.getTranslation=function(e){return t.Vector3.create(e._m[12],e._m[13],e._m[14])},e.getTranslationToRef=function(e,t){t.x=e._m[12],t.y=e._m[13],t.z=e._m[14]},e.removeRotationAndScaling=function(e){const t=e._m;return c(1,0,0,0,0,1,0,0,0,0,1,0,t[12],t[13],t[14],t[15],e),W(e,0===t[12]&&0===t[13]&&0===t[14]&&1===t[15]),e},e.multiply=function(e,t){const n=a();return G(e,t,n),n},e.copy=z,e.copyToArray=D,e.multiplyToRef=G,e.multiplyToArray=q,e.equals=function(e,t){const n=t;if(!n)return!1;if((e.isIdentity||n.isIdentity)&&!e._isIdentityDirty&&!n._isIdentityDirty)return e.isIdentity&&n.isIdentity;const i=e._m,r=n._m;return i[0]===r[0]&&i[1]===r[1]&&i[2]===r[2]&&i[3]===r[3]&&i[4]===r[4]&&i[5]===r[5]&&i[6]===r[6]&&i[7]===r[7]&&i[8]===r[8]&&i[9]===r[9]&&i[10]===r[10]&&i[11]===r[11]&&i[12]===r[12]&&i[13]===r[13]&&i[14]===r[14]&&i[15]===r[15]},e.clone=function(e){const t=a();return z(e,t),t},e.getHashCode=function(e){let t=e._m[0]||0;for(let n=1;n<16;n++)t=397*t^(e._m[n]||0);return t},e.decompose=L,e.setRowFromFloats=function(e,t,n,i,r,o){if(t<0||t>3)return;const a=4*t;e._m[a+0]=n,e._m[a+1]=i,e._m[a+2]=r,e._m[a+3]=o,O(e)},e.scale=function(e,t){const n=a();return F(e,t,n),n},e.scaleToRef=F,e.scaleAndAddToRef=function(e,t,n){for(let i=0;i<16;i++)n._m[i]+=e._m[i]*t;O(n)},e.normalMatrixToRef=function(e,t){const n=a();N(e,n),S(n,t);const i=t._m;c(i[0],i[1],i[2],0,i[4],i[5],i[6],0,i[8],i[9],i[10],0,0,0,0,1,t)},e.getRotationMatrix=function(e){const t=a();return V(e,t),t},e.getRotationMatrixToRef=V,e.toggleModelMatrixHandInPlace=function(e){e._m[2]*=-1,e._m[6]*=-1,e._m[8]*=-1,e._m[9]*=-1,e._m[14]*=-1,O(e)},e.toggleProjectionMatrixHandInPlace=function(e){e._m[8]*=-1,e._m[9]*=-1,e._m[10]*=-1,e._m[11]*=-1,O(e)}}(e.Matrix||(e.Matrix={}))}(Matrix)),Matrix}function requireQuaternion(){return hasRequiredQuaternion||(hasRequiredQuaternion=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.Quaternion=void 0;const t=requireVector3(),n=requireScalar(),i=requireTypes$1(),r=requireMatrix();!function(e){function o(e=0,t=0,n=0,i=1){return{x:e,y:t,z:n,w:i}}function a(e,t,n){const i=.5*t,r=.5*e,a=.5*n,s=Math.cos(i),c=Math.cos(r),l=Math.cos(a),u=Math.sin(i),d=Math.sin(r),f=Math.sin(a);return o(c*u*l+d*s*f,d*s*l-c*u*f,c*s*f-d*u*l,c*s*l+d*u*f)}function s(e){return Math.sqrt(c(e))}function c(e){return e.x*e.x+e.y*e.y+e.z*e.z+e.w*e.w}function l(e,t){return e.x*t.x+e.y*t.y+e.z*t.z+e.w*t.w}function u(e,t){const n=l(e,t);return 2*Math.acos(Math.min(Math.abs(n),1))*i.RAD2DEG}function d(e){const t=1/s(e);return o(e.x*t,e.y*t,e.z*t,e.w*t)}function f(){return o(0,0,0,1)}function h(t,n,i){const r=e.Identity();return e.slerpToRef(t,n,i,r),r}function p(e,t,n){n.x=e.x*t.w+e.y*t.z-e.z*t.y+e.w*t.x,n.y=-e.x*t.z+e.y*t.w+e.z*t.x+e.w*t.y,n.z=e.x*t.y-e.y*t.x+e.z*t.w+e.w*t.z,n.w=-e.x*t.x-e.y*t.y-e.z*t.z+e.w*t.w}function m(n,i,o,a){const s=r.Matrix.create();r.Matrix.fromXYZAxesToRef(t.Vector3.normalize(n),t.Vector3.normalize(i),t.Vector3.normalize(o),s),e.fromRotationMatrixToRef(s,a)}e.create=o,e.add=function(e,t){return{x:e.x+t.x,y:e.y+t.y,z:e.z+t.z,w:e.w+t.w}},e.rotationYawPitchRoll=a,e.euler=function(e,t,n){return a(t*i.DEG2RAD,e*i.DEG2RAD,n*i.DEG2RAD)},e.length=s,e.lengthSquared=c,e.dot=l,e.angle=u,e.rotateTowards=function(e,t,n){const i=u(e,t);return 0===i?t:h(e,t,Math.min(1,n/i))},e.lookRotation=function(e,n={x:0,y:1,z:0}){const i=t.Vector3.normalize(e),r=t.Vector3.normalize(t.Vector3.cross(n,i)),a=t.Vector3.cross(i,r),s=r.x,c=r.y,l=r.z,u=a.x,d=a.y,f=a.z,h=i.x,p=i.y,m=i.z,y=s+d+m,g=o();if(y>0){let e=Math.sqrt(y+1);return g.w=.5*e,e=.5/e,g.x=(f-p)*e,g.y=(h-l)*e,g.z=(c-u)*e,g}if(s>=d&&s>=m){const e=Math.sqrt(1+s-d-m),t=.5/e;return g.x=.5*e,g.y=(c+u)*t,g.z=(l+h)*t,g.w=(f-p)*t,g}if(d>m){const e=Math.sqrt(1+d-s-m),t=.5/e;return g.x=(u+c)*t,g.y=.5*e,g.z=(p+f)*t,g.w=(h-l)*t,g}const b=Math.sqrt(1+m-s-d),v=.5/b;return g.x=(h+l)*v,g.y=(p+f)*v,g.z=.5*b,g.w=(c-u)*v,g},e.normalize=d,e.fromToRotation=function(e,n,i=t.Vector3.Up()){const r=t.Vector3.normalize(e),a=t.Vector3.normalize(n),s=t.Vector3.cross(r,a),c=Math.sqrt(t.Vector3.lengthSquared(r)*t.Vector3.lengthSquared(a))+t.Vector3.dot(r,a);return t.Vector3.lengthSquared(s)<1e-4?Math.abs(c)<1e-4?d(o(i.x,i.y,i.z,0)):f():d(o(s.x,s.y,s.z,c))},e.Identity=f,e.eulerAngles=function(e){const r=t.Vector3.create(),o=e.x*e.x+e.y*e.y+e.z*e.z+e.w*e.w,a=e.x*e.w-e.y*e.z;return a>.4995*o?(r.x=Math.PI/2,r.y=2*Math.atan2(e.y,e.x),r.z=0):a<-.4995*o?(r.x=-Math.PI/2,r.y=-2*Math.atan2(e.y,e.x),r.z=0):(r.x=Math.asin(2*(e.w*e.x-e.y*e.z)),r.y=Math.atan2(2*e.w*e.y+2*e.z*e.x,1-2*(e.x*e.x+e.y*e.y)),r.z=Math.atan2(2*e.w*e.z+2*e.x*e.y,1-2*(e.z*e.z+e.x*e.x))),r.x*=i.RAD2DEG,r.y*=i.RAD2DEG,r.z*=i.RAD2DEG,r.x=n.Scalar.repeat(r.x,360),r.y=n.Scalar.repeat(r.y,360),r.z=n.Scalar.repeat(r.z,360),r},e.rotationYawPitchRollToRef=function(e,t,n,i){const r=.5*t,o=.5*e,a=.5*n,s=Math.cos(r),c=Math.cos(o),l=Math.cos(a),u=Math.sin(r),d=Math.sin(o),f=Math.sin(a);i.x=c*u*l+d*s*f,i.y=d*s*l-c*u*f,i.z=c*s*f-d*u*l,i.w=c*s*l+d*u*f},e.fromRotationMatrixToRef=function(e,t){const n=e._m,i=n[0],r=n[4],o=n[8],a=n[1],s=n[5],c=n[9],l=n[2],u=n[6],d=n[10],f=i+s+d;let h;f>0?(h=.5/Math.sqrt(f+1),t.w=.25/h,t.x=(u-c)*h,t.y=(o-l)*h,t.z=(a-r)*h):i>s&&i>d?(h=2*Math.sqrt(1+i-s-d),t.w=(u-c)/h,t.x=.25*h,t.y=(r+a)/h,t.z=(o+l)/h):s>d?(h=2*Math.sqrt(1+s-i-d),t.w=(o-l)/h,t.x=(r+a)/h,t.y=.25*h,t.z=(c+u)/h):(h=2*Math.sqrt(1+d-i-s),t.w=(a-r)/h,t.x=(o+l)/h,t.y=(c+u)/h,t.z=.25*h)},e.slerp=h,e.slerpToRef=function(e,t,n,i){let r,o,a=e.x*t.x+e.y*t.y+e.z*t.z+e.w*t.w,s=!1;if(a<0&&(s=!0,a=-a),a>.999999)o=1-n,r=s?-n:n;else{const e=Math.acos(a),t=1/Math.sin(e);o=Math.sin((1-n)*e)*t,r=s?-Math.sin(n*e)*t:Math.sin(n*e)*t}i.x=o*e.x+r*t.x,i.y=o*e.y+r*t.y,i.z=o*e.z+r*t.z,i.w=o*e.w+r*t.w},e.multiply=function(e,t){const n=o(0,0,0,1);return p(e,t,n),n},e.multiplyToRef=p,e.angleAxis=function(n,r){if(0===t.Vector3.lengthSquared(r))return e.Identity();const o=f();let a=n*i.DEG2RAD;a*=.5;const s=t.Vector3.normalize(r);return t.Vector3.scaleToRef(s,Math.sin(a),s),o.x=s.x,o.y=s.y,o.z=s.z,o.w=Math.cos(a),d(o)},e.rotationQuaternionFromAxis=function(t,n,i){const r=e.create(0,0,0,0);return m(t,n,i,r),r},e.rotationQuaternionFromAxisToRef=m,e.Zero=function(){return o(0,0,0,0)}}(e.Quaternion||(e.Quaternion={}))}(Quaternion)),Quaternion}function requireDist$1(){return hasRequiredDist$1||(hasRequiredDist$1=1,function(e){var t=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),n=commonjsGlobal&&commonjsGlobal.__exportStar||function(e,n){for(var i in e)"default"===i||Object.prototype.hasOwnProperty.call(n,i)||t(n,e,i)};Object.defineProperty(e,"__esModule",{value:!0}),n(requireQuaternion(),e),n(requireVector3(),e),n(requireTypes$1(),e),n(requireDist$1(),e)}(dist$1)),dist$1}var distExports$1=requireDist$1(),minimal$1={exports:{}},indexMinimal={},minimal={},aspromise,hasRequiredAspromise;function requireAspromise(){if(hasRequiredAspromise)return aspromise;return hasRequiredAspromise=1,aspromise=function(e,t){var n=new Array(arguments.length-1),i=0,r=2,o=!0;for(;r<arguments.length;)n[i++]=arguments[r++];return new Promise((function(r,a){n[i]=function(e){if(o)if(o=!1,e)a(e);else{for(var t=new Array(arguments.length-1),n=0;n<t.length;)t[n++]=arguments[n];r.apply(null,t)}};try{e.apply(t||null,n)}catch(e){o&&(o=!1,a(e))}}))},aspromise}var base64={},hasRequiredBase64,eventemitter,hasRequiredEventemitter,float,hasRequiredFloat,inquire_1,hasRequiredInquire;function requireBase64(){return hasRequiredBase64||(hasRequiredBase64=1,function(e){var t=e;t.length=function(e){var t=e.length;if(!t)return 0;for(var n=0;--t%4>1&&"="===e.charAt(t);)++n;return Math.ceil(3*e.length)/4-n};for(var n=new Array(64),i=new Array(123),r=0;r<64;)i[n[r]=r<26?r+65:r<52?r+71:r<62?r-4:r-59|43]=r++;t.encode=function(e,t,i){for(var r,o=null,a=[],s=0,c=0;t<i;){var l=e[t++];switch(c){case 0:a[s++]=n[l>>2],r=(3&l)<<4,c=1;break;case 1:a[s++]=n[r|l>>4],r=(15&l)<<2,c=2;break;case 2:a[s++]=n[r|l>>6],a[s++]=n[63&l],c=0}s>8191&&((o||(o=[])).push(String.fromCharCode.apply(String,a)),s=0)}return c&&(a[s++]=n[r],a[s++]=61,1===c&&(a[s++]=61)),o?(s&&o.push(String.fromCharCode.apply(String,a.slice(0,s))),o.join("")):String.fromCharCode.apply(String,a.slice(0,s))};var o="invalid encoding";t.decode=function(e,t,n){for(var r,a=n,s=0,c=0;c<e.length;){var l=e.charCodeAt(c++);if(61===l&&s>1)break;if(void 0===(l=i[l]))throw Error(o);switch(s){case 0:r=l,s=1;break;case 1:t[n++]=r<<2|(48&l)>>4,r=l,s=2;break;case 2:t[n++]=(15&r)<<4|(60&l)>>2,r=l,s=3;break;case 3:t[n++]=(3&r)<<6|l,s=0}}if(1===s)throw Error(o);return n-a},t.test=function(e){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(e)}}(base64)),base64}function requireEventemitter(){if(hasRequiredEventemitter)return eventemitter;function e(){this._listeners={}}return hasRequiredEventemitter=1,eventemitter=e,e.prototype.on=function(e,t,n){return(this._listeners[e]||(this._listeners[e]=[])).push({fn:t,ctx:n||this}),this},e.prototype.off=function(e,t){if(void 0===e)this._listeners={};else if(void 0===t)this._listeners[e]=[];else for(var n=this._listeners[e],i=0;i<n.length;)n[i].fn===t?n.splice(i,1):++i;return this},e.prototype.emit=function(e){var t=this._listeners[e];if(t){for(var n=[],i=1;i<arguments.length;)n.push(arguments[i++]);for(i=0;i<t.length;)t[i].fn.apply(t[i++].ctx,n)}return this},eventemitter}function requireFloat(){if(hasRequiredFloat)return float;function e(e){return"undefined"!=typeof Float32Array?function(){var t=new Float32Array([-0]),n=new Uint8Array(t.buffer),i=128===n[3];function r(e,i,r){t[0]=e,i[r]=n[0],i[r+1]=n[1],i[r+2]=n[2],i[r+3]=n[3]}function o(e,i,r){t[0]=e,i[r]=n[3],i[r+1]=n[2],i[r+2]=n[1],i[r+3]=n[0]}function a(e,i){return n[0]=e[i],n[1]=e[i+1],n[2]=e[i+2],n[3]=e[i+3],t[0]}function s(e,i){return n[3]=e[i],n[2]=e[i+1],n[1]=e[i+2],n[0]=e[i+3],t[0]}e.writeFloatLE=i?r:o,e.writeFloatBE=i?o:r,e.readFloatLE=i?a:s,e.readFloatBE=i?s:a}():function(){function o(e,t,n,i){var r=t<0?1:0;if(r&&(t=-t),0===t)e(1/t>0?0:2147483648,n,i);else if(isNaN(t))e(2143289344,n,i);else if(t>34028234663852886e22)e((r<<31|2139095040)>>>0,n,i);else if(t<11754943508222875e-54)e((r<<31|Math.round(t/1401298464324817e-60))>>>0,n,i);else{var o=Math.floor(Math.log(t)/Math.LN2);e((r<<31|o+127<<23|8388607&Math.round(t*Math.pow(2,-o)*8388608))>>>0,n,i)}}function a(e,t,n){var i=e(t,n),r=2*(i>>31)+1,o=i>>>23&255,a=8388607&i;return 255===o?a?NaN:r*(1/0):0===o?1401298464324817e-60*r*a:r*Math.pow(2,o-150)*(a+8388608)}e.writeFloatLE=o.bind(null,t),e.writeFloatBE=o.bind(null,n),e.readFloatLE=a.bind(null,i),e.readFloatBE=a.bind(null,r)}(),"undefined"!=typeof Float64Array?function(){var t=new Float64Array([-0]),n=new Uint8Array(t.buffer),i=128===n[7];function r(e,i,r){t[0]=e,i[r]=n[0],i[r+1]=n[1],i[r+2]=n[2],i[r+3]=n[3],i[r+4]=n[4],i[r+5]=n[5],i[r+6]=n[6],i[r+7]=n[7]}function o(e,i,r){t[0]=e,i[r]=n[7],i[r+1]=n[6],i[r+2]=n[5],i[r+3]=n[4],i[r+4]=n[3],i[r+5]=n[2],i[r+6]=n[1],i[r+7]=n[0]}function a(e,i){return n[0]=e[i],n[1]=e[i+1],n[2]=e[i+2],n[3]=e[i+3],n[4]=e[i+4],n[5]=e[i+5],n[6]=e[i+6],n[7]=e[i+7],t[0]}function s(e,i){return n[7]=e[i],n[6]=e[i+1],n[5]=e[i+2],n[4]=e[i+3],n[3]=e[i+4],n[2]=e[i+5],n[1]=e[i+6],n[0]=e[i+7],t[0]}e.writeDoubleLE=i?r:o,e.writeDoubleBE=i?o:r,e.readDoubleLE=i?a:s,e.readDoubleBE=i?s:a}():function(){function o(e,t,n,i,r,o){var a=i<0?1:0;if(a&&(i=-i),0===i)e(0,r,o+t),e(1/i>0?0:2147483648,r,o+n);else if(isNaN(i))e(0,r,o+t),e(2146959360,r,o+n);else if(i>17976931348623157e292)e(0,r,o+t),e((a<<31|2146435072)>>>0,r,o+n);else{var s;if(i<22250738585072014e-324)e((s=i/5e-324)>>>0,r,o+t),e((a<<31|s/4294967296)>>>0,r,o+n);else{var c=Math.floor(Math.log(i)/Math.LN2);1024===c&&(c=1023),e(4503599627370496*(s=i*Math.pow(2,-c))>>>0,r,o+t),e((a<<31|c+1023<<20|1048576*s&1048575)>>>0,r,o+n)}}}function a(e,t,n,i,r){var o=e(i,r+t),a=e(i,r+n),s=2*(a>>31)+1,c=a>>>20&2047,l=4294967296*(1048575&a)+o;return 2047===c?l?NaN:s*(1/0):0===c?5e-324*s*l:s*Math.pow(2,c-1075)*(l+4503599627370496)}e.writeDoubleLE=o.bind(null,t,0,4),e.writeDoubleBE=o.bind(null,n,4,0),e.readDoubleLE=a.bind(null,i,0,4),e.readDoubleBE=a.bind(null,r,4,0)}(),e}function t(e,t,n){t[n]=255&e,t[n+1]=e>>>8&255,t[n+2]=e>>>16&255,t[n+3]=e>>>24}function n(e,t,n){t[n]=e>>>24,t[n+1]=e>>>16&255,t[n+2]=e>>>8&255,t[n+3]=255&e}function i(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16|e[t+3]<<24)>>>0}function r(e,t){return(e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3])>>>0}return hasRequiredFloat=1,float=e(e)}function requireInquire(){if(hasRequiredInquire)return inquire_1;function inquire(moduleName){try{var mod=eval("quire".replace(/^/,"re"))(moduleName);if(mod&&(mod.length||Object.keys(mod).length))return mod}catch(e){}return null}return hasRequiredInquire=1,inquire_1=inquire,inquire_1}var utf8={},hasRequiredUtf8,pool_1,hasRequiredPool,longbits,hasRequiredLongbits,hasRequiredMinimal$1,writer,hasRequiredWriter,writer_buffer,hasRequiredWriter_buffer,reader,hasRequiredReader,reader_buffer,hasRequiredReader_buffer;function requireUtf8(){return hasRequiredUtf8||(hasRequiredUtf8=1,function(e){var t=e;t.length=function(e){for(var t=0,n=0,i=0;i<e.length;++i)(n=e.charCodeAt(i))<128?t+=1:n<2048?t+=2:55296==(64512&n)&&56320==(64512&e.charCodeAt(i+1))?(++i,t+=4):t+=3;return t},t.read=function(e,t,n){if(n-t<1)return"";for(var i,r=null,o=[],a=0;t<n;)(i=e[t++])<128?o[a++]=i:i>191&&i<224?o[a++]=(31&i)<<6|63&e[t++]:i>239&&i<365?(i=((7&i)<<18|(63&e[t++])<<12|(63&e[t++])<<6|63&e[t++])-65536,o[a++]=55296+(i>>10),o[a++]=56320+(1023&i)):o[a++]=(15&i)<<12|(63&e[t++])<<6|63&e[t++],a>8191&&((r||(r=[])).push(String.fromCharCode.apply(String,o)),a=0);return r?(a&&r.push(String.fromCharCode.apply(String,o.slice(0,a))),r.join("")):String.fromCharCode.apply(String,o.slice(0,a))},t.write=function(e,t,n){for(var i,r,o=n,a=0;a<e.length;++a)(i=e.charCodeAt(a))<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296==(64512&i)&&56320==(64512&(r=e.charCodeAt(a+1)))?(i=65536+((1023&i)<<10)+(1023&r),++a,t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128);return n-o}}(utf8)),utf8}function requirePool(){if(hasRequiredPool)return pool_1;return hasRequiredPool=1,pool_1=function(e,t,n){var i=n||8192,r=i>>>1,o=null,a=i;return function(n){if(n<1||n>r)return e(n);a+n>i&&(o=e(i),a=0);var s=t.call(o,a,a+=n);return 7&a&&(a=1+(7|a)),s}}}function requireLongbits(){if(hasRequiredLongbits)return longbits;hasRequiredLongbits=1,longbits=t;var e=requireMinimal$1();function t(e,t){this.lo=e>>>0,this.hi=t>>>0}var n=t.zero=new t(0,0);n.toNumber=function(){return 0},n.zzEncode=n.zzDecode=function(){return this},n.length=function(){return 1};var i=t.zeroHash="\0\0\0\0\0\0\0\0";t.fromNumber=function(e){if(0===e)return n;var i=e<0;i&&(e=-e);var r=e>>>0,o=(e-r)/4294967296>>>0;return i&&(o=~o>>>0,r=~r>>>0,++r>4294967295&&(r=0,++o>4294967295&&(o=0))),new t(r,o)},t.from=function(i){if("number"==typeof i)return t.fromNumber(i);if(e.isString(i)){if(!e.Long)return t.fromNumber(parseInt(i,10));i=e.Long.fromString(i)}return i.low||i.high?new t(i.low>>>0,i.high>>>0):n},t.prototype.toNumber=function(e){if(!e&&this.hi>>>31){var t=1+~this.lo>>>0,n=~this.hi>>>0;return t||(n=n+1>>>0),-(t+4294967296*n)}return this.lo+4294967296*this.hi},t.prototype.toLong=function(t){return e.Long?new e.Long(0|this.lo,0|this.hi,Boolean(t)):{low:0|this.lo,high:0|this.hi,unsigned:Boolean(t)}};var r=String.prototype.charCodeAt;return t.fromHash=function(e){return e===i?n:new t((r.call(e,0)|r.call(e,1)<<8|r.call(e,2)<<16|r.call(e,3)<<24)>>>0,(r.call(e,4)|r.call(e,5)<<8|r.call(e,6)<<16|r.call(e,7)<<24)>>>0)},t.prototype.toHash=function(){return String.fromCharCode(255&this.lo,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,255&this.hi,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)},t.prototype.zzEncode=function(){var e=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^e)>>>0,this.lo=(this.lo<<1^e)>>>0,this},t.prototype.zzDecode=function(){var e=-(1&this.lo);return this.lo=((this.lo>>>1|this.hi<<31)^e)>>>0,this.hi=(this.hi>>>1^e)>>>0,this},t.prototype.length=function(){var e=this.lo,t=(this.lo>>>28|this.hi<<4)>>>0,n=this.hi>>>24;return 0===n?0===t?e<16384?e<128?1:2:e<2097152?3:4:t<16384?t<128?5:6:t<2097152?7:8:n<128?9:10},longbits}function requireMinimal$1(){return hasRequiredMinimal$1||(hasRequiredMinimal$1=1,function(e){var t=e;function n(e,t,n){for(var i=Object.keys(t),r=0;r<i.length;++r)void 0!==e[i[r]]&&n||(e[i[r]]=t[i[r]]);return e}function i(e){function t(e,i){if(!(this instanceof t))return new t(e,i);Object.defineProperty(this,"message",{get:function(){return e}}),Error.captureStackTrace?Error.captureStackTrace(this,t):Object.defineProperty(this,"stack",{value:(new Error).stack||""}),i&&n(this,i)}return(t.prototype=Object.create(Error.prototype)).constructor=t,Object.defineProperty(t.prototype,"name",{get:function(){return e}}),t.prototype.toString=function(){return this.name+": "+this.message},t}t.asPromise=requireAspromise(),t.base64=requireBase64(),t.EventEmitter=requireEventemitter(),t.float=requireFloat(),t.inquire=requireInquire(),t.utf8=requireUtf8(),t.pool=requirePool(),t.LongBits=requireLongbits(),t.isNode=Boolean(void 0!==commonjsGlobal&&commonjsGlobal&&commonjsGlobal.process&&commonjsGlobal.process.versions&&commonjsGlobal.process.versions.node),t.global=t.isNode&&commonjsGlobal||"undefined"!=typeof window&&window||"undefined"!=typeof self&&self||commonjsGlobal,t.emptyArray=Object.freeze?Object.freeze([]):[],t.emptyObject=Object.freeze?Object.freeze({}):{},t.isInteger=Number.isInteger||function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e},t.isString=function(e){return"string"==typeof e||e instanceof String},t.isObject=function(e){return e&&"object"==typeof e},t.isset=t.isSet=function(e,t){var n=e[t];return!(null==n||!e.hasOwnProperty(t))&&("object"!=typeof n||(Array.isArray(n)?n.length:Object.keys(n).length)>0)},t.Buffer=function(){try{var e=t.inquire("buffer").Buffer;return e.prototype.utf8Write?e:null}catch(e){return null}}(),t._Buffer_from=null,t._Buffer_allocUnsafe=null,t.newBuffer=function(e){return"number"==typeof e?t.Buffer?t._Buffer_allocUnsafe(e):new t.Array(e):t.Buffer?t._Buffer_from(e):"undefined"==typeof Uint8Array?e:new Uint8Array(e)},t.Array="undefined"!=typeof Uint8Array?Uint8Array:Array,t.Long=t.global.dcodeIO&&t.global.dcodeIO.Long||t.global.Long||t.inquire("long"),t.key2Re=/^true|false|0|1$/,t.key32Re=/^-?(?:0|[1-9][0-9]*)$/,t.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/,t.longToHash=function(e){return e?t.LongBits.from(e).toHash():t.LongBits.zeroHash},t.longFromHash=function(e,n){var i=t.LongBits.fromHash(e);return t.Long?t.Long.fromBits(i.lo,i.hi,n):i.toNumber(Boolean(n))},t.merge=n,t.lcFirst=function(e){return e.charAt(0).toLowerCase()+e.substring(1)},t.newError=i,t.ProtocolError=i("ProtocolError"),t.oneOfGetter=function(e){for(var t={},n=0;n<e.length;++n)t[e[n]]=1;return function(){for(var e=Object.keys(this),n=e.length-1;n>-1;--n)if(1===t[e[n]]&&void 0!==this[e[n]]&&null!==this[e[n]])return e[n]}},t.oneOfSetter=function(e){return function(t){for(var n=0;n<e.length;++n)e[n]!==t&&delete this[e[n]]}},t.toJSONOptions={longs:String,enums:String,bytes:String,json:!0},t._configure=function(){var e=t.Buffer;e?(t._Buffer_from=e.from!==Uint8Array.from&&e.from||function(t,n){return new e(t,n)},t._Buffer_allocUnsafe=e.allocUnsafe||function(t){return new e(t)}):t._Buffer_from=t._Buffer_allocUnsafe=null}}(minimal)),minimal}function requireWriter(){if(hasRequiredWriter)return writer;hasRequiredWriter=1,writer=c;var e,t=requireMinimal$1(),n=t.LongBits,i=t.base64,r=t.utf8;function o(e,t,n){this.fn=e,this.len=t,this.next=void 0,this.val=n}function a(){}function s(e){this.head=e.head,this.tail=e.tail,this.len=e.len,this.next=e.states}function c(){this.len=0,this.head=new o(a,0,0),this.tail=this.head,this.states=null}var l=function(){return t.Buffer?function(){return(c.create=function(){return new e})()}:function(){return new c}};function u(e,t,n){t[n]=255&e}function d(e,t){this.len=e,this.next=void 0,this.val=t}function f(e,t,n){for(;e.hi;)t[n++]=127&e.lo|128,e.lo=(e.lo>>>7|e.hi<<25)>>>0,e.hi>>>=7;for(;e.lo>127;)t[n++]=127&e.lo|128,e.lo=e.lo>>>7;t[n++]=e.lo}function h(e,t,n){t[n]=255&e,t[n+1]=e>>>8&255,t[n+2]=e>>>16&255,t[n+3]=e>>>24}c.create=l(),c.alloc=function(e){return new t.Array(e)},t.Array!==Array&&(c.alloc=t.pool(c.alloc,t.Array.prototype.subarray)),c.prototype._push=function(e,t,n){return this.tail=this.tail.next=new o(e,t,n),this.len+=t,this},d.prototype=Object.create(o.prototype),d.prototype.fn=function(e,t,n){for(;e>127;)t[n++]=127&e|128,e>>>=7;t[n]=e},c.prototype.uint32=function(e){return this.len+=(this.tail=this.tail.next=new d((e>>>=0)<128?1:e<16384?2:e<2097152?3:e<268435456?4:5,e)).len,this},c.prototype.int32=function(e){return e<0?this._push(f,10,n.fromNumber(e)):this.uint32(e)},c.prototype.sint32=function(e){return this.uint32((e<<1^e>>31)>>>0)},c.prototype.uint64=function(e){var t=n.from(e);return this._push(f,t.length(),t)},c.prototype.int64=c.prototype.uint64,c.prototype.sint64=function(e){var t=n.from(e).zzEncode();return this._push(f,t.length(),t)},c.prototype.bool=function(e){return this._push(u,1,e?1:0)},c.prototype.fixed32=function(e){return this._push(h,4,e>>>0)},c.prototype.sfixed32=c.prototype.fixed32,c.prototype.fixed64=function(e){var t=n.from(e);return this._push(h,4,t.lo)._push(h,4,t.hi)},c.prototype.sfixed64=c.prototype.fixed64,c.prototype.float=function(e){return this._push(t.float.writeFloatLE,4,e)},c.prototype.double=function(e){return this._push(t.float.writeDoubleLE,8,e)};var p=t.Array.prototype.set?function(e,t,n){t.set(e,n)}:function(e,t,n){for(var i=0;i<e.length;++i)t[n+i]=e[i]};return c.prototype.bytes=function(e){var n=e.length>>>0;if(!n)return this._push(u,1,0);if(t.isString(e)){var r=c.alloc(n=i.length(e));i.decode(e,r,0),e=r}return this.uint32(n)._push(p,n,e)},c.prototype.string=function(e){var t=r.length(e);return t?this.uint32(t)._push(r.write,t,e):this._push(u,1,0)},c.prototype.fork=function(){return this.states=new s(this),this.head=this.tail=new o(a,0,0),this.len=0,this},c.prototype.reset=function(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new o(a,0,0),this.len=0),this},c.prototype.ldelim=function(){var e=this.head,t=this.tail,n=this.len;return this.reset().uint32(n),n&&(this.tail.next=e.next,this.tail=t,this.len+=n),this},c.prototype.finish=function(){for(var e=this.head.next,t=this.constructor.alloc(this.len),n=0;e;)e.fn(e.val,t,n),n+=e.len,e=e.next;return t},c._configure=function(t){e=t,c.create=l(),e._configure()},writer}function requireWriter_buffer(){if(hasRequiredWriter_buffer)return writer_buffer;hasRequiredWriter_buffer=1,writer_buffer=n;var e=requireWriter();(n.prototype=Object.create(e.prototype)).constructor=n;var t=requireMinimal$1();function n(){e.call(this)}function i(e,n,i){e.length<40?t.utf8.write(e,n,i):n.utf8Write?n.utf8Write(e,i):n.write(e,i)}return n._configure=function(){n.alloc=t._Buffer_allocUnsafe,n.writeBytesBuffer=t.Buffer&&t.Buffer.prototype instanceof Uint8Array&&"set"===t.Buffer.prototype.set.name?function(e,t,n){t.set(e,n)}:function(e,t,n){if(e.copy)e.copy(t,n,0,e.length);else for(var i=0;i<e.length;)t[n++]=e[i++]}},n.prototype.bytes=function(e){t.isString(e)&&(e=t._Buffer_from(e,"base64"));var i=e.length>>>0;return this.uint32(i),i&&this._push(n.writeBytesBuffer,i,e),this},n.prototype.string=function(e){var n=t.Buffer.byteLength(e);return this.uint32(n),n&&this._push(i,n,e),this},n._configure(),writer_buffer}function requireReader(){if(hasRequiredReader)return reader;hasRequiredReader=1,reader=o;var e,t=requireMinimal$1(),n=t.LongBits,i=t.utf8;function r(e,t){return RangeError("index out of range: "+e.pos+" + "+(t||1)+" > "+e.len)}function o(e){this.buf=e,this.pos=0,this.len=e.length}var a,s="undefined"!=typeof Uint8Array?function(e){if(e instanceof Uint8Array||Array.isArray(e))return new o(e);throw Error("illegal buffer")}:function(e){if(Array.isArray(e))return new o(e);throw Error("illegal buffer")},c=function(){return t.Buffer?function(n){return(o.create=function(n){return t.Buffer.isBuffer(n)?new e(n):s(n)})(n)}:s};function l(){var e=new n(0,0),t=0;if(!(this.len-this.pos>4)){for(;t<3;++t){if(this.pos>=this.len)throw r(this);if(e.lo=(e.lo|(127&this.buf[this.pos])<<7*t)>>>0,this.buf[this.pos++]<128)return e}return e.lo=(e.lo|(127&this.buf[this.pos++])<<7*t)>>>0,e}for(;t<4;++t)if(e.lo=(e.lo|(127&this.buf[this.pos])<<7*t)>>>0,this.buf[this.pos++]<128)return e;if(e.lo=(e.lo|(127&this.buf[this.pos])<<28)>>>0,e.hi=(e.hi|(127&this.buf[this.pos])>>4)>>>0,this.buf[this.pos++]<128)return e;if(t=0,this.len-this.pos>4){for(;t<5;++t)if(e.hi=(e.hi|(127&this.buf[this.pos])<<7*t+3)>>>0,this.buf[this.pos++]<128)return e}else for(;t<5;++t){if(this.pos>=this.len)throw r(this);if(e.hi=(e.hi|(127&this.buf[this.pos])<<7*t+3)>>>0,this.buf[this.pos++]<128)return e}throw Error("invalid varint encoding")}function u(e,t){return(e[t-4]|e[t-3]<<8|e[t-2]<<16|e[t-1]<<24)>>>0}function d(){if(this.pos+8>this.len)throw r(this,8);return new n(u(this.buf,this.pos+=4),u(this.buf,this.pos+=4))}return o.create=c(),o.prototype._slice=t.Array.prototype.subarray||t.Array.prototype.slice,o.prototype.uint32=(a=4294967295,function(){if(a=(127&this.buf[this.pos])>>>0,this.buf[this.pos++]<128)return a;if(a=(a|(127&this.buf[this.pos])<<7)>>>0,this.buf[this.pos++]<128)return a;if(a=(a|(127&this.buf[this.pos])<<14)>>>0,this.buf[this.pos++]<128)return a;if(a=(a|(127&this.buf[this.pos])<<21)>>>0,this.buf[this.pos++]<128)return a;if(a=(a|(15&this.buf[this.pos])<<28)>>>0,this.buf[this.pos++]<128)return a;if((this.pos+=5)>this.len)throw this.pos=this.len,r(this,10);return a}),o.prototype.int32=function(){return 0|this.uint32()},o.prototype.sint32=function(){var e=this.uint32();return e>>>1^-(1&e)|0},o.prototype.bool=function(){return 0!==this.uint32()},o.prototype.fixed32=function(){if(this.pos+4>this.len)throw r(this,4);return u(this.buf,this.pos+=4)},o.prototype.sfixed32=function(){if(this.pos+4>this.len)throw r(this,4);return 0|u(this.buf,this.pos+=4)},o.prototype.float=function(){if(this.pos+4>this.len)throw r(this,4);var e=t.float.readFloatLE(this.buf,this.pos);return this.pos+=4,e},o.prototype.double=function(){if(this.pos+8>this.len)throw r(this,4);var e=t.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,e},o.prototype.bytes=function(){var e=this.uint32(),t=this.pos,n=this.pos+e;if(n>this.len)throw r(this,e);return this.pos+=e,Array.isArray(this.buf)?this.buf.slice(t,n):t===n?new this.buf.constructor(0):this._slice.call(this.buf,t,n)},o.prototype.string=function(){var e=this.bytes();return i.read(e,0,e.length)},o.prototype.skip=function(e){if("number"==typeof e){if(this.pos+e>this.len)throw r(this,e);this.pos+=e}else do{if(this.pos>=this.len)throw r(this)}while(128&this.buf[this.pos++]);return this},o.prototype.skipType=function(e){switch(e){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;4!=(e=7&this.uint32());)this.skipType(e);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+e+" at offset "+this.pos)}return this},o._configure=function(n){e=n,o.create=c(),e._configure();var i=t.Long?"toLong":"toNumber";t.merge(o.prototype,{int64:function(){return l.call(this)[i](!1)},uint64:function(){return l.call(this)[i](!0)},sint64:function(){return l.call(this).zzDecode()[i](!1)},fixed64:function(){return d.call(this)[i](!0)},sfixed64:function(){return d.call(this)[i](!1)}})},reader}function requireReader_buffer(){if(hasRequiredReader_buffer)return reader_buffer;hasRequiredReader_buffer=1,reader_buffer=n;var e=requireReader();(n.prototype=Object.create(e.prototype)).constructor=n;var t=requireMinimal$1();function n(t){e.call(this,t)}return n._configure=function(){t.Buffer&&(n.prototype._slice=t.Buffer.prototype.slice)},n.prototype.string=function(){var e=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+e,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+e,this.len))},n._configure(),reader_buffer}var rpc={},service,hasRequiredService,hasRequiredRpc,roots,hasRequiredRoots,hasRequiredIndexMinimal,hasRequiredMinimal;function requireService(){if(hasRequiredService)return service;hasRequiredService=1,service=t;var e=requireMinimal$1();function t(t,n,i){if("function"!=typeof t)throw TypeError("rpcImpl must be a function");e.EventEmitter.call(this),this.rpcImpl=t,this.requestDelimited=Boolean(n),this.responseDelimited=Boolean(i)}return(t.prototype=Object.create(e.EventEmitter.prototype)).constructor=t,t.prototype.rpcCall=function t(n,i,r,o,a){if(!o)throw TypeError("request must be specified");var s=this;if(!a)return e.asPromise(t,s,n,i,r,o);if(s.rpcImpl)try{return s.rpcImpl(n,i[s.requestDelimited?"encodeDelimited":"encode"](o).finish(),(function(e,t){if(e)return s.emit("error",e,n),a(e);if(null!==t){if(!(t instanceof r))try{t=r[s.responseDelimited?"decodeDelimited":"decode"](t)}catch(e){return s.emit("error",e,n),a(e)}return s.emit("data",t,n),a(null,t)}s.end(!0)}))}catch(e){return s.emit("error",e,n),void setTimeout((function(){a(e)}),0)}else setTimeout((function(){a(Error("already ended"))}),0)},t.prototype.end=function(e){return this.rpcImpl&&(e||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this},service}function requireRpc(){return hasRequiredRpc||(hasRequiredRpc=1,function(e){e.Service=requireService()}(rpc)),rpc}function requireRoots(){return hasRequiredRoots?roots:(hasRequiredRoots=1,roots={})}function requireIndexMinimal(){return hasRequiredIndexMinimal||(hasRequiredIndexMinimal=1,function(e){var t=e;function n(){t.util._configure(),t.Writer._configure(t.BufferWriter),t.Reader._configure(t.BufferReader)}t.build="minimal",t.Writer=requireWriter(),t.BufferWriter=requireWriter_buffer(),t.Reader=requireReader(),t.BufferReader=requireReader_buffer(),t.util=requireMinimal$1(),t.rpc=requireRpc(),t.roots=requireRoots(),t.configure=n,n()}(indexMinimal)),indexMinimal}function requireMinimal(){return hasRequiredMinimal||(hasRequiredMinimal=1,minimal$1.exports=requireIndexMinimal()),minimal$1.exports}var minimalExports=requireMinimal();function createBasePBAnimator(){return{states:[]}}const PBAnimator={encode(e,t=minimalExports.Writer.create()){for(const n of e.states)PBAnimationState.encode(n,t.uint32(10).fork()).ldelim();return t},decode(e,t){const n=e instanceof minimalExports.Reader?e:new minimalExports.Reader(e);let i=void 0===t?n.len:n.pos+t;const r=createBasePBAnimator();for(;n.pos<i;){const e=n.uint32();if(e>>>3==1)r.states.push(PBAnimationState.decode(n,n.uint32()));else n.skipType(7&e)}return r}};function createBasePBAnimationState(){return{name:"",clip:"",playing:void 0,weight:void 0,speed:void 0,loop:void 0,shouldReset:void 0}}const PBAnimationState={encode:(e,t=minimalExports.Writer.create())=>(""!==e.name&&t.uint32(10).string(e.name),""!==e.clip&&t.uint32(18).string(e.clip),void 0!==e.playing&&t.uint32(24).bool(e.playing),void 0!==e.weight&&t.uint32(37).float(e.weight),void 0!==e.speed&&t.uint32(45).float(e.speed),void 0!==e.loop&&t.uint32(48).bool(e.loop),void 0!==e.shouldReset&&t.uint32(56).bool(e.shouldReset),t),decode(e,t){const n=e instanceof minimalExports.Reader?e:new minimalExports.Reader(e);let i=void 0===t?n.len:n.pos+t;const r=createBasePBAnimationState();for(;n.pos<i;){const e=n.uint32();switch(e>>>3){case 1:r.name=n.string();break;case 2:r.clip=n.string();break;case 3:r.playing=n.bool();break;case 4:r.weight=n.float();break;case 5:r.speed=n.float();break;case 6:r.loop=n.bool();break;case 7:r.shouldReset=n.bool();break;default:n.skipType(7&e)}}return r}},COMPONENT_ID$w=1042,AnimatorSchema={serialize(e,t){const n=PBAnimator.encode(e),i=new Uint8Array(n.finish(),0,n.len);t.writeBuffer(i,!1)},deserialize:e=>PBAnimator.decode(e.buffer(),e.remainingBytes()),create:()=>PBAnimator.decode(new Uint8Array)};function createBasePBAudioSource(){return{playing:void 0,volume:void 0,loop:void 0,pitch:void 0,audioClipUrl:""}}const PBAudioSource={encode:(e,t=minimalExports.Writer.create())=>(void 0!==e.playing&&t.uint32(8).bool(e.playing),void 0!==e.volume&&t.uint32(21).float(e.volume),void 0!==e.loop&&t.uint32(24).bool(e.loop),void 0!==e.pitch&&t.uint32(37).float(e.pitch),""!==e.audioClipUrl&&t.uint32(42).string(e.audioClipUrl),t),decode(e,t){const n=e instanceof minimalExports.Reader?e:new minimalExports.Reader(e);let i=void 0===t?n.len:n.pos+t;const r=createBasePBAudioSource();for(;n.pos<i;){const e=n.uint32();switch(e>>>3){case 1:r.playing=n.bool();break;case 2:r.volume=n.float();break;case 3:r.loop=n.bool();break;case 4:r.pitch=n.float();break;case 5:r.audioClipUrl=n.string();break;default:n.skipType(7&e)}}return r}},COMPONENT_ID$v=1020,AudioSourceSchema={serialize(e,t){const n=PBAudioSource.encode(e),i=new Uint8Array(n.finish(),0,n.len);t.writeBuffer(i,!1)},deserialize:e=>PBAudioSource.decode(e.buffer(),e.remainingBytes()),create:()=>PBAudioSource.decode(new Uint8Array)};var AvatarAnchorPoint;function createBasePBAvatarAttach(){return{avatarId:"",anchorPointId:0}}!function(e){e[e.POSITION=0]="POSITION",e[e.NAME_TAG=1]="NAME_TAG",e[e.LEFT_HAND=2]="LEFT_HAND",e[e.RIGHT_HAND=3]="RIGHT_HAND",e[e.UNRECOGNIZED=-1]="UNRECOGNIZED"}(AvatarAnchorPoint||(AvatarAnchorPoint={}));const PBAvatarAttach={encode:(e,t=minimalExports.Writer.create())=>(""!==e.avatarId&&t.uint32(10).string(e.avatarId),0!==e.anchorPointId&&t.uint32(16).int32(e.anchorPointId),t),decode(e,t){const n=e instanceof minimalExports.Reader?e:new minimalExports.Reader(e);let i=void 0===t?n.len:n.pos+t;const r=createBasePBAvatarAttach();for(;n.pos<i;){const e=n.uint32();switch(e>>>3){case 1:r.avatarId=n.string();break;case 2:r.anchorPointId=n.int32();break;default:n.skipType(7&e)}}return r}},COMPONENT_ID$u=1073,AvatarAttachSchema={serialize(e,t){const n=PBAvatarAttach.encode(e),i=new Uint8Array(n.finish(),0,n.len);t.writeBuffer(i,!1)},deserialize:e=>PBAvatarAttach.decode(e.buffer(),e.remainingBytes()),create:()=>PBAvatarAttach.decode(new Uint8Array)};function createBaseVector3(){return{x:0,y:0,z:0}}const Vector3={encode:(e,t=minimalExports.Writer.create())=>(0!==e.x&&t.uint32(13).float(e.x),0!==e.y&&t.uint32(21).float(e.y),0!==e.z&&t.uint32(29).float(e.z),t),decode(e,t){const n=e instanceof minimalExports.Reader?e:new minimalExports.Reader(e);let i=void 0===t?n.len:n.pos+t;const r=createBaseVector3();for(;n.pos<i;){const e=n.uint32();switch(e>>>3){case 1:r.x=n.float();break;case 2:r.y=n.float();break;case 3:r.z=n.float();break;default:n.skipType(7&e)}}return r}};var AvatarModifier;function createBasePBAvatarModifierArea(){return{area:void 0,excludeIds:[],modifiers:[]}}!function(e){e[e.HIDE_AVATARS=0]="HIDE_AVATARS",e[e.DISABLE_PASSPORTS=1]="DISABLE_PASSPORTS",e[e.UNRECOGNIZED=-1]="UNRECOGNIZED"}(AvatarModifier||(AvatarModifier={}));const PBAvatarModifierArea={encode(e,t=minimalExports.Writer.create()){void 0!==e.area&&Vector3.encode(e.area,t.uint32(10).fork()).ldelim();for(const n of e.excludeIds)t.uint32(18).string(n);t.uint32(26).fork();for(const n of e.modifiers)t.int32(n);return t.ldelim(),t},decode(e,t){const n=e instanceof minimalExports.Reader?e:new minimalExports.Reader(e);let i=void 0===t?n.len:n.pos+t;const r=createBasePBAvatarModifierArea();for(;n.pos<i;){const e=n.uint32();switch(e>>>3){case 1:r.area=Vector3.decode(n,n.uint32());break;case 2:r.excludeIds.push(n.string());break;case 3:if(2==(7&e)){const e=n.uint32()+n.pos;for(;n.pos<e;)r.modifiers.push(n.int32())}else r.modifiers.push(n.int32());break;default:n.skipType(7&e)}}return r}},COMPONENT_ID$t=1070,AvatarModifierAreaSchema={serialize(e,t){const n=PBAvatarModifierArea.encode(e),i=new Uint8Array(n.finish(),0,n.len);t.writeBuffer(i,!1)},deserialize:e=>PBAvatarModifierArea.decode(e.buffer(),e.remainingBytes()),create:()=>PBAvatarModifierArea.decode(new Uint8Array)};var long,hasRequiredLong;function requireLong(){if(hasRequiredLong)return long;hasRequiredLong=1,long=t;var e=null;try{e=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch(e){}function t(e,t,n){this.low=0|e,this.high=0|t,this.unsigned=!!n}function n(e){return!0===(e&&e.__isLong__)}t.prototype.__isLong__,Object.defineProperty(t.prototype,"__isLong__",{value:!0}),t.isLong=n;var i={},r={};function o(e,t){var n,o,a;return t?(a=0<=(e>>>=0)&&e<256)&&(o=r[e])?o:(n=s(e,(0|e)<0?-1:0,!0),a&&(r[e]=n),n):(a=-128<=(e|=0)&&e<128)&&(o=i[e])?o:(n=s(e,e<0?-1:0,!1),a&&(i[e]=n),n)}function a(e,t){if(isNaN(e))return t?y:m;if(t){if(e<0)return y;if(e>=f)return x}else{if(e<=-h)return R;if(e+1>=h)return E}return e<0?a(-e,t).neg():s(e%d|0,e/d|0,t)}function s(e,n,i){return new t(e,n,i)}t.fromInt=o,t.fromNumber=a,t.fromBits=s;var c=Math.pow;function l(e,t,n){if(0===e.length)throw Error("empty string");if("NaN"===e||"Infinity"===e||"+Infinity"===e||"-Infinity"===e)return m;if("number"==typeof t?(n=t,t=!1):t=!!t,(n=n||10)<2||36<n)throw RangeError("radix");var i;if((i=e.indexOf("-"))>0)throw Error("interior hyphen");if(0===i)return l(e.substring(1),t,n).neg();for(var r=a(c(n,8)),o=m,s=0;s<e.length;s+=8){var u=Math.min(8,e.length-s),d=parseInt(e.substring(s,s+u),n);if(u<8){var f=a(c(n,u));o=o.mul(f).add(a(d))}else o=(o=o.mul(r)).add(a(d))}return o.unsigned=t,o}function u(e,t){return"number"==typeof e?a(e,t):"string"==typeof e?l(e,t):s(e.low,e.high,"boolean"==typeof t?t:e.unsigned)}t.fromString=l,t.fromValue=u;var d=4294967296,f=d*d,h=f/2,p=o(1<<24),m=o(0);t.ZERO=m;var y=o(0,!0);t.UZERO=y;var g=o(1);t.ONE=g;var b=o(1,!0);t.UONE=b;var v=o(-1);t.NEG_ONE=v;var E=s(-1,2147483647,!1);t.MAX_VALUE=E;var x=s(-1,-1,!0);t.MAX_UNSIGNED_VALUE=x;var R=s(0,-2147483648,!1);t.MIN_VALUE=R;var B=t.prototype;return B.toInt=function(){return this.unsigned?this.low>>>0:this.low},B.toNumber=function(){return this.unsigned?(this.high>>>0)*d+(this.low>>>0):this.high*d+(this.low>>>0)},B.toString=function(e){if((e=e||10)<2||36<e)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative()){if(this.eq(R)){var t=a(e),n=this.div(t),i=n.mul(t).sub(this);return n.toString(e)+i.toInt().toString(e)}return"-"+this.neg().toString(e)}for(var r=a(c(e,6),this.unsigned),o=this,s="";;){var l=o.div(r),u=(o.sub(l.mul(r)).toInt()>>>0).toString(e);if((o=l).isZero())return u+s;for(;u.length<6;)u="0"+u;s=""+u+s}},B.getHighBits=function(){return this.high},B.getHighBitsUnsigned=function(){return this.high>>>0},B.getLowBits=function(){return this.low},B.getLowBitsUnsigned=function(){return this.low>>>0},B.getNumBitsAbs=function(){if(this.isNegative())return this.eq(R)?64:this.neg().getNumBitsAbs();for(var e=0!=this.high?this.high:this.low,t=31;t>0&&0==(e&1<<t);t--);return 0!=this.high?t+33:t+1},B.isZero=function(){return 0===this.high&&0===this.low},B.eqz=B.isZero,B.isNegative=function(){return!this.unsigned&&this.high<0},B.isPositive=function(){return this.unsigned||this.high>=0},B.isOdd=function(){return 1==(1&this.low)},B.isEven=function(){return 0==(1&this.low)},B.equals=function(e){return n(e)||(e=u(e)),(this.unsigned===e.unsigned||this.high>>>31!=1||e.high>>>31!=1)&&(this.high===e.high&&this.low===e.low)},B.eq=B.equals,B.notEquals=function(e){return!this.eq(e)},B.neq=B.notEquals,B.ne=B.notEquals,B.lessThan=function(e){return this.comp(e)<0},B.lt=B.lessThan,B.lessThanOrEqual=function(e){return this.comp(e)<=0},B.lte=B.lessThanOrEqual,B.le=B.lessThanOrEqual,B.greaterThan=function(e){return this.comp(e)>0},B.gt=B.greaterThan,B.greaterThanOrEqual=function(e){return this.comp(e)>=0},B.gte=B.greaterThanOrEqual,B.ge=B.greaterThanOrEqual,B.compare=function(e){if(n(e)||(e=u(e)),this.eq(e))return 0;var t=this.isNegative(),i=e.isNegative();return t&&!i?-1:!t&&i?1:this.unsigned?e.high>>>0>this.high>>>0||e.high===this.high&&e.low>>>0>this.low>>>0?-1:1:this.sub(e).isNegative()?-1:1},B.comp=B.compare,B.negate=function(){return!this.unsigned&&this.eq(R)?R:this.not().add(g)},B.neg=B.negate,B.add=function(e){n(e)||(e=u(e));var t=this.high>>>16,i=65535&this.high,r=this.low>>>16,o=65535&this.low,a=e.high>>>16,c=65535&e.high,l=e.low>>>16,d=0,f=0,h=0,p=0;return h+=(p+=o+(65535&e.low))>>>16,f+=(h+=r+l)>>>16,d+=(f+=i+c)>>>16,d+=t+a,s((h&=65535)<<16|(p&=65535),(d&=65535)<<16|(f&=65535),this.unsigned)},B.subtract=function(e){return n(e)||(e=u(e)),this.add(e.neg())},B.sub=B.subtract,B.multiply=function(t){if(this.isZero())return m;if(n(t)||(t=u(t)),e)return s(e.mul(this.low,this.high,t.low,t.high),e.get_high(),this.unsigned);if(t.isZero())return m;if(this.eq(R))return t.isOdd()?R:m;if(t.eq(R))return this.isOdd()?R:m;if(this.isNegative())return t.isNegative()?this.neg().mul(t.neg()):this.neg().mul(t).neg();if(t.isNegative())return this.mul(t.neg()).neg();if(this.lt(p)&&t.lt(p))return a(this.toNumber()*t.toNumber(),this.unsigned);var i=this.high>>>16,r=65535&this.high,o=this.low>>>16,c=65535&this.low,l=t.high>>>16,d=65535&t.high,f=t.low>>>16,h=65535&t.low,y=0,g=0,b=0,v=0;return b+=(v+=c*h)>>>16,g+=(b+=o*h)>>>16,b&=65535,g+=(b+=c*f)>>>16,y+=(g+=r*h)>>>16,g&=65535,y+=(g+=o*f)>>>16,g&=65535,y+=(g+=c*d)>>>16,y+=i*h+r*f+o*d+c*l,s((b&=65535)<<16|(v&=65535),(y&=65535)<<16|(g&=65535),this.unsigned)},B.mul=B.multiply,B.divide=function(t){if(n(t)||(t=u(t)),t.isZero())throw Error("division by zero");var i,r,o;if(e)return this.unsigned||-2147483648!==this.high||-1!==t.low||-1!==t.high?s((this.unsigned?e.div_u:e.div_s)(this.low,this.high,t.low,t.high),e.get_high(),this.unsigned):this;if(this.isZero())return this.unsigned?y:m;if(this.unsigned){if(t.unsigned||(t=t.toUnsigned()),t.gt(this))return y;if(t.gt(this.shru(1)))return b;o=y}else{if(this.eq(R))return t.eq(g)||t.eq(v)?R:t.eq(R)?g:(i=this.shr(1).div(t).shl(1)).eq(m)?t.isNegative()?g:v:(r=this.sub(t.mul(i)),o=i.add(r.div(t)));if(t.eq(R))return this.unsigned?y:m;if(this.isNegative())return t.isNegative()?this.neg().div(t.neg()):this.neg().div(t).neg();if(t.isNegative())return this.div(t.neg()).neg();o=m}for(r=this;r.gte(t);){i=Math.max(1,Math.floor(r.toNumber()/t.toNumber()));for(var l=Math.ceil(Math.log(i)/Math.LN2),d=l<=48?1:c(2,l-48),f=a(i),h=f.mul(t);h.isNegative()||h.gt(r);)h=(f=a(i-=d,this.unsigned)).mul(t);f.isZero()&&(f=g),o=o.add(f),r=r.sub(h)}return o},B.div=B.divide,B.modulo=function(t){return n(t)||(t=u(t)),e?s((this.unsigned?e.rem_u:e.rem_s)(this.low,this.high,t.low,t.high),e.get_high(),this.unsigned):this.sub(this.div(t).mul(t))},B.mod=B.modulo,B.rem=B.modulo,B.not=function(){return s(~this.low,~this.high,this.unsigned)},B.and=function(e){return n(e)||(e=u(e)),s(this.low&e.low,this.high&e.high,this.unsigned)},B.or=function(e){return n(e)||(e=u(e)),s(this.low|e.low,this.high|e.high,this.unsigned)},B.xor=function(e){return n(e)||(e=u(e)),s(this.low^e.low,this.high^e.high,this.unsigned)},B.shiftLeft=function(e){return n(e)&&(e=e.toInt()),0==(e&=63)?this:e<32?s(this.low<<e,this.high<<e|this.low>>>32-e,this.unsigned):s(0,this.low<<e-32,this.unsigned)},B.shl=B.shiftLeft,B.shiftRight=function(e){return n(e)&&(e=e.toInt()),0==(e&=63)?this:e<32?s(this.low>>>e|this.high<<32-e,this.high>>e,this.unsigned):s(this.high>>e-32,this.high>=0?0:-1,this.unsigned)},B.shr=B.shiftRight,B.shiftRightUnsigned=function(e){if(n(e)&&(e=e.toInt()),0===(e&=63))return this;var t=this.high;return e<32?s(this.low>>>e|t<<32-e,t>>>e,this.unsigned):s(32===e?t:t>>>e-32,0,this.unsigned)},B.shru=B.shiftRightUnsigned,B.shr_u=B.shiftRightUnsigned,B.toSigned=function(){return this.unsigned?s(this.low,this.high,!1):this},B.toUnsigned=function(){return this.unsigned?this:s(this.low,this.high,!0)},B.toBytes=function(e){return e?this.toBytesLE():this.toBytesBE()},B.toBytesLE=function(){var e=this.high,t=this.low;return[255&t,t>>>8&255,t>>>16&255,t>>>24,255&e,e>>>8&255,e>>>16&255,e>>>24]},B.toBytesBE=function(){var e=this.high,t=this.low;return[e>>>24,e>>>16&255,e>>>8&255,255&e,t>>>24,t>>>16&255,t>>>8&255,255&t]},t.fromBytes=function(e,n,i){return i?t.fromBytesLE(e,n):t.fromBytesBE(e,n)},t.fromBytesLE=function(e,n){return new t(e[0]|e[1]<<8|e[2]<<16|e[3]<<24,e[4]|e[5]<<8|e[6]<<16|e[7]<<24,n)},t.fromBytesBE=function(e,n){return new t(e[4]<<24|e[5]<<16|e[6]<<8|e[7],e[0]<<24|e[1]<<16|e[2]<<8|e[3],n)},long}var longExports=requireLong();function createBaseColor3(){return{r:0,g:0,b:0}}const Color3={encode:(e,t=minimalExports.Writer.create())=>(0!==e.r&&t.uint32(13).float(e.r),0!==e.g&&t.uint32(21).float(e.g),0!==e.b&&t.uint32(29).float(e.b),t),decode(e,t){const n=e instanceof minimalExports.Reader?e:new minimalExports.Reader(e);let i=void 0===t?n.len:n.pos+t;const r=createBaseColor3();for(;n.pos<i;){const e=n.uint32();switch(e>>>3){case 1:r.r=n.float();break;case 2:r.g=n.float();break;case 3:r.b=n.float();break;default:n.skipType(7&e)}}return r}};function createBasePBAvatarShape(){return{id:"",name:void 0,bodyShape:void 0,skinColor:void 0,hairColor:void 0,eyeColor:void 0,expressionTriggerId:void 0,expressionTriggerTimestamp:void 0,talking:void 0,wearables:[],emotes:[]}}const PBAvatarShape={encode(e,t=minimalExports.Writer.create()){""!==e.id&&t.uint32(10).string(e.id),void 0!==e.name&&t.uint32(18).string(e.name),void 0!==e.bodyShape&&t.uint32(26).string(e.bodyShape),void 0!==e.skinColor&&Color3.encode(e.skinColor,t.uint32(34).fork()).ldelim(),void 0!==e.hairColor&&Color3.encode(e.hairColor,t.uint32(42).fork()).ldelim(),void 0!==e.eyeColor&&Color3.encode(e.eyeColor,t.uint32(50).fork()).ldelim(),void 0!==e.expressionTriggerId&&t.uint32(58).string(e.expressionTriggerId),void 0!==e.expressionTriggerTimestamp&&t.uint32(64).int64(e.expressionTriggerTimestamp),void 0!==e.talking&&t.uint32(72).bool(e.talking);for(const n of e.wearables)t.uint32(82).string(n);for(const n of e.emotes)t.uint32(90).string(n);return t},decode(e,t){const n=e instanceof minimalExports.Reader?e:new minimalExports.Reader(e);let i=void 0===t?n.len:n.pos+t;const r=createBasePBAvatarShape();for(;n.pos<i;){const e=n.uint32();switch(e>>>3){case 1:r.id=n.string();break;case 2:r.name=n.string();break;case 3:r.bodyShape=n.string();break;case 4:r.skinColor=Color3.decode(n,n.uint32());break;case 5:r.hairColor=Color3.decode(n,n.uint32());break;case 6:r.eyeColor=Color3.decode(n,n.uint32());break;case 7:r.expressionTriggerId=n.string();break;case 8:r.expressionTriggerTimestamp=longToNumber$1(n.int64());break;case 9:r.talking=n.bool();break;case 10:r.wearables.push(n.string());break;case 11:r.emotes.push(n.string());break;default:n.skipType(7&e)}}return r}};var globalThis$2=(()=>{if(void 0!==globalThis$2)return globalThis$2;if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if("undefined"!=typeof global)return global;throw"Unable to locate global object"})();function longToNumber$1(e){if(e.gt(Number.MAX_SAFE_INTEGER))throw new globalThis$2.Error("Value is larger than Number.MAX_SAFE_INTEGER");return e.toNumber()}minimalExports.util.Long!==longExports&&(minimalExports.util.Long=longExports,minimalExports.configure());const COMPONENT_ID$s=1080,AvatarShapeSchema={serialize(e,t){const n=PBAvatarShape.encode(e),i=new Uint8Array(n.finish(),0,n.len);t.writeBuffer(i,!1)},deserialize:e=>PBAvatarShape.decode(e.buffer(),e.remainingBytes()),create:()=>PBAvatarShape.decode(new Uint8Array)};function createBasePBBillboard(){return{x:void 0,y:void 0,z:void 0}}const PBBillboard={encode:(e,t=minimalExports.Writer.create())=>(void 0!==e.x&&t.uint32(8).bool(e.x),void 0!==e.y&&t.uint32(16).bool(e.y),void 0!==e.z&&t.uint32(24).bool(e.z),t),decode(e,t){const n=e instanceof minimalExports.Reader?e:new minimalExports.Reader(e);let i=void 0===t?n.len:n.pos+t;const r=createBasePBBillboard();for(;n.pos<i;){const e=n.uint32();switch(e>>>3){case 1:r.x=n.bool();break;case 2:r.y=n.bool();break;case 3:r.z=n.bool();break;default:n.skipType(7&e)}}return r}},COMPONENT_ID$r=1090,BillboardSchema={serialize(e,t){const n=PBBillboard.encode(e),i=new Uint8Array(n.finish(),0,n.len);t.writeBuffer(i,!1)},deserialize:e=>PBBillboard.decode(e.buffer(),e.remainingBytes()),create:()=>PBBillboard.decode(new Uint8Array)};function createBasePBBoxShape(){return{withCollisions:void 0,isPointerBlocker:void 0,visible:void 0,uvs:[]}}const PBBoxShape={encode(e,t=minimalExports.Writer.create()){void 0!==e.withCollisions&&t.uint32(8).bool(e.withCollisions),void 0!==e.isPointerBlocker&&t.uint32(16).bool(e.isPointerBlocker),void 0!==e.visible&&t.uint32(24).bool(e.visible),t.uint32(34).fork();for(const n of e.uvs)t.float(n);return t.ldelim(),t},decode(e,t){const n=e instanceof minimalExports.Reader?e:new minimalExports.Reader(e);let i=void 0===t?n.len:n.pos+t;const r=createBasePBBoxShape();for(;n.pos<i;){const e=n.uint32();switch(e>>>3){case 1:r.withCollisions=n.bool();break;case 2:r.isPointerBlocker=n.bool();break;case 3:r.visible=n.bool();break;case 4:if(2==(7&e)){const e=n.uint32()+n.pos;for(;n.pos<e;)r.uvs.push(n.float())}else r.uvs.push(n.float());break;default:n.skipType(7&e)}}return r}},COMPONENT_ID$q=1013,BoxShapeSchema={serialize(e,t){const n=PBBoxShape.encode(e),i=new Uint8Array(n.finish(),0,n.len);t.writeBuffer(i,!1)},deserialize:e=>PBBoxShape.decode(e.buffer(),e.remainingBytes()),create:()=>PBBoxShape.decode(new Uint8Array)};function createBasePBCameraMode(){return{mode:0}}const PBCameraMode={encode:(e,t=minimalExports.Writer.create())=>(0!==e.mode&&t.uint32(8).int32(e.mode),t),decode(e,t){const n=e instanceof minimalExports.Reader?e:new minimalExports.Reader(e);let i=void 0===t?n.len:n.pos+t;const r=createBasePBCameraMode();for(;n.pos<i;){const e=n.uint32();if(e>>>3==1)r.mode=n.int32();else n.skipType(7&e)}return r}},COMPONENT_ID$p=1072,CameraModeSchema={serialize(e,t){const n=PBCameraMode.encode(e),i=new Uint8Array(n.finish(),0,n.len);t.writeBuffer(i,!1)},deserialize:e=>PBCameraMode.decode(e.buffer(),e.remainingBytes()),create:()=>PBCameraMode.decode(new Uint8Array)};function createBasePBCameraModeArea(){return{area:void 0,mode:0}}const PBCameraModeArea={encode:(e,t=minimalExports.Writer.create())=>(void 0!==e.area&&Vector3.encode(e.area,t.uint32(10).fork()).ldelim(),0!==e.mode&&t.uint32(16).int32(e.mode),t),decode(e,t){const n=e instanceof minimalExports.Reader?e:new minimalExports.Reader(e);let i=void 0===t?n.len:n.pos+t;const r=createBasePBCameraModeArea();for(;n.pos<i;){const e=n.uint32();switch(e>>>3){case 1:r.area=Vector3.decode(n,n.uint32());break;case 2:r.mode=n.int32();break;default:n.skipType(7&e)}}return r}},COMPONENT_ID$o=1071,CameraModeAreaSchema={serialize(e,t){const n=PBCameraModeArea.encode(e),i=new Uint8Array(n.finish(),0,n.len);t.writeBuffer(i,!1)},deserialize:e=>PBCameraModeArea.decode(e.buffer(),e.remainingBytes()),create:()=>PBCameraModeArea.decode(new Uint8Array)};function createBasePBCylinderShape(){return{withCollisions:void 0,isPointerBlocker:void 0,visible:void 0,radiusTop:void 0,radiusBottom:void 0}}const PBCylinderShape={encode:(e,t=minimalExports.Writer.create())=>(void 0!==e.withCollisions&&t.uint32(8).bool(e.withCollisions),void 0!==e.isPointerBlocker&&t.uint32(16).bool(e.isPointerBlocker),void 0!==e.visible&&t.uint32(24).bool(e.visible),void 0!==e.radiusTop&&t.uint32(37).float(e.radiusTop),void 0!==e.radiusBottom&&t.uint32(45).float(e.radiusBottom),t),decode(e,t){const n=e instanceof minimalExports.Reader?e:new minimalExports.Reader(e);let i=void 0===t?n.len:n.pos+t;const r=createBasePBCylinderShape();for(;n.pos<i;){const e=n.uint32();switch(e>>>3){case 1:r.withCollisions=n.bool();break;case 2:r.isPointerBlocker=n.bool();break;case 3:r.visible=n.bool();break;case 4:r.radiusTop=n.float();break;case 5:r.radiusBottom=n.float();break;default:n.skipType(7&e)}}return r}},COMPONENT_ID$n=1016,CylinderShapeSchema={serialize(e,t){const n=PBCylinderShape.encode(e),i=new Uint8Array(n.finish(),0,n.len);t.writeBuffer(i,!1)},deserialize:e=>PBCylinderShape.decode(e.buffer(),e.remainingBytes()),create:()=>PBCylinderShape.decode(new Uint8Array)};function createBasePBGltfContainer(){return{src:""}}const PBGltfContainer={encode:(e,t=minimalExports.Writer.create())=>(""!==e.src&&t.uint32(10).string(e.src),t),decode(e,t){const n=e instanceof minimalExports.Reader?e:new minimalExports.Reader(e);let i=void 0===t?n.len:n.pos+t;const r=createBasePBGltfContainer();for(;n.pos<i;){const e=n.uint32();if(e>>>3==1)r.src=n.string();else n.skipType(7&e)}return r}},COMPONENT_ID$m=1041,GltfContainerSchema={serialize(e,t){const n=PBGltfContainer.encode(e),i=new Uint8Array(n.finish(),0,n.len);t.writeBuffer(i,!1)},deserialize:e=>PBGltfContainer.decode(e.buffer(),e.remainingBytes()),create:()=>PBGltfContainer.decode(new Uint8Array)};var TextureWrapMode,FilterMode,TransparencyMode;function createBasePBMaterial(){return{texture:void 0,alphaTest:void 0,castShadows:void 0,alphaTexture:void 0,emissiveTexture:void 0,bumpTexture:void 0,albedoColor:void 0,emissiveColor:void 0,reflectivityColor:void 0,transparencyMode:void 0,metallic:void 0,roughness:void 0,glossiness:void 0,specularIntensity:void 0,emissiveIntensity:void 0,directIntensity:void 0}}!function(e){e[e.Repeat=0]="Repeat",e[e.Clamp=1]="Clamp",e[e.Mirror=2]="Mirror",e[e.MirrorOnce=3]="MirrorOnce",e[e.UNRECOGNIZED=-1]="UNRECOGNIZED"}(TextureWrapMode||(TextureWrapMode={})),function(e){e[e.Point=0]="Point",e[e.Bilinear=1]="Bilinear",e[e.Trilinear=2]="Trilinear",e[e.UNRECOGNIZED=-1]="UNRECOGNIZED"}(FilterMode||(FilterMode={})),function(e){e[e.Opaque=0]="Opaque",e[e.AlphaTest=1]="AlphaTest",e[e.AlphaBlend=2]="AlphaBlend",e[e.AlphaTestAndAlphaBlend=3]="AlphaTestAndAlphaBlend",e[e.Auto=4]="Auto",e[e.UNRECOGNIZED=-1]="UNRECOGNIZED"}(TransparencyMode||(TransparencyMode={}));const PBMaterial={encode:(e,t=minimalExports.Writer.create())=>(void 0!==e.texture&&PBMaterial_Texture.encode(e.texture,t.uint32(10).fork()).ldelim(),void 0!==e.alphaTest&&t.uint32(21).float(e.alphaTest),void 0!==e.castShadows&&t.uint32(24).bool(e.castShadows),void 0!==e.alphaTexture&&PBMaterial_Texture.encode(e.alphaTexture,t.uint32(34).fork()).ldelim(),void 0!==e.emissiveTexture&&PBMaterial_Texture.encode(e.emissiveTexture,t.uint32(42).fork()).ldelim(),void 0!==e.bumpTexture&&PBMaterial_Texture.encode(e.bumpTexture,t.uint32(50).fork()).ldelim(),void 0!==e.albedoColor&&Color3.encode(e.albedoColor,t.uint32(58).fork()).ldelim(),void 0!==e.emissiveColor&&Color3.encode(e.emissiveColor,t.uint32(66).fork()).ldelim(),void 0!==e.reflectivityColor&&Color3.encode(e.reflectivityColor,t.uint32(74).fork()).ldelim(),void 0!==e.transparencyMode&&t.uint32(80).int32(e.transparencyMode),void 0!==e.metallic&&t.uint32(93).float(e.metallic),void 0!==e.roughness&&t.uint32(101).float(e.roughness),void 0!==e.glossiness&&t.uint32(109).float(e.glossiness),void 0!==e.specularIntensity&&t.uint32(117).float(e.specularIntensity),void 0!==e.emissiveIntensity&&t.uint32(125).float(e.emissiveIntensity),void 0!==e.directIntensity&&t.uint32(133).float(e.directIntensity),t),decode(e,t){const n=e instanceof minimalExports.Reader?e:new minimalExports.Reader(e);let i=void 0===t?n.len:n.pos+t;const r=createBasePBMaterial();for(;n.pos<i;){const e=n.uint32();switch(e>>>3){case 1:r.texture=PBMaterial_Texture.decode(n,n.uint32());break;case 2:r.alphaTest=n.float();break;case 3:r.castShadows=n.bool();break;case 4:r.alphaTexture=PBMaterial_Texture.decode(n,n.uint32());break;case 5:r.emissiveTexture=PBMaterial_Texture.decode(n,n.uint32());break;case 6:r.bumpTexture=PBMaterial_Texture.decode(n,n.uint32());break;case 7:r.albedoColor=Color3.decode(n,n.uint32());break;case 8:r.emissiveColor=Color3.decode(n,n.uint32());break;case 9:r.reflectivityColor=Color3.decode(n,n.uint32());break;case 10:r.transparencyMode=n.int32();break;case 11:r.metallic=n.float();break;case 12:r.roughness=n.float();break;case 13:r.glossiness=n.float();break;case 14:r.specularIntensity=n.float();break;case 15:r.emissiveIntensity=n.float();break;case 16:r.directIntensity=n.float();break;default:n.skipType(7&e)}}return r}};function createBasePBMaterial_Texture(){return{src:"",wrapMode:void 0,filterMode:void 0}}const PBMaterial_Texture={encode:(e,t=minimalExports.Writer.create())=>(""!==e.src&&t.uint32(10).string(e.src),void 0!==e.wrapMode&&t.uint32(16).int32(e.wrapMode),void 0!==e.filterMode&&t.uint32(24).int32(e.filterMode),t),decode(e,t){const n=e instanceof minimalExports.Reader?e:new minimalExports.Reader(e);let i=void 0===t?n.len:n.pos+t;const r=createBasePBMaterial_Texture();for(;n.pos<i;){const e=n.uint32();switch(e>>>3){case 1:r.src=n.string();break;case 2:r.wrapMode=n.int32();break;case 3:r.filterMode=n.int32();break;default:n.skipType(7&e)}}return r}},COMPONENT_ID$l=1017,MaterialSchema={serialize(e,t){const n=PBMaterial.encode(e),i=new Uint8Array(n.finish(),0,n.len);t.writeBuffer(i,!1)},deserialize:e=>PBMaterial.decode(e.buffer(),e.remainingBytes()),create:()=>PBMaterial.decode(new Uint8Array)};var ColliderLayer;function createBasePBMeshCollider(){return{collisionMask:void 0,box:void 0,sphere:void 0,cylinder:void 0,plane:void 0}}!function(e){e[e.None=0]="None",e[e.Pointer=1]="Pointer",e[e.Physics=2]="Physics",e[e.UNRECOGNIZED=-1]="UNRECOGNIZED"}(ColliderLayer||(ColliderLayer={}));const PBMeshCollider={encode:(e,t=minimalExports.Writer.create())=>(void 0!==e.collisionMask&&t.uint32(8).int32(e.collisionMask),void 0!==e.box&&PBMeshCollider_BoxMesh.encode(e.box,t.uint32(18).fork()).ldelim(),void 0!==e.sphere&&PBMeshCollider_SphereMesh.encode(e.sphere,t.uint32(26).fork()).ldelim(),void 0!==e.cylinder&&PBMeshCollider_CylinderMesh.encode(e.cylinder,t.uint32(34).fork()).ldelim(),void 0!==e.plane&&PBMeshCollider_PlaneMesh.encode(e.plane,t.uint32(42).fork()).ldelim(),t),decode(e,t){const n=e instanceof minimalExports.Reader?e:new minimalExports.Reader(e);let i=void 0===t?n.len:n.pos+t;const r=createBasePBMeshCollider();for(;n.pos<i;){const e=n.uint32();switch(e>>>3){case 1:r.collisionMask=n.int32();break;case 2:r.box=PBMeshCollider_BoxMesh.decode(n,n.uint32());break;case 3:r.sphere=PBMeshCollider_SphereMesh.decode(n,n.uint32());break;case 4:r.cylinder=PBMeshCollider_CylinderMesh.decode(n,n.uint32());break;case 5:r.plane=PBMeshCollider_PlaneMesh.decode(n,n.uint32());break;default:n.skipType(7&e)}}return r}};function createBasePBMeshCollider_BoxMesh(){return{}}const PBMeshCollider_BoxMesh={encode:(e,t=minimalExports.Writer.create())=>t,decode(e,t){const n=e instanceof minimalExports.Reader?e:new minimalExports.Reader(e);let i=void 0===t?n.len:n.pos+t;const r=createBasePBMeshCollider_BoxMesh();for(;n.pos<i;){const e=n.uint32();n.skipType(7&e)}return r}};function createBasePBMeshCollider_CylinderMesh(){return{radiusTop:void 0,radiusBottom:void 0}}const PBMeshCollider_CylinderMesh={encode:(e,t=minimalExports.Writer.create())=>(void 0!==e.radiusTop&&t.uint32(13).float(e.radiusTop),void 0!==e.radiusBottom&&t.uint32(21).float(e.radiusBottom),t),decode(e,t){const n=e instanceof minimalExports.Reader?e:new minimalExports.Reader(e);let i=void 0===t?n.len:n.pos+t;const r=createBasePBMeshCollider_CylinderMesh();for(;n.pos<i;){const e=n.uint32();switch(e>>>3){case 1:r.radiusTop=n.float();break;case 2:r.radiusBottom=n.float();break;default:n.skipType(7&e)}}return r}};function createBasePBMeshCollider_PlaneMesh(){return{}}const PBMeshCollider_PlaneMesh={encode:(e,t=minimalExports.Writer.create())=>t,decode(e,t){const n=e instanceof minimalExports.Reader?e:new minimalExports.Reader(e);let i=void 0===t?n.len:n.pos+t;const r=createBasePBMeshCollider_PlaneMesh();for(;n.pos<i;){const e=n.uint32();n.skipType(7&e)}return r}};function createBasePBMeshCollider_SphereMesh(){return{}}const PBMeshCollider_SphereMesh={encode:(e,t=minimalExports.Writer.create())=>t,decode(e,t){const n=e instanceof minimalExports.Reader?e:new minimalExports.Reader(e);let i=void 0===t?n.len:n.pos+t;const r=createBasePBMeshCollider_SphereMesh();for(;n.pos<i;){const e=n.uint32();n.skipType(7&e)}return r}},COMPONENT_ID$k=1019,MeshColliderSchema={serialize(e,t){const n=PBMeshCollider.encode(e),i=new Uint8Array(n.finish(),0,n.len);t.writeBuffer(i,!1)},deserialize:e=>PBMeshCollider.decode(e.buffer(),e.remainingBytes()),create:()=>PBMeshCollider.decode(new Uint8Array)};function createBasePBMeshRenderer(){return{box:void 0,sphere:void 0,cylinder:void 0,plane:void 0}}const PBMeshRenderer={encode:(e,t=minimalExports.Writer.create())=>(void 0!==e.box&&PBMeshRenderer_BoxMesh.encode(e.box,t.uint32(10).fork()).ldelim(),void 0!==e.sphere&&PBMeshRenderer_SphereMesh.encode(e.sphere,t.uint32(18).fork()).ldelim(),void 0!==e.cylinder&&PBMeshRenderer_CylinderMesh.encode(e.cylinder,t.uint32(26).fork()).ldelim(),void 0!==e.plane&&PBMeshRenderer_PlaneMesh.encode(e.plane,t.uint32(34).fork()).ldelim(),t),decode(e,t){const n=e instanceof minimalExports.Reader?e:new minimalExports.Reader(e);let i=void 0===t?n.len:n.pos+t;const r=createBasePBMeshRenderer();for(;n.pos<i;){const e=n.uint32();switch(e>>>3){case 1:r.box=PBMeshRenderer_BoxMesh.decode(n,n.uint32());break;case 2:r.sphere=PBMeshRenderer_SphereMesh.decode(n,n.uint32());break;case 3:r.cylinder=PBMeshRenderer_CylinderMesh.decode(n,n.uint32());break;case 4:r.plane=PBMeshRenderer_PlaneMesh.decode(n,n.uint32());break;default:n.skipType(7&e)}}return r}};function createBasePBMeshRenderer_BoxMesh(){return{uvs:[]}}const PBMeshRenderer_BoxMesh={encode(e,t=minimalExports.Writer.create()){t.uint32(10).fork();for(const n of e.uvs)t.float(n);return t.ldelim(),t},decode(e,t){const n=e instanceof minimalExports.Reader?e:new minimalExports.Reader(e);let i=void 0===t?n.len:n.pos+t;const r=createBasePBMeshRenderer_BoxMesh();for(;n.pos<i;){const e=n.uint32();if(e>>>3==1)if(2==(7&e)){const e=n.uint32()+n.pos;for(;n.pos<e;)r.uvs.push(n.float())}else r.uvs.push(n.float());else n.skipType(7&e)}return r}};function createBasePBMeshRenderer_CylinderMesh(){return{radiusTop:void 0,radiusBottom:void 0}}const PBMeshRenderer_CylinderMesh={encode:(e,t=minimalExports.Writer.create())=>(void 0!==e.radiusTop&&t.uint32(13).float(e.radiusTop),void 0!==e.radiusBottom&&t.uint32(21).float(e.radiusBottom),t),decode(e,t){const n=e instanceof minimalExports.Reader?e:new minimalExports.Reader(e);let i=void 0===t?n.len:n.pos+t;const r=createBasePBMeshRenderer_CylinderMesh();for(;n.pos<i;){const e=n.uint32();switch(e>>>3){case 1:r.radiusTop=n.float();break;case 2:r.radiusBottom=n.float();break;default:n.skipType(7&e)}}return r}};function createBasePBMeshRenderer_PlaneMesh(){return{uvs:[]}}const PBMeshRenderer_PlaneMesh={encode(e,t=minimalExports.Writer.create()){t.uint32(10).fork();for(const n of e.uvs)t.float(n);return t.ldelim(),t},decode(e,t){const n=e instanceof minimalExports.Reader?e:new minimalExports.Reader(e);let i=void 0===t?n.len:n.pos+t;const r=createBasePBMeshRenderer_PlaneMesh();for(;n.pos<i;){const e=n.uint32();if(e>>>3==1)if(2==(7&e)){const e=n.uint32()+n.pos;for(;n.pos<e;)r.uvs.push(n.float())}else r.uvs.push(n.float());else n.skipType(7&e)}return r}};function createBasePBMeshRenderer_SphereMesh(){return{}}const PBMeshRenderer_SphereMesh={encode:(e,t=minimalExports.Writer.create())=>t,decode(e,t){const n=e instanceof minimalExports.Reader?e:new minimalExports.Reader(e);let i=void 0===t?n.len:n.pos+t;const r=createBasePBMeshRenderer_SphereMesh();for(;n.pos<i;){const e=n.uint32();n.skipType(7&e)}return r}},COMPONENT_ID$j=1018,MeshRendererSchema={serialize(e,t){const n=PBMeshRenderer.encode(e),i=new Uint8Array(n.finish(),0,n.len);t.writeBuffer(i,!1)},deserialize:e=>PBMeshRenderer.decode(e.buffer(),e.remainingBytes()),create:()=>PBMeshRenderer.decode(new Uint8Array)};var PBNFTShape_PictureFrameStyle;function createBasePBNFTShape(){return{src:"",style:void 0,color:void 0}}!function(e){e[e.Classic=0]="Classic",e[e.Baroque_Ornament=1]="Baroque_Ornament",e[e.Diamond_Ornament=2]="Diamond_Ornament",e[e.Minimal_Wide=3]="Minimal_Wide",e[e.Minimal_Grey=4]="Minimal_Grey",e[e.Blocky=5]="Blocky",e[e.Gold_Edges=6]="Gold_Edges",e[e.Gold_Carved=7]="Gold_Carved",e[e.Gold_Wide=8]="Gold_Wide",e[e.Gold_Rounded=9]="Gold_Rounded",e[e.Metal_Medium=10]="Metal_Medium",e[e.Metal_Wide=11]="Metal_Wide",e[e.Metal_Slim=12]="Metal_Slim",e[e.Metal_Rounded=13]="Metal_Rounded",e[e.Pins=14]="Pins",e[e.Minimal_Black=15]="Minimal_Black",e[e.Minimal_White=16]="Minimal_White",e[e.Tape=17]="Tape",e[e.Wood_Slim=18]="Wood_Slim",e[e.Wood_Wide=19]="Wood_Wide",e[e.Wood_Twigs=20]="Wood_Twigs",e[e.Canvas=21]="Canvas",e[e.None=22]="None",e[e.UNRECOGNIZED=-1]="UNRECOGNIZED"}(PBNFTShape_PictureFrameStyle||(PBNFTShape_PictureFrameStyle={}));const PBNFTShape={encode:(e,t=minimalExports.Writer.create())=>(""!==e.src&&t.uint32(10).string(e.src),void 0!==e.style&&t.uint32(16).int32(e.style),void 0!==e.color&&Color3.encode(e.color,t.uint32(26).fork()).ldelim(),t),decode(e,t){const n=e instanceof minimalExports.Reader?e:new minimalExports.Reader(e);let i=void 0===t?n.len:n.pos+t;const r=createBasePBNFTShape();for(;n.pos<i;){const e=n.uint32();switch(e>>>3){case 1:r.src=n.string();break;case 2:r.style=n.int32();break;case 3:r.color=Color3.decode(n,n.uint32());break;default:n.skipType(7&e)}}return r}},COMPONENT_ID$i=1040,NFTShapeSchema={serialize(e,t){const n=PBNFTShape.encode(e),i=new Uint8Array(n.finish(),0,n.len);t.writeBuffer(i,!1)},deserialize:e=>PBNFTShape.decode(e.buffer(),e.remainingBytes()),create:()=>PBNFTShape.decode(new Uint8Array)};function createBasePBOnPointerDown(){return{button:void 0,hoverText:void 0,maxDistance:void 0,showFeedback:void 0}}const PBOnPointerDown={encode:(e,t=minimalExports.Writer.create())=>(void 0!==e.button&&t.uint32(8).int32(e.button),void 0!==e.hoverText&&t.uint32(18).string(e.hoverText),void 0!==e.maxDistance&&t.uint32(29).float(e.maxDistance),void 0!==e.showFeedback&&t.uint32(32).bool(e.showFeedback),t),decode(e,t){const n=e instanceof minimalExports.Reader?e:new minimalExports.Reader(e);let i=void 0===t?n.len:n.pos+t;const r=createBasePBOnPointerDown();for(;n.pos<i;){const e=n.uint32();switch(e>>>3){case 1:r.button=n.int32();break;case 2:r.hoverText=n.string();break;case 3:r.maxDistance=n.float();break;case 4:r.showFeedback=n.bool();break;default:n.skipType(7&e)}}return r}},COMPONENT_ID$h=1060,OnPointerDownSchema={serialize(e,t){const n=PBOnPointerDown.encode(e),i=new Uint8Array(n.finish(),0,n.len);t.writeBuffer(i,!1)},deserialize:e=>PBOnPointerDown.decode(e.buffer(),e.remainingBytes()),create:()=>PBOnPointerDown.decode(new Uint8Array)};function createBasePBOnPointerDownResult(){return{button:0,meshName:"",origin:void 0,direction:void 0,point:void 0,normal:void 0,distance:0,timestamp:0}}const PBOnPointerDownResult={encode:(e,t=minimalExports.Writer.create())=>(0!==e.button&&t.uint32(16).int32(e.button),""!==e.meshName&&t.uint32(26).string(e.meshName),void 0!==e.origin&&Vector3.encode(e.origin,t.uint32(34).fork()).ldelim(),void 0!==e.direction&&Vector3.encode(e.direction,t.uint32(42).fork()).ldelim(),void 0!==e.point&&Vector3.encode(e.point,t.uint32(50).fork()).ldelim(),void 0!==e.normal&&Vector3.encode(e.normal,t.uint32(58).fork()).ldelim(),0!==e.distance&&t.uint32(69).float(e.distance),0!==e.timestamp&&t.uint32(72).int32(e.timestamp),t),decode(e,t){const n=e instanceof minimalExports.Reader?e:new minimalExports.Reader(e);let i=void 0===t?n.len:n.pos+t;const r=createBasePBOnPointerDownResult();for(;n.pos<i;){const e=n.uint32();switch(e>>>3){case 2:r.button=n.int32();break;case 3:r.meshName=n.string();break;case 4:r.origin=Vector3.decode(n,n.uint32());break;case 5:r.direction=Vector3.decode(n,n.uint32());break;case 6:r.point=Vector3.decode(n,n.uint32());break;case 7:r.normal=Vector3.decode(n,n.uint32());break;case 8:r.distance=n.float();break;case 9:r.timestamp=n.int32();break;default:n.skipType(7&e)}}return r}},COMPONENT_ID$g=1066,OnPointerDownResultSchema={serialize(e,t){const n=PBOnPointerDownResult.encode(e),i=new Uint8Array(n.finish(),0,n.len);t.writeBuffer(i,!1)},deserialize:e=>PBOnPointerDownResult.decode(e.buffer(),e.remainingBytes()),create:()=>PBOnPointerDownResult.decode(new Uint8Array)};function createBasePBOnPointerUp(){return{button:void 0,hoverText:void 0,maxDistance:void 0,showFeedback:void 0}}const PBOnPointerUp={encode:(e,t=minimalExports.Writer.create())=>(void 0!==e.button&&t.uint32(8).int32(e.button),void 0!==e.hoverText&&t.uint32(18).string(e.hoverText),void 0!==e.maxDistance&&t.uint32(29).float(e.maxDistance),void 0!==e.showFeedback&&t.uint32(32).bool(e.showFeedback),t),decode(e,t){const n=e instanceof minimalExports.Reader?e:new minimalExports.Reader(e);let i=void 0===t?n.len:n.pos+t;const r=createBasePBOnPointerUp();for(;n.pos<i;){const e=n.uint32();switch(e>>>3){case 1:r.button=n.int32();break;case 2:r.hoverText=n.string();break;case 3:r.maxDistance=n.float();break;case 4:r.showFeedback=n.bool();break;default:n.skipType(7&e)}}return r}},COMPONENT_ID$f=1061,OnPointerUpSchema={serialize(e,t){const n=PBOnPointerUp.encode(e),i=new Uint8Array(n.finish(),0,n.len);t.writeBuffer(i,!1)},deserialize:e=>PBOnPointerUp.decode(e.buffer(),e.remainingBytes()),create:()=>PBOnPointerUp.decode(new Uint8Array)};function createBasePBOnPointerUpResult(){return{button:0,meshName:"",origin:void 0,direction:void 0,point:void 0,normal:void 0,distance:0,timestamp:0}}const PBOnPointerUpResult={encode:(e,t=minimalExports.Writer.create())=>(0!==e.button&&t.uint32(16).int32(e.button),""!==e.meshName&&t.uint32(26).string(e.meshName),void 0!==e.origin&&Vector3.encode(e.origin,t.uint32(34).fork()).ldelim(),void 0!==e.direction&&Vector3.encode(e.direction,t.uint32(42).fork()).ldelim(),void 0!==e.point&&Vector3.encode(e.point,t.uint32(50).fork()).ldelim(),void 0!==e.normal&&Vector3.encode(e.normal,t.uint32(58).fork()).ldelim(),0!==e.distance&&t.uint32(69).float(e.distance),0!==e.timestamp&&t.uint32(72).int32(e.timestamp),t),decode(e,t){const n=e instanceof minimalExports.Reader?e:new minimalExports.Reader(e);let i=void 0===t?n.len:n.pos+t;const r=createBasePBOnPointerUpResult();for(;n.pos<i;){const e=n.uint32();switch(e>>>3){case 2:r.button=n.int32();break;case 3:r.meshName=n.string();break;case 4:r.origin=Vector3.decode(n,n.uint32());break;case 5:r.direction=Vector3.decode(n,n.uint32());break;case 6:r.point=Vector3.decode(n,n.uint32());break;case 7:r.normal=Vector3.decode(n,n.uint32());break;case 8:r.distance=n.float();break;case 9:r.timestamp=n.int32();break;default:n.skipType(7&e)}}return r}},COMPONENT_ID$e=1065,OnPointerUpResultSchema={serialize(e,t){const n=PBOnPointerUpResult.encode(e),i=new Uint8Array(n.finish(),0,n.len);t.writeBuffer(i,!1)},deserialize:e=>PBOnPointerUpResult.decode(e.buffer(),e.remainingBytes()),create:()=>PBOnPointerUpResult.decode(new Uint8Array)};function createBasePBPlaneShape(){return{withCollisions:void 0,isPointerBlocker:void 0,visible:void 0,uvs:[]}}const PBPlaneShape={encode(e,t=minimalExports.Writer.create()){void 0!==e.withCollisions&&t.uint32(8).bool(e.withCollisions),void 0!==e.isPointerBlocker&&t.uint32(16).bool(e.isPointerBlocker),void 0!==e.visible&&t.uint32(24).bool(e.visible),t.uint32(34).fork();for(const n of e.uvs)t.float(n);return t.ldelim(),t},decode(e,t){const n=e instanceof minimalExports.Reader?e:new minimalExports.Reader(e);let i=void 0===t?n.len:n.pos+t;const r=createBasePBPlaneShape();for(;n.pos<i;){const e=n.uint32();switch(e>>>3){case 1:r.withCollisions=n.bool();break;case 2:r.isPointerBlocker=n.bool();break;case 3:r.visible=n.bool();break;case 4:if(2==(7&e)){const e=n.uint32()+n.pos;for(;n.pos<e;)r.uvs.push(n.float())}else r.uvs.push(n.float());break;default:n.skipType(7&e)}}return r}},COMPONENT_ID$d=1014,PlaneShapeSchema={serialize(e,t){const n=PBPlaneShape.encode(e),i=new Uint8Array(n.finish(),0,n.len);t.writeBuffer(i,!1)},deserialize:e=>PBPlaneShape.decode(e.buffer(),e.remainingBytes()),create:()=>PBPlaneShape.decode(new Uint8Array)};var PointerEventType;function createBasePBPointerEvents(){return{pointerEvents:[]}}!function(e){e[e.UP=0]="UP",e[e.DOWN=1]="DOWN",e[e.HOVER_ENTER=2]="HOVER_ENTER",e[e.HOVER_LEAVE=3]="HOVER_LEAVE",e[e.UNRECOGNIZED=-1]="UNRECOGNIZED"}(PointerEventType||(PointerEventType={}));const PBPointerEvents={encode(e,t=minimalExports.Writer.create()){for(const n of e.pointerEvents)PBPointerEvents_Entry.encode(n,t.uint32(10).fork()).ldelim();return t},decode(e,t){const n=e instanceof minimalExports.Reader?e:new minimalExports.Reader(e);let i=void 0===t?n.len:n.pos+t;const r=createBasePBPointerEvents();for(;n.pos<i;){const e=n.uint32();if(e>>>3==1)r.pointerEvents.push(PBPointerEvents_Entry.decode(n,n.uint32()));else n.skipType(7&e)}return r}};function createBasePBPointerEvents_Info(){return{button:void 0,hoverText:void 0,maxDistance:void 0,showFeedback:void 0}}const PBPointerEvents_Info={encode:(e,t=minimalExports.Writer.create())=>(void 0!==e.button&&t.uint32(8).int32(e.button),void 0!==e.hoverText&&t.uint32(18).string(e.hoverText),void 0!==e.maxDistance&&t.uint32(29).float(e.maxDistance),void 0!==e.showFeedback&&t.uint32(32).bool(e.showFeedback),t),decode(e,t){const n=e instanceof minimalExports.Reader?e:new minimalExports.Reader(e);let i=void 0===t?n.len:n.pos+t;const r=createBasePBPointerEvents_Info();for(;n.pos<i;){const e=n.uint32();switch(e>>>3){case 1:r.button=n.int32();break;case 2:r.hoverText=n.string();break;case 3:r.maxDistance=n.float();break;case 4:r.showFeedback=n.bool();break;default:n.skipType(7&e)}}return r}};function createBasePBPointerEvents_Entry(){return{eventType:0,eventInfo:void 0}}const PBPointerEvents_Entry={encode:(e,t=minimalExports.Writer.create())=>(0!==e.eventType&&t.uint32(8).int32(e.eventType),void 0!==e.eventInfo&&PBPointerEvents_Info.encode(e.eventInfo,t.uint32(18).fork()).ldelim(),t),decode(e,t){const n=e instanceof minimalExports.Reader?e:new minimalExports.Reader(e);let i=void 0===t?n.len:n.pos+t;const r=createBasePBPointerEvents_Entry();for(;n.pos<i;){const e=n.uint32();switch(e>>>3){case 1:r.eventType=n.int32();break;case 2:r.eventInfo=PBPointerEvents_Info.decode(n,n.uint32());break;default:n.skipType(7&e)}}return r}},COMPONENT_ID$c=1062,PointerEventsSchema={serialize(e,t){const n=PBPointerEvents.encode(e),i=new Uint8Array(n.finish(),0,n.len);t.writeBuffer(i,!1)},deserialize:e=>PBPointerEvents.decode(e.buffer(),e.remainingBytes()),create:()=>PBPointerEvents.decode(new Uint8Array)};function createBasePBRaycastResult(){return{timestamp:0,origin:void 0,direction:void 0,hits:[]}}const PBRaycastResult={encode(e,t=minimalExports.Writer.create()){0!==e.timestamp&&t.uint32(8).int32(e.timestamp),void 0!==e.origin&&Vector3.encode(e.origin,t.uint32(18).fork()).ldelim(),void 0!==e.direction&&Vector3.encode(e.direction,t.uint32(26).fork()).ldelim();for(const n of e.hits)RaycastHit.encode(n,t.uint32(34).fork()).ldelim();return t},decode(e,t){const n=e instanceof minimalExports.Reader?e:new minimalExports.Reader(e);let i=void 0===t?n.len:n.pos+t;const r=createBasePBRaycastResult();for(;n.pos<i;){const e=n.uint32();switch(e>>>3){case 1:r.timestamp=n.int32();break;case 2:r.origin=Vector3.decode(n,n.uint32());break;case 3:r.direction=Vector3.decode(n,n.uint32());break;case 4:r.hits.push(RaycastHit.decode(n,n.uint32()));break;default:n.skipType(7&e)}}return r}};function createBaseRaycastHit(){return{position:void 0,origin:void 0,direction:void 0,normalHit:void 0,length:0,meshName:void 0,entityId:void 0}}const RaycastHit={encode:(e,t=minimalExports.Writer.create())=>(void 0!==e.position&&Vector3.encode(e.position,t.uint32(10).fork()).ldelim(),void 0!==e.origin&&Vector3.encode(e.origin,t.uint32(18).fork()).ldelim(),void 0!==e.direction&&Vector3.encode(e.direction,t.uint32(26).fork()).ldelim(),void 0!==e.normalHit&&Vector3.encode(e.normalHit,t.uint32(34).fork()).ldelim(),0!==e.length&&t.uint32(45).float(e.length),void 0!==e.meshName&&t.uint32(50).string(e.meshName),void 0!==e.entityId&&t.uint32(56).int64(e.entityId),t),decode(e,t){const n=e instanceof minimalExports.Reader?e:new minimalExports.Reader(e);let i=void 0===t?n.len:n.pos+t;const r=createBaseRaycastHit();for(;n.pos<i;){const e=n.uint32();switch(e>>>3){case 1:r.position=Vector3.decode(n,n.uint32());break;case 2:r.origin=Vector3.decode(n,n.uint32());break;case 3:r.direction=Vector3.decode(n,n.uint32());break;case 4:r.normalHit=Vector3.decode(n,n.uint32());break;case 5:r.length=n.float();break;case 6:r.meshName=n.string();break;case 7:r.entityId=longToNumber(n.int64());break;default:n.skipType(7&e)}}return r}};var globalThis$1=(()=>{if(void 0!==globalThis$1)return globalThis$1;if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if("undefined"!=typeof global)return global;throw"Unable to locate global object"})();function longToNumber(e){if(e.gt(Number.MAX_SAFE_INTEGER))throw new globalThis$1.Error("Value is larger than Number.MAX_SAFE_INTEGER");return e.toNumber()}function createBasePBPointerEventsResult(){return{commands:[]}}minimalExports.util.Long!==longExports&&(minimalExports.util.Long=longExports,minimalExports.configure());const PBPointerEventsResult={encode(e,t=minimalExports.Writer.create()){for(const n of e.commands)PBPointerEventsResult_PointerCommand.encode(n,t.uint32(10).fork()).ldelim();return t},decode(e,t){const n=e instanceof minimalExports.Reader?e:new minimalExports.Reader(e);let i=void 0===t?n.len:n.pos+t;const r=createBasePBPointerEventsResult();for(;n.pos<i;){const e=n.uint32();if(e>>>3==1)r.commands.push(PBPointerEventsResult_PointerCommand.decode(n,n.uint32()));else n.skipType(7&e)}return r}};function createBasePBPointerEventsResult_PointerCommand(){return{button:0,hit:void 0,state:0,timestamp:0,analog:void 0}}const PBPointerEventsResult_PointerCommand={encode:(e,t=minimalExports.Writer.create())=>(0!==e.button&&t.uint32(8).int32(e.button),void 0!==e.hit&&RaycastHit.encode(e.hit,t.uint32(18).fork()).ldelim(),0!==e.state&&t.uint32(32).int32(e.state),0!==e.timestamp&&t.uint32(40).int32(e.timestamp),void 0!==e.analog&&t.uint32(53).float(e.analog),t),decode(e,t){const n=e instanceof minimalExports.Reader?e:new minimalExports.Reader(e);let i=void 0===t?n.len:n.pos+t;const r=createBasePBPointerEventsResult_PointerCommand();for(;n.pos<i;){const e=n.uint32();switch(e>>>3){case 1:r.button=n.int32();break;case 2:r.hit=RaycastHit.decode(n,n.uint32());break;case 4:r.state=n.int32();break;case 5:r.timestamp=n.int32();break;case 6:r.analog=n.float();break;default:n.skipType(7&e)}}return r}},COMPONENT_ID$b=1063,PointerEventsResultSchema={serialize(e,t){const n=PBPointerEventsResult.encode(e),i=new Uint8Array(n.finish(),0,n.len);t.writeBuffer(i,!1)},deserialize:e=>PBPointerEventsResult.decode(e.buffer(),e.remainingBytes()),create:()=>PBPointerEventsResult.decode(new Uint8Array)};function createBasePBPointerLock(){return{isPointerLocked:!1}}const PBPointerLock={encode:(e,t=minimalExports.Writer.create())=>(!0===e.isPointerLocked&&t.uint32(8).bool(e.isPointerLocked),t),decode(e,t){const n=e instanceof minimalExports.Reader?e:new minimalExports.Reader(e);let i=void 0===t?n.len:n.pos+t;const r=createBasePBPointerLock();for(;n.pos<i;){const e=n.uint32();if(e>>>3==1)r.isPointerLocked=n.bool();else n.skipType(7&e)}return r}},COMPONENT_ID$a=1074,PointerLockSchema={serialize(e,t){const n=PBPointerLock.encode(e),i=new Uint8Array(n.finish(),0,n.len);t.writeBuffer(i,!1)},deserialize:e=>PBPointerLock.decode(e.buffer(),e.remainingBytes()),create:()=>PBPointerLock.decode(new Uint8Array)};var RaycastQueryType;function createBasePBRaycast(){return{timestamp:0,origin:void 0,direction:void 0,maxDistance:0,queryType:0}}!function(e){e[e.HIT_FIRST=0]="HIT_FIRST",e[e.QUERY_ALL=1]="QUERY_ALL",e[e.UNRECOGNIZED=-1]="UNRECOGNIZED"}(RaycastQueryType||(RaycastQueryType={}));const PBRaycast={encode:(e,t=minimalExports.Writer.create())=>(0!==e.timestamp&&t.uint32(8).int32(e.timestamp),void 0!==e.origin&&Vector3.encode(e.origin,t.uint32(18).fork()).ldelim(),void 0!==e.direction&&Vector3.encode(e.direction,t.uint32(26).fork()).ldelim(),0!==e.maxDistance&&t.uint32(37).float(e.maxDistance),0!==e.queryType&&t.uint32(40).int32(e.queryType),t),decode(e,t){const n=e instanceof minimalExports.Reader?e:new minimalExports.Reader(e);let i=void 0===t?n.len:n.pos+t;const r=createBasePBRaycast();for(;n.pos<i;){const e=n.uint32();switch(e>>>3){case 1:r.timestamp=n.int32();break;case 2:r.origin=Vector3.decode(n,n.uint32());break;case 3:r.direction=Vector3.decode(n,n.uint32());break;case 4:r.maxDistance=n.float();break;case 5:r.queryType=n.int32();break;default:n.skipType(7&e)}}return r}},COMPONENT_ID$9=1067,RaycastSchema={serialize(e,t){const n=PBRaycast.encode(e),i=new Uint8Array(n.finish(),0,n.len);t.writeBuffer(i,!1)},deserialize:e=>PBRaycast.decode(e.buffer(),e.remainingBytes()),create:()=>PBRaycast.decode(new Uint8Array)},COMPONENT_ID$8=1068,RaycastResultSchema={serialize(e,t){const n=PBRaycastResult.encode(e),i=new Uint8Array(n.finish(),0,n.len);t.writeBuffer(i,!1)},deserialize:e=>PBRaycastResult.decode(e.buffer(),e.remainingBytes()),create:()=>PBRaycastResult.decode(new Uint8Array)};function createBasePBSphereShape(){return{withCollisions:void 0,isPointerBlocker:void 0,visible:void 0}}const PBSphereShape={encode:(e,t=minimalExports.Writer.create())=>(void 0!==e.withCollisions&&t.uint32(8).bool(e.withCollisions),void 0!==e.isPointerBlocker&&t.uint32(16).bool(e.isPointerBlocker),void 0!==e.visible&&t.uint32(24).bool(e.visible),t),decode(e,t){const n=e instanceof minimalExports.Reader?e:new minimalExports.Reader(e);let i=void 0===t?n.len:n.pos+t;const r=createBasePBSphereShape();for(;n.pos<i;){const e=n.uint32();switch(e>>>3){case 1:r.withCollisions=n.bool();break;case 2:r.isPointerBlocker=n.bool();break;case 3:r.visible=n.bool();break;default:n.skipType(7&e)}}return r}},COMPONENT_ID$7=1015,SphereShapeSchema={serialize(e,t){const n=PBSphereShape.encode(e),i=new Uint8Array(n.finish(),0,n.len);t.writeBuffer(i,!1)},deserialize:e=>PBSphereShape.decode(e.buffer(),e.remainingBytes()),create:()=>PBSphereShape.decode(new Uint8Array)};function createBasePBTextShape(){return{text:"",visible:void 0,font:void 0,opacity:void 0,fontSize:void 0,fontAutoSize:void 0,hTextAlign:void 0,vTextAlign:void 0,width:void 0,height:void 0,paddingTop:void 0,paddingRight:void 0,paddingBottom:void 0,paddingLeft:void 0,lineSpacing:void 0,lineCount:void 0,textWrapping:void 0,shadowBlur:void 0,shadowOffsetX:void 0,shadowOffsetY:void 0,outlineWidth:void 0,shadowColor:void 0,outlineColor:void 0,textColor:void 0}}const PBTextShape={encode:(e,t=minimalExports.Writer.create())=>(""!==e.text&&t.uint32(10).string(e.text),void 0!==e.visible&&t.uint32(16).bool(e.visible),void 0!==e.font&&t.uint32(26).string(e.font),void 0!==e.opacity&&t.uint32(37).float(e.opacity),void 0!==e.fontSize&&t.uint32(45).float(e.fontSize),void 0!==e.fontAutoSize&&t.uint32(48).bool(e.fontAutoSize),void 0!==e.hTextAlign&&t.uint32(58).string(e.hTextAlign),void 0!==e.vTextAlign&&t.uint32(66).string(e.vTextAlign),void 0!==e.width&&t.uint32(77).float(e.width),void 0!==e.height&&t.uint32(85).float(e.height),void 0!==e.paddingTop&&t.uint32(93).float(e.paddingTop),void 0!==e.paddingRight&&t.uint32(101).float(e.paddingRight),void 0!==e.paddingBottom&&t.uint32(109).float(e.paddingBottom),void 0!==e.paddingLeft&&t.uint32(117).float(e.paddingLeft),void 0!==e.lineSpacing&&t.uint32(125).float(e.lineSpacing),void 0!==e.lineCount&&t.uint32(128).int32(e.lineCount),void 0!==e.textWrapping&&t.uint32(136).bool(e.textWrapping),void 0!==e.shadowBlur&&t.uint32(149).float(e.shadowBlur),void 0!==e.shadowOffsetX&&t.uint32(157).float(e.shadowOffsetX),void 0!==e.shadowOffsetY&&t.uint32(165).float(e.shadowOffsetY),void 0!==e.outlineWidth&&t.uint32(173).float(e.outlineWidth),void 0!==e.shadowColor&&Color3.encode(e.shadowColor,t.uint32(178).fork()).ldelim(),void 0!==e.outlineColor&&Color3.encode(e.outlineColor,t.uint32(186).fork()).ldelim(),void 0!==e.textColor&&Color3.encode(e.textColor,t.uint32(194).fork()).ldelim(),t),decode(e,t){const n=e instanceof minimalExports.Reader?e:new minimalExports.Reader(e);let i=void 0===t?n.len:n.pos+t;const r=createBasePBTextShape();for(;n.pos<i;){const e=n.uint32();switch(e>>>3){case 1:r.text=n.string();break;case 2:r.visible=n.bool();break;case 3:r.font=n.string();break;case 4:r.opacity=n.float();break;case 5:r.fontSize=n.float();break;case 6:r.fontAutoSize=n.bool();break;case 7:r.hTextAlign=n.string();break;case 8:r.vTextAlign=n.string();break;case 9:r.width=n.float();break;case 10:r.height=n.float();break;case 11:r.paddingTop=n.float();break;case 12:r.paddingRight=n.float();break;case 13:r.paddingBottom=n.float();break;case 14:r.paddingLeft=n.float();break;case 15:r.lineSpacing=n.float();break;case 16:r.lineCount=n.int32();break;case 17:r.textWrapping=n.bool();break;case 18:r.shadowBlur=n.float();break;case 19:r.shadowOffsetX=n.float();break;case 20:r.shadowOffsetY=n.float();break;case 21:r.outlineWidth=n.float();break;case 22:r.shadowColor=Color3.decode(n,n.uint32());break;case 23:r.outlineColor=Color3.decode(n,n.uint32());break;case 24:r.textColor=Color3.decode(n,n.uint32());break;default:n.skipType(7&e)}}return r}},COMPONENT_ID$6=1030,TextShapeSchema={serialize(e,t){const n=PBTextShape.encode(e),i=new Uint8Array(n.finish(),0,n.len);t.writeBuffer(i,!1)},deserialize:e=>PBTextShape.decode(e.buffer(),e.remainingBytes()),create:()=>PBTextShape.decode(new Uint8Array)};function createBaseColor4(){return{r:0,g:0,b:0,a:0}}const Color4={encode:(e,t=minimalExports.Writer.create())=>(0!==e.r&&t.uint32(13).float(e.r),0!==e.g&&t.uint32(21).float(e.g),0!==e.b&&t.uint32(29).float(e.b),0!==e.a&&t.uint32(37).float(e.a),t),decode(e,t){const n=e instanceof minimalExports.Reader?e:new minimalExports.Reader(e);let i=void 0===t?n.len:n.pos+t;const r=createBaseColor4();for(;n.pos<i;){const e=n.uint32();switch(e>>>3){case 1:r.r=n.float();break;case 2:r.g=n.float();break;case 3:r.b=n.float();break;case 4:r.a=n.float();break;default:n.skipType(7&e)}}return r}};function createBasePBUiStyles(){return{backgroundColor:void 0}}const PBUiStyles={encode:(e,t=minimalExports.Writer.create())=>(void 0!==e.backgroundColor&&Color4.encode(e.backgroundColor,t.uint32(10).fork()).ldelim(),t),decode(e,t){const n=e instanceof minimalExports.Reader?e:new minimalExports.Reader(e);let i=void 0===t?n.len:n.pos+t;const r=createBasePBUiStyles();for(;n.pos<i;){const e=n.uint32();if(e>>>3==1)r.backgroundColor=Color4.decode(n,n.uint32());else n.skipType(7&e)}return r}},COMPONENT_ID$5=1053,UiStylesSchema={serialize(e,t){const n=PBUiStyles.encode(e),i=new Uint8Array(n.finish(),0,n.len);t.writeBuffer(i,!1)},deserialize:e=>PBUiStyles.decode(e.buffer(),e.remainingBytes()),create:()=>PBUiStyles.decode(new Uint8Array)};var TextAlign,Font;function createBasePBUiText(){return{value:"",color:void 0,textAlign:void 0,font:void 0,fontSize:void 0}}!function(e){e[e.Center=0]="Center",e[e.Left=1]="Left",e[e.Right=2]="Right",e[e.UNRECOGNIZED=-1]="UNRECOGNIZED"}(TextAlign||(TextAlign={})),function(e){e[e.LiberationSans=0]="LiberationSans",e[e.SansSerif=1]="SansSerif",e[e.UNRECOGNIZED=-1]="UNRECOGNIZED"}(Font||(Font={}));const PBUiText={encode:(e,t=minimalExports.Writer.create())=>(""!==e.value&&t.uint32(10).string(e.value),void 0!==e.color&&Color3.encode(e.color,t.uint32(18).fork()).ldelim(),void 0!==e.textAlign&&t.uint32(24).int32(e.textAlign),void 0!==e.font&&t.uint32(32).int32(e.font),void 0!==e.fontSize&&t.uint32(40).int32(e.fontSize),t),decode(e,t){const n=e instanceof minimalExports.Reader?e:new minimalExports.Reader(e);let i=void 0===t?n.len:n.pos+t;const r=createBasePBUiText();for(;n.pos<i;){const e=n.uint32();switch(e>>>3){case 1:r.value=n.string();break;case 2:r.color=Color3.decode(n,n.uint32());break;case 3:r.textAlign=n.int32();break;case 4:r.font=n.int32();break;case 5:r.fontSize=n.int32();break;default:n.skipType(7&e)}}return r}},COMPONENT_ID$4=1052,UiTextSchema={serialize(e,t){const n=PBUiText.encode(e),i=new Uint8Array(n.finish(),0,n.len);t.writeBuffer(i,!1)},deserialize:e=>PBUiText.decode(e.buffer(),e.remainingBytes()),create:()=>PBUiText.decode(new Uint8Array)};var YGPositionType,YGAlign,YGUnit,YGDirection,YGFlexDirection,YGWrap,YGJustify,YGOverflow,YGDisplay,YGEdge;function createBasePBUiTransform(){return{parent:0,rightOf:0,positionType:0,alignContent:0,alignItems:0,alignSelf:0,flexDirection:0,flexWrap:0,justifyContent:0,overflow:0,display:0,direction:0,flex:0,flexBasisUnit:0,flexBasis:0,flexGrow:0,flexShrink:0,widthUnit:0,width:0,heightUnit:0,height:0,minWidthUnit:0,minWidth:0,minHeightUnit:0,minHeight:0,maxWidthUnit:0,maxWidth:0,maxHeightUnit:0,maxHeight:0,positionLeftUnit:0,positionLeft:0,positionTopUnit:0,positionTop:0,positionRightUnit:0,positionRight:0,positionBottomUnit:0,positionBottom:0,marginLeftUnit:0,marginLeft:0,marginTopUnit:0,marginTop:0,marginRightUnit:0,marginRight:0,marginBottomUnit:0,marginBottom:0,paddingLeftUnit:0,paddingLeft:0,paddingTopUnit:0,paddingTop:0,paddingRightUnit:0,paddingRight:0,paddingBottomUnit:0,paddingBottom:0,borderLeft:0,borderTop:0,borderRight:0,borderBottom:0}}!function(e){e[e.YGPositionTypeStatic=0]="YGPositionTypeStatic",e[e.YGPositionTypeRelative=1]="YGPositionTypeRelative",e[e.YGPositionTypeAbsolute=2]="YGPositionTypeAbsolute",e[e.UNRECOGNIZED=-1]="UNRECOGNIZED"}(YGPositionType||(YGPositionType={})),function(e){e[e.YGAlignAuto=0]="YGAlignAuto",e[e.YGAlignFlexStart=1]="YGAlignFlexStart",e[e.YGAlignCenter=2]="YGAlignCenter",e[e.YGAlignFlexEnd=3]="YGAlignFlexEnd",e[e.YGAlignStretch=4]="YGAlignStretch",e[e.YGAlignBaseline=5]="YGAlignBaseline",e[e.YGAlignSpaceBetween=6]="YGAlignSpaceBetween",e[e.YGAlignSpaceAround=7]="YGAlignSpaceAround",e[e.UNRECOGNIZED=-1]="UNRECOGNIZED"}(YGAlign||(YGAlign={})),function(e){e[e.YGUnitUndefined=0]="YGUnitUndefined",e[e.YGUnitPoint=1]="YGUnitPoint",e[e.YGUnitPercent=2]="YGUnitPercent",e[e.YGUnitAuto=3]="YGUnitAuto",e[e.UNRECOGNIZED=-1]="UNRECOGNIZED"}(YGUnit||(YGUnit={})),function(e){e[e.YGDirectionInherit=0]="YGDirectionInherit",e[e.YGDirectionLTR=1]="YGDirectionLTR",e[e.YGDirectionRTL=2]="YGDirectionRTL",e[e.UNRECOGNIZED=-1]="UNRECOGNIZED"}(YGDirection||(YGDirection={})),function(e){e[e.YGFlexDirectionColumn=0]="YGFlexDirectionColumn",e[e.YGFlexDirectionColumnReverse=1]="YGFlexDirectionColumnReverse",e[e.YGFlexDirectionRow=2]="YGFlexDirectionRow",e[e.YGFlexDirectionRowReverse=3]="YGFlexDirectionRowReverse",e[e.UNRECOGNIZED=-1]="UNRECOGNIZED"}(YGFlexDirection||(YGFlexDirection={})),function(e){e[e.YGWrapNoWrap=0]="YGWrapNoWrap",e[e.YGWrapWrap=1]="YGWrapWrap",e[e.YGWrapWrapReverse=2]="YGWrapWrapReverse",e[e.UNRECOGNIZED=-1]="UNRECOGNIZED"}(YGWrap||(YGWrap={})),function(e){e[e.YGJustifyFlexStart=0]="YGJustifyFlexStart",e[e.YGJustifyCenter=1]="YGJustifyCenter",e[e.YGJustifyFlexEnd=2]="YGJustifyFlexEnd",e[e.YGJustifySpaceBetween=3]="YGJustifySpaceBetween",e[e.YGJustifySpaceAround=4]="YGJustifySpaceAround",e[e.YGJustifySpaceEvenly=5]="YGJustifySpaceEvenly",e[e.UNRECOGNIZED=-1]="UNRECOGNIZED"}(YGJustify||(YGJustify={})),function(e){e[e.YGOverflowVisible=0]="YGOverflowVisible",e[e.YGOverflowHidden=1]="YGOverflowHidden",e[e.YGOverflowScroll=2]="YGOverflowScroll",e[e.UNRECOGNIZED=-1]="UNRECOGNIZED"}(YGOverflow||(YGOverflow={})),function(e){e[e.YGDisplayFlex=0]="YGDisplayFlex",e[e.YGDisplayNone=1]="YGDisplayNone",e[e.UNRECOGNIZED=-1]="UNRECOGNIZED"}(YGDisplay||(YGDisplay={})),function(e){e[e.YGEdgeLeft=0]="YGEdgeLeft",e[e.YGEdgeTop=1]="YGEdgeTop",e[e.YGEdgeRight=2]="YGEdgeRight",e[e.YGEdgeBottom=3]="YGEdgeBottom",e[e.YGEdgeStart=4]="YGEdgeStart",e[e.YGEdgeEnd=5]="YGEdgeEnd",e[e.YGEdgeHorizontal=6]="YGEdgeHorizontal",e[e.YGEdgeVertical=7]="YGEdgeVertical",e[e.YGEdgeAll=8]="YGEdgeAll",e[e.UNRECOGNIZED=-1]="UNRECOGNIZED"}(YGEdge||(YGEdge={}));const PBUiTransform={encode:(e,t=minimalExports.Writer.create())=>(0!==e.parent&&t.uint32(632).int32(e.parent),0!==e.rightOf&&t.uint32(640).int32(e.rightOf),0!==e.positionType&&t.uint32(8).int32(e.positionType),0!==e.alignContent&&t.uint32(16).int32(e.alignContent),0!==e.alignItems&&t.uint32(24).int32(e.alignItems),0!==e.alignSelf&&t.uint32(32).int32(e.alignSelf),0!==e.flexDirection&&t.uint32(40).int32(e.flexDirection),0!==e.flexWrap&&t.uint32(48).int32(e.flexWrap),0!==e.justifyContent&&t.uint32(56).int32(e.justifyContent),0!==e.overflow&&t.uint32(64).int32(e.overflow),0!==e.display&&t.uint32(72).int32(e.display),0!==e.direction&&t.uint32(80).int32(e.direction),0!==e.flex&&t.uint32(93).float(e.flex),0!==e.flexBasisUnit&&t.uint32(104).int32(e.flexBasisUnit),0!==e.flexBasis&&t.uint32(117).float(e.flexBasis),0!==e.flexGrow&&t.uint32(125).float(e.flexGrow),0!==e.flexShrink&&t.uint32(133).float(e.flexShrink),0!==e.widthUnit&&t.uint32(136).int32(e.widthUnit),0!==e.width&&t.uint32(149).float(e.width),0!==e.heightUnit&&t.uint32(152).int32(e.heightUnit),0!==e.height&&t.uint32(165).float(e.height),0!==e.minWidthUnit&&t.uint32(168).int32(e.minWidthUnit),0!==e.minWidth&&t.uint32(181).float(e.minWidth),0!==e.minHeightUnit&&t.uint32(184).int32(e.minHeightUnit),0!==e.minHeight&&t.uint32(197).float(e.minHeight),0!==e.maxWidthUnit&&t.uint32(248).int32(e.maxWidthUnit),0!==e.maxWidth&&t.uint32(261).float(e.maxWidth),0!==e.maxHeightUnit&&t.uint32(264).int32(e.maxHeightUnit),0!==e.maxHeight&&t.uint32(277).float(e.maxHeight),0!==e.positionLeftUnit&&t.uint32(328).int32(e.positionLeftUnit),0!==e.positionLeft&&t.uint32(341).float(e.positionLeft),0!==e.positionTopUnit&&t.uint32(344).int32(e.positionTopUnit),0!==e.positionTop&&t.uint32(357).float(e.positionTop),0!==e.positionRightUnit&&t.uint32(360).int32(e.positionRightUnit),0!==e.positionRight&&t.uint32(373).float(e.positionRight),0!==e.positionBottomUnit&&t.uint32(376).int32(e.positionBottomUnit),0!==e.positionBottom&&t.uint32(389).float(e.positionBottom),0!==e.marginLeftUnit&&t.uint32(408).int32(e.marginLeftUnit),0!==e.marginLeft&&t.uint32(421).float(e.marginLeft),0!==e.marginTopUnit&&t.uint32(424).int32(e.marginTopUnit),0!==e.marginTop&&t.uint32(437).float(e.marginTop),0!==e.marginRightUnit&&t.uint32(440).int32(e.marginRightUnit),0!==e.marginRight&&t.uint32(453).float(e.marginRight),0!==e.marginBottomUnit&&t.uint32(456).int32(e.marginBottomUnit),0!==e.marginBottom&&t.uint32(469).float(e.marginBottom),0!==e.paddingLeftUnit&&t.uint32(488).int32(e.paddingLeftUnit),0!==e.paddingLeft&&t.uint32(501).float(e.paddingLeft),0!==e.paddingTopUnit&&t.uint32(504).int32(e.paddingTopUnit),0!==e.paddingTop&&t.uint32(517).float(e.paddingTop),0!==e.paddingRightUnit&&t.uint32(520).int32(e.paddingRightUnit),0!==e.paddingRight&&t.uint32(533).float(e.paddingRight),0!==e.paddingBottomUnit&&t.uint32(536).int32(e.paddingBottomUnit),0!==e.paddingBottom&&t.uint32(549).float(e.paddingBottom),0!==e.borderLeft&&t.uint32(581).float(e.borderLeft),0!==e.borderTop&&t.uint32(597).float(e.borderTop),0!==e.borderRight&&t.uint32(613).float(e.borderRight),0!==e.borderBottom&&t.uint32(629).float(e.borderBottom),t),decode(e,t){const n=e instanceof minimalExports.Reader?e:new minimalExports.Reader(e);let i=void 0===t?n.len:n.pos+t;const r=createBasePBUiTransform();for(;n.pos<i;){const e=n.uint32();switch(e>>>3){case 79:r.parent=n.int32();break;case 80:r.rightOf=n.int32();break;case 1:r.positionType=n.int32();break;case 2:r.alignContent=n.int32();break;case 3:r.alignItems=n.int32();break;case 4:r.alignSelf=n.int32();break;case 5:r.flexDirection=n.int32();break;case 6:r.flexWrap=n.int32();break;case 7:r.justifyContent=n.int32();break;case 8:r.overflow=n.int32();break;case 9:r.display=n.int32();break;case 10:r.direction=n.int32();break;case 11:r.flex=n.float();break;case 13:r.flexBasisUnit=n.int32();break;case 14:r.flexBasis=n.float();break;case 15:r.flexGrow=n.float();break;case 16:r.flexShrink=n.float();break;case 17:r.widthUnit=n.int32();break;case 18:r.width=n.float();break;case 19:r.heightUnit=n.int32();break;case 20:r.height=n.float();break;case 21:r.minWidthUnit=n.int32();break;case 22:r.minWidth=n.float();break;case 23:r.minHeightUnit=n.int32();break;case 24:r.minHeight=n.float();break;case 31:r.maxWidthUnit=n.int32();break;case 32:r.maxWidth=n.float();break;case 33:r.maxHeightUnit=n.int32();break;case 34:r.maxHeight=n.float();break;case 41:r.positionLeftUnit=n.int32();break;case 42:r.positionLeft=n.float();break;case 43:r.positionTopUnit=n.int32();break;case 44:r.positionTop=n.float();break;case 45:r.positionRightUnit=n.int32();break;case 46:r.positionRight=n.float();break;case 47:r.positionBottomUnit=n.int32();break;case 48:r.positionBottom=n.float();break;case 51:r.marginLeftUnit=n.int32();break;case 52:r.marginLeft=n.float();break;case 53:r.marginTopUnit=n.int32();break;case 54:r.marginTop=n.float();break;case 55:r.marginRightUnit=n.int32();break;case 56:r.marginRight=n.float();break;case 57:r.marginBottomUnit=n.int32();break;case 58:r.marginBottom=n.float();break;case 61:r.paddingLeftUnit=n.int32();break;case 62:r.paddingLeft=n.float();break;case 63:r.paddingTopUnit=n.int32();break;case 64:r.paddingTop=n.float();break;case 65:r.paddingRightUnit=n.int32();break;case 66:r.paddingRight=n.float();break;case 67:r.paddingBottomUnit=n.int32();break;case 68:r.paddingBottom=n.float();break;case 72:r.borderLeft=n.float();break;case 74:r.borderTop=n.float();break;case 76:r.borderRight=n.float();break;case 78:r.borderBottom=n.float();break;default:n.skipType(7&e)}}return r}},COMPONENT_ID$3=1050,UiTransformSchema={serialize(e,t){const n=PBUiTransform.encode(e),i=new Uint8Array(n.finish(),0,n.len);t.writeBuffer(i,!1)},deserialize:e=>PBUiTransform.decode(e.buffer(),e.remainingBytes()),create:()=>PBUiTransform.decode(new Uint8Array)};function createBasePBVisibilityComponent(){return{visible:void 0}}const PBVisibilityComponent={encode:(e,t=minimalExports.Writer.create())=>(void 0!==e.visible&&t.uint32(8).bool(e.visible),t),decode(e,t){const n=e instanceof minimalExports.Reader?e:new minimalExports.Reader(e);let i=void 0===t?n.len:n.pos+t;const r=createBasePBVisibilityComponent();for(;n.pos<i;){const e=n.uint32();if(e>>>3==1)r.visible=n.bool();else n.skipType(7&e)}return r}},COMPONENT_ID$2=1081,VisibilityComponentSchema={serialize(e,t){const n=PBVisibilityComponent.encode(e),i=new Uint8Array(n.finish(),0,n.len);t.writeBuffer(i,!1)},deserialize:e=>PBVisibilityComponent.decode(e.buffer(),e.remainingBytes()),create:()=>PBVisibilityComponent.decode(new Uint8Array)};function defineLibraryComponents({defineComponentFromSchema:e}){return{Animator:e(AnimatorSchema,COMPONENT_ID$w),AudioSource:e(AudioSourceSchema,COMPONENT_ID$v),AvatarAttach:e(AvatarAttachSchema,COMPONENT_ID$u),AvatarModifierArea:e(AvatarModifierAreaSchema,COMPONENT_ID$t),AvatarShape:e(AvatarShapeSchema,COMPONENT_ID$s),Billboard:e(BillboardSchema,COMPONENT_ID$r),BoxShape:e(BoxShapeSchema,COMPONENT_ID$q),CameraMode:e(CameraModeSchema,COMPONENT_ID$p),CameraModeArea:e(CameraModeAreaSchema,COMPONENT_ID$o),CylinderShape:e(CylinderShapeSchema,COMPONENT_ID$n),GltfContainer:e(GltfContainerSchema,COMPONENT_ID$m),Material:e(MaterialSchema,COMPONENT_ID$l),MeshCollider:e(MeshColliderSchema,COMPONENT_ID$k),MeshRenderer:e(MeshRendererSchema,COMPONENT_ID$j),NFTShape:e(NFTShapeSchema,COMPONENT_ID$i),OnPointerDown:e(OnPointerDownSchema,COMPONENT_ID$h),OnPointerDownResult:e(OnPointerDownResultSchema,COMPONENT_ID$g),OnPointerUp:e(OnPointerUpSchema,COMPONENT_ID$f),OnPointerUpResult:e(OnPointerUpResultSchema,COMPONENT_ID$e),PlaneShape:e(PlaneShapeSchema,COMPONENT_ID$d),PointerEvents:e(PointerEventsSchema,COMPONENT_ID$c),PointerEventsResult:e(PointerEventsResultSchema,COMPONENT_ID$b),PointerLock:e(PointerLockSchema,COMPONENT_ID$a),Raycast:e(RaycastSchema,COMPONENT_ID$9),RaycastResult:e(RaycastResultSchema,COMPONENT_ID$8),SphereShape:e(SphereShapeSchema,COMPONENT_ID$7),TextShape:e(TextShapeSchema,COMPONENT_ID$6),UiStyles:e(UiStylesSchema,COMPONENT_ID$5),UiText:e(UiTextSchema,COMPONENT_ID$4),UiTransform:e(UiTransformSchema,COMPONENT_ID$3),VisibilityComponent:e(VisibilityComponentSchema,COMPONENT_ID$2)}}const COMPONENT_ID$1=1,TRANSFORM_LENGTH=44,TransformSchema={serialize(e,t){const n=t.incrementWriteOffset(TRANSFORM_LENGTH);t.setFloat32(n,e.position.x),t.setFloat32(n+4,e.position.y),t.setFloat32(n+8,e.position.z),t.setFloat32(n+12,e.rotation.x),t.setFloat32(n+16,e.rotation.y),t.setFloat32(n+20,e.rotation.z),t.setFloat32(n+24,e.rotation.w),t.setFloat32(n+28,e.scale.x),t.setFloat32(n+32,e.scale.y),t.setFloat32(n+36,e.scale.z),t.setUint32(n+40,e.parent||0)},deserialize(e){const t=e.incrementReadOffset(TRANSFORM_LENGTH);return{position:{x:e.getFloat32(t),y:e.getFloat32(t+4),z:e.getFloat32(t+8)},rotation:{x:e.getFloat32(t+12),y:e.getFloat32(t+16),z:e.getFloat32(t+20),w:e.getFloat32(t+24)},scale:{x:e.getFloat32(t+28),y:e.getFloat32(t+32),z:e.getFloat32(t+36)},parent:e.getUint32(t+40)}},create:()=>({position:{x:0,y:0,z:0},scale:{x:1,y:1,z:1},rotation:{x:0,y:0,z:0,w:1}})};function defineTransformComponent({defineComponentFromSchema:e}){return e(TransformSchema,COMPONENT_ID$1)}var COMPONENT_ID;function defineSdkComponents(e){const t=defineLibraryComponents(e);return e.removeComponentDefinition(t.MeshRenderer._id),e.removeComponentDefinition(t.MeshCollider._id),{...t,Transform:defineTransformComponent(e),MeshRenderer:e.defineComponentFromSchema(MeshRendererSchema,COMPONENT_ID$j),MeshCollider:e.defineComponentFromSchema(MeshColliderSchema,COMPONENT_ID$k)}}function IArray(e){return{serialize(t,n){n.writeUint32(t.length);for(const i of t)e.serialize(i,n)},deserialize(t){const n=[],i=t.readUint32();for(let r=0;r<i;r++)n.push(e.deserialize(t));return n},create:()=>[]}}!function(e){e[e.SYNC=1e3]="SYNC"}(COMPONENT_ID||(COMPONENT_ID={}));const Bool={serialize(e,t){t.writeInt8(e?1:0)},deserialize:e=>1===e.readInt8(),create:()=>!1};function IEnum(e){return{serialize(t,n){e.serialize(t,n)},deserialize:t=>e.deserialize(t),create:()=>e.create()}}const Float32={serialize(e,t){t.writeFloat32(e)},deserialize:e=>e.readFloat32(),create:()=>0},Float64={serialize(e,t){t.writeFloat64(e)},deserialize:e=>e.readFloat64(),create:()=>0},Int64={serialize(e,t){t.writeInt64(BigInt(e))},deserialize:e=>Number(e.readInt64()),create:()=>0},Int32={serialize(e,t){t.writeInt32(e)},deserialize:e=>e.readInt32(),create:()=>0},Int16={serialize(e,t){t.writeInt16(e)},deserialize:e=>e.readInt16(),create:()=>0},Int8={serialize(e,t){t.writeInt8(e)},deserialize:e=>e.readInt8(),create:()=>0},FlatString={serialize(e,t){t.writeBuffer((new TextEncoder).encode(e))},deserialize:e=>(new TextDecoder).decode(e.readBuffer()),create:()=>""},EcsString=FlatString;function IMap(e){return{serialize(t,n){for(const i in e)e[i].serialize(t[i],n)},deserialize(t){const n={};for(const i in e)n[i]=e[i].deserialize(t);return n},create(){const t={};for(const n in e)t[n]=e[n].create();return t}}}function IOptional(e){return{serialize(t,n){t?(n.writeInt8(1),e.serialize(t,n)):n.writeInt8(0)},deserialize(t){if(t.readInt8())return e.deserialize(t)},create(){}}}var Schemas;exports.Schemas=void 0,Schemas=exports.Schemas||(exports.Schemas={}),Schemas.Boolean=Bool,Schemas.String=EcsString,Schemas.Float=Float32,Schemas.Double=Float64,Schemas.Byte=Int8,Schemas.Short=Int16,Schemas.Int=Int32,Schemas.Int64=Int64,Schemas.Number=Float32,Schemas.Enum=IEnum,Schemas.Array=IArray,Schemas.Map=IMap,Schemas.Optional=IOptional;var dist={},types={},hasRequiredTypes,hasRequiredDist;function requireTypes(){return hasRequiredTypes||(hasRequiredTypes=1,Object.defineProperty(types,"__esModule",{value:!0})),types}function requireDist(){return hasRequiredDist||(hasRequiredDist=1,function(e){var t=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),n=commonjsGlobal&&commonjsGlobal.__exportStar||function(e,n){for(var i in e)"default"===i||Object.prototype.hasOwnProperty.call(n,i)||t(n,e,i)};Object.defineProperty(e,"__esModule",{value:!0}),e.crdtProtocol=e.stateIterator=e.sameData=void 0,n(requireTypes(),e);const i=globalThis.Buffer;function r(e,t){if(e===t)return!0;if(e instanceof Uint8Array&&t instanceof Uint8Array){if(e.byteLength!==t.byteLength)return!1;for(let n=0;n<e.byteLength;n++)if(e[n]!==t[n])return!1;return!0}return!!(i&&e instanceof i&&t instanceof i)&&e.equals(t)}e.sameData=r,e.stateIterator=function*(e){for(const[t,n]of e.entries())for(const[e,i]of n.entries())yield[t,e,i]},e.crdtProtocol=function(){const e=new Map;function t(t,n,i,r){const o=e.get(t),a=Math.max(r,o?.get(n)?.timestamp||0);if(o)o.set(n,{timestamp:a,data:i});else{const r=new Map;r.set(n,{timestamp:a,data:i}),e.set(t,r)}return{timestamp:a,data:i}}return{createEvent:function(n,i,r){const o=(e.get(n)?.get(i)?.timestamp||0)+1;return t(n,i,r,o),{key1:n,key2:i,data:r,timestamp:o}},processMessage:function(n){const{key1:i,key2:o,data:a,timestamp:s}=n,c=e.get(i)?.get(o);return!c||c.timestamp<s?(t(i,o,a,s),n):c.timestamp>s?{key1:i,key2:o,data:c.data,timestamp:c.timestamp}:r(c.data,a)?n:function(e,t){return e>t}(c.data,a)?{key1:i,key2:o,data:c.data,timestamp:c.timestamp}:(t(i,o,a,s).data,n)},getState:function(){return e}}}}(dist)),dist}var distExports=requireDist();function getNextSize(e,t){const n=Math.max(e,t)+1024;return 1024*Math.ceil(n/1024)}const defaultInitialCapacity=10240;function createByteBuffer(e={}){const t=e.reading?.currentOffset||0;let n=null,i=0;e.writing?(n=e.writing.buffer,e.writing.currentOffset&&(i=e.writing.currentOffset)):e.reading?(n=e.reading.buffer,i=e.reading.length||e.reading.buffer.length):n=new Uint8Array(e.initialCapacity||defaultInitialCapacity);let r=n,o=new DataView(r.buffer,r.byteOffset),a=i,s=t;const c=e=>{if(a+e>r.byteLength){const t=getNextSize(r.byteLength,a+e),n=new Uint8Array(t);n.set(r),r=n,o=new DataView(r.buffer)}return a+=e,a-e},l=e=>{if(s+e>a)throw new Error("Outside of the bounds of writen data.");return s+=e,s-e};return{buffer:()=>r,bufferLength:()=>r.length,resetBuffer(){s=0,a=0},currentReadOffset:()=>s,currentWriteOffset:()=>a,incrementReadOffset:e=>l(e),remainingBytes:()=>a-s,readFloat32:()=>o.getFloat32(l(4)),readFloat64:()=>o.getFloat64(l(8)),readInt8:()=>o.getInt8(l(1)),readInt16:()=>o.getInt16(l(2)),readInt32:()=>o.getInt32(l(4)),readInt64:()=>o.getBigInt64(l(8)),readUint8:()=>o.getUint8(l(1)),readUint16:()=>o.getUint16(l(2)),readUint32:()=>o.getUint32(l(4)),readUint64:()=>o.getBigUint64(l(8)),readBuffer(){const e=o.getUint32(l(4));return r.subarray(l(e),l(0))},incrementWriteOffset:e=>c(e),size:()=>a,toBinary:()=>r.subarray(0,a),toCopiedBinary(){return new Uint8Array(this.toBinary())},writeBuffer(e,t=!0){t&&this.writeUint32(e.byteLength);const n=c(e.byteLength);r.set(e,n)},writeFloat32(e){const t=c(4);o.setFloat32(t,e)},writeFloat64(e){const t=c(8);o.setFloat64(t,e)},writeInt8(e){const t=c(1);o.setInt8(t,e)},writeInt16(e){const t=c(2);o.setInt16(t,e)},writeInt32(e){const t=c(4);o.setInt32(t,e)},writeInt64(e){const t=c(8);o.setBigInt64(t,e)},writeUint8(e){const t=c(1);o.setUint8(t,e)},writeUint16(e){const t=c(2);o.setUint16(t,e)},writeUint32(e){const t=c(4);o.setUint32(t,e)},writeUint64(e){const t=c(8);o.setBigUint64(t,e)},getFloat32:e=>o.getFloat32(e),getFloat64:e=>o.getFloat64(e),getInt8:e=>o.getInt8(e),getInt16:e=>o.getInt16(e),getInt32:e=>o.getInt32(e),getInt64:e=>o.getBigInt64(e),getUint8:e=>o.getUint8(e),getUint16:e=>o.getUint16(e),getUint32:e=>o.getUint32(e),getUint64:e=>o.getBigUint64(e),setFloat32(e,t){o.setFloat32(e,t)},setFloat64(e,t){o.setFloat64(e,t)},setInt8(e,t){o.setInt8(e,t)},setInt16(e,t){o.setInt16(e,t)},setInt32(e,t){o.setInt32(e,t)},setInt64(e,t){o.setBigInt64(e,t)},setUint8(e,t){o.setUint8(e,t)},setUint16(e,t){o.setUint16(e,t)},setUint32(e,t){o.setUint32(e,t)},setUint64(e,t){o.setBigUint64(e,t)}}}var WireMessage;!function(e){var t;function n(t){const n=t.remainingBytes();if(n<e.HEADER_LENGTH)return!1;return!(n<t.getUint32(t.currentReadOffset()))}(t=e.Enum||(e.Enum={}))[t.RESERVED=0]="RESERVED",t[t.PUT_COMPONENT=1]="PUT_COMPONENT",t[t.DELETE_COMPONENT=2]="DELETE_COMPONENT",t[t.MAX_MESSAGE_TYPE=3]="MAX_MESSAGE_TYPE",e.HEADER_LENGTH=8,e.validate=n,e.readHeader=function(e){return n(e)?{length:e.readUint32(),type:e.readUint32()}:null}}(WireMessage||(WireMessage={}));var WireMessage$1=WireMessage,ComponentOperation,EntityUtils;function crdtSceneSystem({engine:e,transports:t}){const n=distExports.crdtProtocol(),i=[],r=[];function o(e){const t=Array.from(e);return e.length=0,t}return t.forEach((e=>{return e.onmessage=(t=e.type,function(e){const n=createByteBuffer({reading:{buffer:e,currentOffset:0}});for(;WireMessage$1.validate(n);){const e=n.currentReadOffset(),r=ComponentOperation.read(n),{type:o,entity:a,componentId:s,data:c,timestamp:l}=r;i.push({type:o,entity:a,componentId:s,data:c,timestamp:l,transportType:t,messageBuffer:n.buffer().subarray(e,n.currentReadOffset())})}});var t})),{createMessages:function(i){const a=o(r),s=createByteBuffer();for(const[r,o]of i)for(const i of o){const o=e.getComponent(i),c=o.has(r)?o.toBinary(r).toBinary():null,l=n.createEvent(r,i,c),u=s.currentWriteOffset(),d=o.has(r)?WireMessage$1.Enum.PUT_COMPONENT:WireMessage$1.Enum.DELETE_COMPONENT,f={type:d,componentId:i,entity:r,timestamp:l.timestamp};t.some((e=>e.filter(f)))&&(ComponentOperation.write(d,r,l.timestamp,o,s),a.push({...f,messageBuffer:s.buffer().subarray(u,s.currentWriteOffset())}))}const c=createByteBuffer();for(const e of t){c.resetBuffer();for(const t of a)e.filter(t)&&c.writeBuffer(t.messageBuffer,!1);c.size()&&e.send(c.toBinary())}},receiveMessages:function(){const a=o(i);for(const i of t){const t=createByteBuffer();for(const i of a){const{data:o,timestamp:a,componentId:s,entity:c,type:l}=i,u={key1:c,key2:s,data:o||null,timestamp:a},d=e.getComponent(s),f=n.processMessage(u);if(u!==f){const e=d.has(c)?WireMessage$1.Enum.PUT_COMPONENT:WireMessage$1.Enum.DELETE_COMPONENT;ComponentOperation.write(e,c,f.timestamp,d,t)}else{if(l===WireMessage$1.Enum.DELETE_COMPONENT)d.deleteFrom(c);else{const e=createByteBuffer({reading:{buffer:i.data,currentOffset:0}});d.upsertFromBinary(i.entity,e),d.clearDirty()}r.push(i)}}t.size()&&i.send(t.toBinary())}}}}function deepReadonly(e){return Object.freeze({...e})}function defineComponent(e,t,n){const i=new Map,r=new Set,o=createByteBuffer();function a(){return n?t.deserialize(createByteBuffer({writing:{buffer:o.buffer(),currentOffset:o.currentWriteOffset()}})):t.create()}function s(e){return{...a(),...e}}return n&&t.serialize(n,o),{_id:e,default:function(){return a()},isDirty:function(e){return r.has(e)},has:function(e){return i.has(e)},deleteFrom:function(e){const t=i.get(e);return i.delete(e),r.add(e),t||null},getOrNull:function(e){const t=i.get(e);return t?deepReadonly(t):null},get:function(t){const n=i.get(t);if(!n)throw new Error(`[getFrom] Component ${e} for ${t} not found`);return deepReadonly(n)},create:function(t,n){if(i.get(t))throw new Error(`[create] Component ${e} for ${t} already exists`);const o=void 0===n?a():s(n);return i.set(t,o),r.add(t),o},createOrReplace:function(e,t){const n=void 0===t?a():s(t);return i.set(e,n),r.add(e),n},getMutableOrNull:function(e){const t=i.get(e);return t?(r.add(e),t):null},getMutable:function(t){const n=this.getMutableOrNull(t);if(null===n)throw new Error(`[mutable] Component ${e} for ${t} not found`);return n},iterator:function*(){for(const[e,t]of i)yield[e,t]},dirtyIterator:function*(){for(const e of r)yield e},toBinary(n){const r=i.get(n);if(!r)throw new Error(`[toBinary] Component ${e} for ${n} not found`);const o=createByteBuffer();return t.serialize(r,o),o},writeToByteBuffer(n,r){const o=i.get(n);if(!o)throw new Error(`[writeToByteBuffer] Component ${e} for ${n} not found`);t.serialize(o,r)},updateFromBinary(t,n){if(!i.get(t))throw new Error(`[updateFromBinary] Component ${e} for ${t} not found`);return this.upsertFromBinary(t,n)},upsertFromBinary(e,n){const o=t.deserialize(n);return i.set(e,o),r.add(e),o},clearDirty:function(){r.clear()}}}function EntityContainer(){const e=Entity(EntityUtils.STATIC_ENTITIES_RANGE),t=Entity(EntityUtils.DYNAMIC_ENTITIES_RANGE);return{generateEntity:(n=!1)=>n?t.generateEntity():e.generateEntity(),removeEntity:n=>e.removeEntity(n)||t.removeEntity(n),isEntityExists:n=>EntityUtils.isReservedEntity(n)||e.getExistingEntities().has(n)||t.getExistingEntities().has(n),getExistingEntities:()=>new Set([...e.getExistingEntities(),...t.getExistingEntities()])}}function Entity(e){let t=e[0];const n=new Set;return{getExistingEntities:()=>new Set(n),generateEntity:function(){if(t>=e[1])throw new Error(`It fails trying to generate an entity out of range [${e[0]}, ${e[1]}].`);const i=t;return t++,n.add(i),i},removeEntity:function(e){return n.delete(e)}}}!function(e){e.MESSAGE_HEADER_LENGTH=20,e.write=function(t,n,i,r,o){const a=o.incrementWriteOffset(WireMessage$1.HEADER_LENGTH+e.MESSAGE_HEADER_LENGTH);t===WireMessage$1.Enum.PUT_COMPONENT&&r.writeToByteBuffer(n,o);const s=o.size()-a;o.setUint32(a,s),o.setUint32(a+4,t),o.setUint32(a+8,n),o.setUint32(a+12,r._id),o.setUint64(a+16,BigInt(i)),o.setUint32(a+24,s-e.MESSAGE_HEADER_LENGTH-WireMessage$1.HEADER_LENGTH)},e.read=function(e){const t=WireMessage$1.readHeader(e);if(!t)return null;const n={...t,entity:e.readUint32(),componentId:e.readInt32(),timestamp:Number(e.readUint64())};return t.type===WireMessage$1.Enum.DELETE_COMPONENT?n:{...n,data:e.readBuffer()}}}(ComponentOperation||(ComponentOperation={})),function(e){function t(e,t){return e>=t[0]&&e<=t[1]}e.MAX_ENTITIES=4294967295,e.DYNAMIC_ENTITIES_START_AT=1e5,e.RESERVED_STATIC_ENTITIES=512,e.RESERVED_ENTITIES_RANGE=[0,e.RESERVED_STATIC_ENTITIES-1],e.STATIC_ENTITIES_RANGE=[e.RESERVED_STATIC_ENTITIES,e.DYNAMIC_ENTITIES_START_AT-1],e.DYNAMIC_ENTITIES_RANGE=[e.DYNAMIC_ENTITIES_START_AT,e.MAX_ENTITIES],e.isDynamicEntity=function(n){return t(n,e.DYNAMIC_ENTITIES_RANGE)},e.isStaticEntity=function(n){return t(n,e.STATIC_ENTITIES_RANGE)},e.isReservedEntity=function(n){return t(n,e.RESERVED_ENTITIES_RANGE)}}(EntityUtils||(EntityUtils={}));const SYSTEMS_REGULAR_PRIORITY=1e5;function SystemContainer(){const e=[];function t(){e.sort(((e,t)=>t.priority-e.priority))}return{add:function(n,i,r){if(e.find((e=>e.fn===n)))throw new Error("System already added");if(r&&e.find((e=>e.name===r)))throw new Error("System name already used");e.push({fn:n,priority:i,name:r}),t()},remove:function(n){let i=-1;return i="string"==typeof n?e.findIndex((e=>e.name===n)):e.findIndex((e=>e.fn===n)),-1!==i&&(e.splice(i,1),t(),!0)},getSystems:()=>e}}function preEngine(){const e=EntityContainer(),t=new Map,n=new Map,i=SystemContainer();function r(t=!1){return e.generateEntity(t)}function o(e,n,i){if(t.get(n))throw new Error(`Component ${n} already declared`);const r=defineComponent(n,e,i);return t.set(n,r),r}return{entitiesComponent:n,componentsDefinition:t,addEntity:r,addDynamicEntity:function(){return r(!0)},removeEntity:function(n){for(const[,e]of t)e.has(n)&&e.deleteFrom(n);return e.removeEntity(n)},addSystem:function(e,t=SYSTEMS_REGULAR_PRIORITY,n){i.add(e,t,n)},getSystems:function(){return i.getSystems()},removeSystem:function(e){return i.remove(e)},defineComponent:function(e,t,n){return o(exports.Schemas.Map(e),t,n)},defineComponentFromSchema:o,getEntitiesWith:function*(...e){for(const[t,...n]of function*(...e){const[t,...n]=e;for(const[i]of t.iterator()){let t=!0;for(const e of n)if(!e.has(i)){t=!1;break}t&&(yield[i,...e])}}(...e))yield[t,...n.map((e=>e.get(t)))]},getComponent:function(e){const n=t.get(e);if(!n)throw new Error(`Component ${e} not found. You need to declare the components at the beginnig of the engine declaration`);return n},removeComponentDefinition:function(e){t.delete(e)}}}function Engine({transports:e}={}){const t=preEngine(),n=crdtSceneSystem({engine:t,transports:e||[]}),i=defineSdkComponents(t);return{addEntity:t.addEntity,addDynamicEntity:t.addDynamicEntity,removeEntity:t.removeEntity,addSystem:t.addSystem,removeSystem:t.removeSystem,defineComponent:t.defineComponent,defineComponentFromSchema:t.defineComponentFromSchema,getEntitiesWith:t.getEntitiesWith,getComponent:t.getComponent,removeComponentDefinition:t.removeComponentDefinition,update:function(e){n.receiveMessages();for(const n of t.getSystems())n.fn(e);const r=[i.OnPointerDownResult,i.OnPointerUpResult],o=r.map((e=>e._id));for(const e of r)for(const[n]of t.getEntitiesWith(e))e.deleteFrom(n);const a=new Map;for(const[e,n]of t.componentsDefinition)if(!o.includes(e))for(const t of n.dirtyIterator())a.has(t)||a.set(t,new Set),a.get(t).add(e);n.createMessages(a);for(const[e,n]of t.componentsDefinition)n.clearDirty()},RootEntity:0,PlayerEntity:1,CameraEntity:2,baseComponents:i}}const UpdateTimestampStateSchema={timestampLastUpdate:exports.Schemas.Number,currentTimestamp:exports.Schemas.Number},WasEntityClickComponentID=1500,IsPointerEventActiveComponentID=1501,EventSystemPriority=1<<20;function wasEntityClickedGenerator(e){const t=e.defineComponent(UpdateTimestampStateSchema,WasEntityClickComponentID);return t.create(e.RootEntity),e.addSystem((()=>{const n=t.get(e.RootEntity);n.currentTimestamp>n.timestampLastUpdate&&(t.getMutable(e.RootEntity).timestampLastUpdate=n.currentTimestamp)}),EventSystemPriority),function(n,i){const r=e.baseComponents.PointerEventsResult.getOrNull(e.RootEntity);if(!r)return!1;const o=r.commands,a=findLastAction(o,1,i,n),s=findLastAction(o,0,i,n);if(!a)return!1;if(!s)return!1;const c=t.get(e.RootEntity);return a.timestamp<s.timestamp&&s.timestamp>c.timestampLastUpdate&&(t.getMutable(e.RootEntity).currentTimestamp=Math.max(s.timestamp,c.currentTimestamp),!0)}}function isPointerEventActiveGenerator(e){const t=e.defineComponent(UpdateTimestampStateSchema,IsPointerEventActiveComponentID);return t.create(e.RootEntity),e.addSystem((()=>{const n=t.get(e.RootEntity);n.currentTimestamp>n.timestampLastUpdate&&(t.getMutable(e.RootEntity).timestampLastUpdate=n.currentTimestamp)}),EventSystemPriority),function(n,i,r){const o=e.baseComponents.PointerEventsResult.getOrNull(e.RootEntity);if(!o)return!1;const a=findLastAction(o.commands,r,i,n);if(!a)return!1;const s=t.get(e.RootEntity);return a.timestamp>s.timestampLastUpdate&&(t.getMutable(e.RootEntity).currentTimestamp=Math.max(a.timestamp,s.currentTimestamp),!0)}}function findLastAction(e,t,n,i){let r;for(const o of e)o.button===n&&o.state===t&&(!i||o.hit&&i===o.hit.entityId)&&(!r||o.timestamp>=r.timestamp)&&(r=o);return r}function createNetworkTransport(){const e="network-transport";return{send:function(...e){},type:e,filter:t=>t.transportType!==e&&!!t}}var ECSComponentIDs;!function(e){e[e.Transform=1]="Transform",e[e.Animator=1042]="Animator",e[e.AudioSource=1020]="AudioSource",e[e.AvatarAttach=1073]="AvatarAttach",e[e.AvatarModifierArea=1070]="AvatarModifierArea",e[e.AvatarShape=1080]="AvatarShape",e[e.Billboard=1090]="Billboard",e[e.BoxShape=1013]="BoxShape",e[e.CameraMode=1072]="CameraMode",e[e.CameraModeArea=1071]="CameraModeArea",e[e.CylinderShape=1016]="CylinderShape",e[e.GltfContainer=1041]="GltfContainer",e[e.Material=1017]="Material",e[e.MeshCollider=1019]="MeshCollider",e[e.MeshRenderer=1018]="MeshRenderer",e[e.NFTShape=1040]="NFTShape",e[e.OnPointerDown=1060]="OnPointerDown",e[e.OnPointerDownResult=1066]="OnPointerDownResult",e[e.OnPointerUp=1061]="OnPointerUp",e[e.OnPointerUpResult=1065]="OnPointerUpResult",e[e.PlaneShape=1014]="PlaneShape",e[e.PointerEvents=1062]="PointerEvents",e[e.PointerEventsResult=1063]="PointerEventsResult",e[e.PointerLock=1074]="PointerLock",e[e.Raycast=1067]="Raycast",e[e.RaycastResult=1068]="RaycastResult",e[e.SphereShape=1015]="SphereShape",e[e.TextShape=1030]="TextShape",e[e.UiStyles=1053]="UiStyles",e[e.UiText=1052]="UiText",e[e.UiTransform=1050]="UiTransform",e[e.VisibilityComponent=1081]="VisibilityComponent"}(ECSComponentIDs||(ECSComponentIDs={}));const componentIds=Object.values(ECSComponentIDs).filter((e=>"number"==typeof e)).map(Number);function createRendererTransport(){if("undefined"==typeof dcl)throw new Error("Cannot create createRendererTransport without global dcl object");const e="renderer";return{type:e,send(e){dcl.callRpc("~system/ExperimentalAPI","sendToRenderer",[{data:new Uint8Array(e)}]).catch(dcl.error)},filter:t=>t.transportType!==e&&(!!componentIds.includes(t.componentId)&&!!t)}}class ObserverEventState{constructor(e,t=!1,n,i){this.initalize(e,t,n,i)}initalize(e,t=!1,n,i){return this.mask=e,this.skipNextObservers=t,this.target=n,this.currentTarget=i,this}}class Observer{constructor(e,t,n=null){this.callback=e,this.mask=t,this.scope=n,this.unregisterOnNextCall=!1,this._willBeUnregistered=!1}}class Observable{constructor(e){this._observers=new Array,this._onObserverAdded=null,this._eventState=new ObserverEventState(0),e&&(this._onObserverAdded=e)}add(e,t=-1,n=!1,i=null,r=!1){if(!e)return null;const o=new Observer(e,t,i);return o.unregisterOnNextCall=r,n?this._observers.unshift(o):this._observers.push(o),this._onObserverAdded&&this._onObserverAdded(o),o}addOnce(e){return this.add(e,void 0,void 0,void 0,!0)}remove(e){if(!e)return!1;return-1!==this._observers.indexOf(e)&&(this._deferUnregister(e),!0)}removeCallback(e,t){for(let n=0;n<this._observers.length;n++)if(this._observers[n].callback===e&&(!t||t===this._observers[n].scope))return this._deferUnregister(this._observers[n]),!0;return!1}notifyObservers(e,t=-1,n,i){if(!this._observers.length)return!0;const r=this._eventState;r.mask=t,r.target=n,r.currentTarget=i,r.skipNextObservers=!1,r.lastReturnValue=e;for(const n of this._observers)if(!n._willBeUnregistered&&(n.mask&t&&(n.scope?r.lastReturnValue=n.callback.apply(n.scope,[e,r]):r.lastReturnValue=n.callback(e,r),n.unregisterOnNextCall&&this._deferUnregister(n)),r.skipNextObservers))return!1;return!0}notifyObserversWithPromise(e,t=-1,n,i){let r=Promise.resolve(e);if(!this._observers.length)return r;const o=this._eventState;return o.mask=t,o.target=n,o.currentTarget=i,o.skipNextObservers=!1,this._observers.forEach((n=>{o.skipNextObservers||n._willBeUnregistered||n.mask&t&&(r=n.scope?r.then((t=>(o.lastReturnValue=t,n.callback.apply(n.scope,[e,o])))):r.then((t=>(o.lastReturnValue=t,n.callback(e,o)))),n.unregisterOnNextCall&&this._deferUnregister(n))})),r.then((()=>e))}notifyObserver(e,t,n=-1){const i=this._eventState;i.mask=n,i.skipNextObservers=!1,e.callback(t,i)}hasObservers(){return this._observers.length>0}clear(){this._observers=new Array,this._onObserverAdded=null}clone(){const e=new Observable;return e._observers=this._observers.slice(0),e}hasSpecificMask(e=-1){for(const t of this._observers)if(t.mask&e||t.mask===e)return!0;return!1}_deferUnregister(e){e.unregisterOnNextCall=!1,e._willBeUnregistered=!0,Promise.resolve().then.bind(Promise.resolve())((async()=>this._remove(e)))}_remove(e){if(!e)return!1;const t=this._observers.indexOf(e);return-1!==t&&(this._observers.splice(t,1),!0)}}function createSubscriber(e){return()=>{"undefined"!=typeof dcl&&dcl.subscribe(e)}}const onEnterSceneObservable=new Observable(createSubscriber("onEnterScene")),onEnterScene=onEnterSceneObservable,onLeaveSceneObservable=new Observable(createSubscriber("onLeaveScene")),onLeaveScene=onLeaveSceneObservable,onSceneReadyObservable=new Observable(createSubscriber("sceneStart")),onPlayerExpressionObservable=new Observable(createSubscriber("playerExpression")),onVideoEvent=new Observable(createSubscriber("videoEvent")),onProfileChanged=new Observable(createSubscriber("profileChanged")),onPlayerConnectedObservable=new Observable(createSubscriber("playerConnected")),onPlayerDisconnectedObservable=new Observable(createSubscriber("playerDisconnected")),onRealmChangedObservable=new Observable(createSubscriber("onRealmChanged")),onPlayerClickedObservable=new Observable(createSubscriber("playerClicked"));function _initEventObservables(){"undefined"!=typeof dcl&&dcl.onEvent((e=>{switch(e.type){case"onEnterScene":return void onEnterSceneObservable.notifyObservers(e.data);case"onLeaveScene":return void onLeaveSceneObservable.notifyObservers(e.data);case"sceneStart":return void onSceneReadyObservable.notifyObservers(e.data);case"playerExpression":return void onPlayerExpressionObservable.notifyObservers(e.data);case"videoEvent":{const t=e.data;return void onVideoEvent.notifyObservers(t)}case"profileChanged":return void onProfileChanged.notifyObservers(e.data);case"playerConnected":return void onPlayerConnectedObservable.notifyObservers(e.data);case"playerDisconnected":return void onPlayerDisconnectedObservable.notifyObservers(e.data);case"onRealmChanged":return void onRealmChangedObservable.notifyObservers(e.data);case"playerClicked":return void onPlayerClickedObservable.notifyObservers(e.data)}}))}const rendererTransport=createRendererTransport(),engine=Engine({transports:[rendererTransport,createNetworkTransport()]});if("undefined"!=typeof dcl){async function e(){const e=await dcl.callRpc("~system/ExperimentalAPI","messageFromRenderer",[]);if(e.data?.length&&rendererTransport.onmessage)for(const t of e.data)rendererTransport.onmessage(t)}dcl.loadModule("~system/ExperimentalAPI",{}).catch(dcl.error),dcl.onUpdate((t=>{e().catch(dcl.error).finally((()=>engine.update(t)))})),_initEventObservables()}const log=dcl.log,error=dcl.error;let wasEntityClickedFunc=null;function wasEntityClicked(e,t){return wasEntityClickedFunc||(wasEntityClickedFunc=wasEntityClickedGenerator(engine)),wasEntityClickedFunc(e,t)}let isPointerEventActiveFunc=null;function isPointerEventActive(e,t,n){return isPointerEventActiveFunc||(isPointerEventActiveFunc=isPointerEventActiveGenerator(engine)),isPointerEventActiveFunc(e,t,n)}function cyclicParentingChecker(e){const t=e.baseComponents.Transform;return()=>{for(const e of t.dirtyIterator()){let n=t.getOrNull(e);for(;n&&n.parent;){if(n.parent===e){dcl.error(`There is a cyclic parent with entity ${e}`);break}n=t.getOrNull(n.parent)}}}}const Transform=engine.baseComponents.Transform,Animator=engine.baseComponents.Animator,AudioSource=engine.baseComponents.AudioSource,AvatarAttach=engine.baseComponents.AvatarAttach,AvatarModifierArea=engine.baseComponents.AvatarModifierArea,AvatarShape=engine.baseComponents.AvatarShape,Billboard=engine.baseComponents.Billboard,BoxShape=engine.baseComponents.BoxShape,CameraMode=engine.baseComponents.CameraMode,CameraModeArea=engine.baseComponents.CameraModeArea,CylinderShape=engine.baseComponents.CylinderShape,GltfContainer=engine.baseComponents.GltfContainer,Material=engine.baseComponents.Material,MeshCollider=engine.baseComponents.MeshCollider,MeshRenderer=engine.baseComponents.MeshRenderer,NFTShape=engine.baseComponents.NFTShape,OnPointerDown=engine.baseComponents.OnPointerDown,OnPointerDownResult=engine.baseComponents.OnPointerDownResult,OnPointerUp=engine.baseComponents.OnPointerUp,OnPointerUpResult=engine.baseComponents.OnPointerUpResult,PlaneShape=engine.baseComponents.PlaneShape,PointerEvents=engine.baseComponents.PointerEvents,PointerEventsResult=engine.baseComponents.PointerEventsResult,PointerLock=engine.baseComponents.PointerLock,Raycast=engine.baseComponents.Raycast,RaycastResult=engine.baseComponents.RaycastResult,SphereShape=engine.baseComponents.SphereShape,TextShape=engine.baseComponents.TextShape,UiStyles=engine.baseComponents.UiStyles,UiText=engine.baseComponents.UiText,UiTransform=engine.baseComponents.UiTransform,VisibilityComponent=engine.baseComponents.VisibilityComponent;var Components;exports.Components=void 0,Components=exports.Components||(exports.Components={}),Components.Transform=engine.baseComponents.Transform,Components.Animator=engine.baseComponents.Animator,Components.AudioSource=engine.baseComponents.AudioSource,Components.AvatarAttach=engine.baseComponents.AvatarAttach,Components.AvatarModifierArea=engine.baseComponents.AvatarModifierArea,Components.AvatarShape=engine.baseComponents.AvatarShape,Components.Billboard=engine.baseComponents.Billboard,Components.BoxShape=engine.baseComponents.BoxShape,Components.CameraMode=engine.baseComponents.CameraMode,Components.CameraModeArea=engine.baseComponents.CameraModeArea,Components.CylinderShape=engine.baseComponents.CylinderShape,Components.GltfContainer=engine.baseComponents.GltfContainer,Components.Material=engine.baseComponents.Material,Components.MeshCollider=engine.baseComponents.MeshCollider,Components.MeshRenderer=engine.baseComponents.MeshRenderer,Components.NFTShape=engine.baseComponents.NFTShape,Components.OnPointerDown=engine.baseComponents.OnPointerDown,Components.OnPointerDownResult=engine.baseComponents.OnPointerDownResult,Components.OnPointerUp=engine.baseComponents.OnPointerUp,Components.OnPointerUpResult=engine.baseComponents.OnPointerUpResult,Components.PlaneShape=engine.baseComponents.PlaneShape,Components.PointerEvents=engine.baseComponents.PointerEvents,Components.PointerEventsResult=engine.baseComponents.PointerEventsResult,Components.PointerLock=engine.baseComponents.PointerLock,Components.Raycast=engine.baseComponents.Raycast,Components.RaycastResult=engine.baseComponents.RaycastResult,Components.SphereShape=engine.baseComponents.SphereShape,Components.TextShape=engine.baseComponents.TextShape,Components.UiStyles=engine.baseComponents.UiStyles,Components.UiText=engine.baseComponents.UiText,Components.UiTransform=engine.baseComponents.UiTransform,Components.VisibilityComponent=engine.baseComponents.VisibilityComponent;let communicationsController=null,communicationsControllerPromise=null,_messageObserver=null;function getMessageObserver(){return _messageObserver||(_messageObserver=new Observable),_messageObserver}function ensureCommunicationsController(){if(!communicationsControllerPromise){communicationsControllerPromise=dcl.loadModule("~system/CommunicationsController",{}),communicationsControllerPromise.then((e=>{communicationsController=e}));const e=getMessageObserver();dcl.subscribe("comms"),dcl.onEvent((t=>{"comms"===t.type&&e.notifyObservers(t.data)}))}return communicationsControllerPromise}class MessageBus{constructor(){this.messageQueue=[],this.connected=!1,this.flushing=!1,ensureCommunicationsController().then((()=>{this.connected=!0,this.flush()}))}on(e,t){return getMessageObserver().add((n=>{try{const i=JSON.parse(n.message);i.message===e&&t(i.payload,n.sender)}catch(n){dcl.error("Error parsing comms message "+(n.message||""),n)}}))}sendRaw(e){this.messageQueue.push(e),this.connected&&this.flush()}emit(e,t){const n=JSON.stringify({message:e,payload:t});this.sendRaw(n),getMessageObserver().notifyObservers({message:n,sender:"self"})}flush(){if(0===this.messageQueue.length)return;if(!this.connected)return;if(!communicationsController)return;if(this.flushing)return;const e=this.messageQueue.shift();this.flushing=!0,dcl.callRpc(communicationsController.rpcHandle,"send",[e]).then((e=>{this.flushing=!1,this.flush()}),(e=>{this.flushing=!1}))}}exports.Animator=Animator,exports.AudioSource=AudioSource,exports.AvatarAttach=AvatarAttach,exports.AvatarModifierArea=AvatarModifierArea,exports.AvatarShape=AvatarShape,exports.Billboard=Billboard,exports.BoxShape=BoxShape,exports.CameraMode=CameraMode,exports.CameraModeArea=CameraModeArea,exports.CylinderShape=CylinderShape,exports.DEG2RAD=distExports$1.DEG2RAD,exports.Engine=Engine,exports.GltfContainer=GltfContainer,exports.Material=Material,exports.MeshCollider=MeshCollider,exports.MeshRenderer=MeshRenderer,exports.MessageBus=MessageBus,exports.NFTShape=NFTShape,exports.Observable=Observable,exports.Observer=Observer,exports.ObserverEventState=ObserverEventState,exports.OnPointerDown=OnPointerDown,exports.OnPointerDownResult=OnPointerDownResult,exports.OnPointerUp=OnPointerUp,exports.OnPointerUpResult=OnPointerUpResult,exports.PlaneShape=PlaneShape,exports.PointerEvents=PointerEvents,exports.PointerEventsResult=PointerEventsResult,exports.PointerLock=PointerLock,exports.Quaternion=distExports$1.Quaternion,exports.RAD2DEG=distExports$1.RAD2DEG,exports.Raycast=Raycast,exports.RaycastResult=RaycastResult,exports.SphereShape=SphereShape,exports.TextShape=TextShape,exports.Transform=Transform,exports.UiStyles=UiStyles,exports.UiText=UiText,exports.UiTransform=UiTransform,exports.Vector3=distExports$1.Vector3,exports.VisibilityComponent=VisibilityComponent,exports._initEventObservables=_initEventObservables,exports.cyclicParentingChecker=cyclicParentingChecker,exports.deepReadonly=deepReadonly,exports.engine=engine,exports.error=error,exports.getMessageObserver=getMessageObserver,exports.isPointerEventActive=isPointerEventActive,exports.isPointerEventActiveGenerator=isPointerEventActiveGenerator,exports.log=log,exports.onEnterScene=onEnterScene,exports.onEnterSceneObservable=onEnterSceneObservable,exports.onLeaveScene=onLeaveScene,exports.onLeaveSceneObservable=onLeaveSceneObservable,exports.onPlayerClickedObservable=onPlayerClickedObservable,exports.onPlayerConnectedObservable=onPlayerConnectedObservable,exports.onPlayerDisconnectedObservable=onPlayerDisconnectedObservable,exports.onPlayerExpressionObservable=onPlayerExpressionObservable,exports.onProfileChanged=onProfileChanged,exports.onRealmChangedObservable=onRealmChangedObservable,exports.onSceneReadyObservable=onSceneReadyObservable,exports.onVideoEvent=onVideoEvent,exports.wasEntityClicked=wasEntityClicked,exports.wasEntityClickedGenerator=wasEntityClickedGenerator,Object.defineProperty(exports,"__esModule",{value:!0})})(this.self=this.self||{});