"use strict";const getGlobalThis=function(){if("undefined"!=typeof globalThis)return globalThis;if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if(void 0!==this)return this;throw new Error("Unable to locate global `this`")},globalObject=getGlobalThis();var loader;!function(W){let H=0;const Y=[],j=[],Q={baseUrl:""},X={};function c(W,Y,j){let Q=null,Z={},J=null;"function"==typeof W?Z=W:"string"==typeof W?(Q=W,"function"==typeof Y?Z=Y:Y instanceof Array&&(J=Y,Z=j)):W instanceof Array&&(J=W,"function"==typeof Y&&(Z=Y)),J=J||["require","exports","module"],null===Q&&(Q="unnamed-module-"+H++),Q=g(Q),J=(J||[]).map((W=>function(W,H){return W?b(H,W):H}(Q,W))),X[Q]||(X[Q]={name:Q,parent:null,dclamd:1,dependencies:J,handlers:[],exports:{},dependants:new Set}),X[Q].dependencies=J,p(J,(function(W){const H=X[Q];if(!H)throw new Error("Could not access registered module "+Q);let Y=H.exports;Y="function"==typeof Z?Z.apply(globalObject,W)||Y:Z,H.exports=Y,d(Q)}),(W=>{if("function"!=typeof onerror)throw W;onerror(W)}),Q)}function d(W){const H=X[W];if(!H)throw new Error("Could not access registered module "+W);H.dclamd=2;const Y=H.handlers;if(Y&&Y.length)for(let H=0;H<Y.length;H++)Y[H](X[W])}function u(W,H,Y){if(!X[W])return null;if(W===H||50===Y)return[W];const j=X[W].dependencies;for(let Q=0,X=j.length;Q<X;Q++){const X=u(j[Q],H,Y+1);if(null!==X)return X.push(W),X}return null}function a(W,H){const Y=X[W];if(!Y)return!1;const j={};for(const W in X)j[W]=!1;const Q=[];for(Q.push(Y),j[W]=!0;Q.length>0;){const W=Q.shift().dependencies;if(W)for(let Y=0,Z=W.length;Y<Z;Y++){const Z=W[Y];if(Z===H)return!0;const J=X[Z];J&&!j[Z]&&(j[Z]=!0,Q.push(J))}}return!1}function p(W,H,Y,Q){const Z=new Array(W.length).fill(null);let J=0,K=!1;if("string"==typeof W){if(X[W]){if(1===X[W].dclamd)throw new Error(`Trying to load ${W} from ${Q}. The first module is still loading.`);return X[W]}throw new Error(W+" has not been defined. Please include it as a dependency in "+Q+"'s define()")}const ee=W.length;for(let te=0;te<ee;te++)switch(W[te]){case"require":const h=function(W,H,Y){return p(W,H,Y,Q)};h.toUrl=function(W){return b(W,Q)},Z[te]=h,J++;break;case"exports":if(!X[Q])throw new Error("Parent module "+Q+" not registered yet");Z[te]=X[Q].exports,J++;break;case"module":Z[te]={id:Q,uri:b(Q)},J++;break;default:{const ne=W[te],m=()=>{Z[te]=X[ne].exports,J++,J===ee&&H&&(K=!0,H(Z))};if(a(ne,Q)){const W=u(ne,Q,0);W&&(W.reverse(),W.push(ne),j.push(W)),w(ne,(()=>{}),Y,Q),m()}else w(ne,m,Y,Q);break}}!K&&J===ee&&H&&H(Z)}function h(W,H){return function(){return dcl.callRpc(W,H.name,Y.slice.call(arguments,0))}}function w(W,H,Y,j){if(X[W])return X[W].dependants.add(j),void(1===X[W].dclamd?H&&X[W].handlers.push(H):H&&H(X[W]));if(X[W]={name:W,parent:j,dclamd:1,handlers:[H],dependencies:[],dependants:new Set([j]),exports:{}},0===W.indexOf("@")||0===W.indexOf("~")){const H=X[W].exports;if("function"!=typeof dcl.loadModule)throw new Error("Asynchronous modules will not work because loadModule function is not present");dcl.loadModule(W,H).then((Y=>{for(const W in Y.methods){const j=Y.methods[W];H[j.name]=h(Y.rpcHandle,j)}d(W)})).catch((W=>{Y(W)}))}}function g(W){let H,Y=W;for(H=/\/\.\//;H.test(Y);)Y=Y.replace(H,"/");for(Y=Y.replace(/^\.\//g,""),H=/\/(([^\/])|([^\/][^\/\.])|([^\/\.][^\/])|([^\/][^\/][^\/]+))\/\.\.\//;H.test(Y);)Y=Y.replace(H,"/");return Y=Y.replace(/^(([^\/])|([^\/][^\/\.])|([^\/\.][^\/])|([^\/][^\/][^\/]+))\/\.\.\//,""),Y=Y.replace(/^\//g,""),Y}function b(W,H){switch(W){case"require":case"exports":case"module":return W}return H?function(W,H){let Y=W;if(!Y.startsWith("@")&&!Y.startsWith("~")&&(Y.startsWith("./")||Y.startsWith("../"))){const W=H.split("/");W.pop(),Y=g(W.join("/")+"/"+Y)}return Y}(W,H):g(W)}W.config=function(W){if("object"==typeof W)for(const H in W)W.hasOwnProperty(H)&&(Q[H]=W[H])},W.define=c,function(W){W.amd={},W.modules=X}(c=W.define||(W.define={})),W.require=p,"undefined"!=typeof dcl&&dcl.onStart((()=>{const W=new Set,H=[];for(const Y in X)X[Y]&&(1===X[Y].dclamd&&H.push(X[Y]),X[Y].dependencies.forEach((H=>{"require"!==H&&"exports"!==H&&"module"!==H&&(X[H]||W.add(H))})));const Y=[];if(j.length&&Y.push(`\n> Cyclic dependencies: ${j.map((W=>"\n  - "+W.join(" -> "))).join("")}`),W.size&&Y.push(`\n> Undeclared/unknown modules: ${Array.from(W).map((W=>"\n  - "+W)).join("")}`),H.length&&Y.push(`\n> These modules didn't load: ${H.map((W=>"\n  - "+W.name)).join("")}.\n`),Y.length)throw new Error(Y.join("\n"))})),p.toUrl=b}(loader||(loader={})),globalObject.define=loader.define,globalObject.dclamd=loader,function(W){var H="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},Y={},j={},Q={},X={},Z;function requireTypes$1(){return Z||(Z=1,Object.defineProperty(X,"__esModule",{value:!0}),X.RAD2DEG=X.DEG2RAD=X.Epsilon=X.ToLinearSpace=X.ToGammaSpace=void 0,X.ToGammaSpace=1/2.2,X.ToLinearSpace=2.2,X.Epsilon=1e-6,X.DEG2RAD=Math.PI/180,X.RAD2DEG=360/(2*Math.PI)),X}var J={},K,ee;function requireScalar(){return K||(K=1,W=J,Object.defineProperty(W,"__esModule",{value:!0}),W.Scalar=void 0,function(W){function t(W){const H=+W;return 0===H||isNaN(H)?H:H>0?1:-1}function n(W,H=0,Y=1){return Math.min(Y,Math.max(H,W))}function r(W,H){return W-Math.floor(W/H)*H}function o(W,H){let Y=r(H-W,360);return Y>180&&(Y-=360),Y}function i(W,H,Y){let j=0;return j=Math.abs(H-W)<=Y?H:W+t(H-W)*Y,j}W.TwoPi=2*Math.PI,W.withinEpsilon=function(W,H,Y=1401298e-51){const j=W-H;return-Y<=j&&j<=Y},W.toHex=function(W){const H=W.toString(16);return W<=15?("0"+H).toUpperCase():H.toUpperCase()},W.sign=t,W.clamp=n,W.log2=function(W){return Math.log(W)*Math.LOG2E},W.repeat=r,W.normalize=function(W,H,Y){return(W-H)/(Y-H)},W.denormalize=function(W,H,Y){return W*(Y-H)+H},W.deltaAngle=o,W.pingPong=function(W,H){const Y=r(W,2*H);return H-Math.abs(Y-H)},W.smoothStep=function(W,H,Y){let j=n(Y);return j=-2*j*j*j+3*j*j,H*j+W*(1-j)},W.moveTowards=i,W.moveTowardsAngle=function(W,H,Y){const j=o(W,H);let Q=0;return Q=-Y<j&&j<Y?H:i(W,W+j,Y),Q},W.lerp=function(W,H,Y){return W+(H-W)*Y},W.lerpAngle=function(W,H,Y){let j=r(H-W,360);return j>180&&(j-=360),W+j*n(Y)},W.inverseLerp=function(W,H,Y){let j=0;return j=W!==H?n((Y-W)/(H-W)):0,j},W.hermite=function(W,H,Y,j,Q){const X=Q*Q,Z=Q*X;return W*(2*Z-3*X+1)+Y*(-2*Z+3*X)+H*(Z-2*X+Q)+j*(Z-X)},W.randomRange=function(W,H){return W===H?W:Math.random()*(H-W)+W},W.rangeToPercent=function(W,H,Y){return(W-H)/(Y-H)},W.percentToRange=function(W,H,Y){return(Y-H)*W+H},W.normalizeRadians=function(H){return H-W.TwoPi*Math.floor((H+Math.PI)/W.TwoPi)}}(W.Scalar||(W.Scalar={}))),J;var W}function requireVector3(){return ee||(ee=1,function(W){Object.defineProperty(W,"__esModule",{value:!0}),W.Vector3=void 0;const H=requireTypes$1(),Y=requireQuaternion(),j=requireScalar();!function(W){function o(W=0,H=0,Y=0){return{x:W,y:H,z:Y}}function i(W,H){return{x:W.x+H.x,y:W.y+H.y,z:W.z+H.z}}function a(W,H){H.x=W.x,H.y=W.y,H.z=W.z}function s(W,H,Y,j){j.x=W,j.y=H,j.z=Y}function c(W){return o(W.x,W.y,W.z)}function u(W,H=0){return o(W[H],W[H+1],W[H+2])}function l(W,H,Y){Y.x=W[H],Y.y=W[H+1],Y.z=W[H+2]}function f(W){return Math.sqrt(W.x*W.x+W.y*W.y+W.z*W.z)}function d(W,H,Y){Y.x=W.x*H,Y.y=W.y*H,Y.z=W.z*H}function m(W,H){const Y=o(0,0,0);return h(W,H,Y),Y}function h(W,H,Y){0!==H&&1!==H?d(W,1/H,Y):a(W,Y)}function p(W){return m(W,f(W))}function g(W,H){return W.x*H.x+W.y*H.y+W.z*H.z}function y(W,H,Y){const{x:j,y:Q,z:X}=W,Z=H._m,J=1/(Z[3]*j+Z[7]*Q+Z[11]*X+Z[15]);Y.x=(Z[0]*j+Z[4]*Q+Z[8]*X+Z[12])*J,Y.y=(Z[1]*j+Z[5]*Q+Z[9]*X+Z[13])*J,Y.z=(Z[2]*j+Z[6]*Q+Z[10]*X+Z[14])*J}function b(W,H,Y){const{x:j,y:Q,z:X}=W,{x:Z,y:J,z:K,w:ee}=H,te=ee*j+J*X-K*Q,ne=ee*Q+K*j-Z*X,re=ee*X+Z*Q-J*j,oe=-Z*j-J*Q-K*X;Y.x=te*ee+oe*-Z+ne*-K-re*-J,Y.y=ne*ee+oe*-J+re*-Z-te*-K,Y.z=re*ee+oe*-K+te*-J-ne*-Z}function v(W,H,Y,j){j.x=W.x+(H.x-W.x)*Y,j.y=W.y+(H.y-W.y)*Y,j.z=W.z+(H.z-W.z)*Y}function E(W,H,Y){Y.x=W.y*H.z-W.z*H.y,Y.y=W.z*H.x-W.x*H.z,Y.z=W.x*H.y-W.y*H.x}function T(W,H,Y){return x(W.x,W.y,W.z,H,Y)}function x(W,H,Y,j,Q){const X=j._m,Z=W*X[0]+H*X[4]+Y*X[8]+X[12],J=W*X[1]+H*X[5]+Y*X[9]+X[13],K=W*X[2]+H*X[6]+Y*X[10]+X[14],ee=1/(W*X[3]+H*X[7]+Y*X[11]+X[15]);Q.x=Z*ee,Q.y=J*ee,Q.z=K*ee}function _(W,H,Y){R(W.x,W.y,W.z,H,Y)}function R(W,H,Y,j,Q){const X=j._m;Q.x=W*X[0]+H*X[4]+Y*X[8],Q.y=W*X[1]+H*X[5]+Y*X[9],Q.z=W*X[2]+H*X[6]+Y*X[10]}function M(W,H,Y,j){let Q=W.x;Q=Q>Y.x?Y.x:Q,Q=Q<H.x?H.x:Q;let X=W.y;X=X>Y.y?Y.y:X,X=X<H.y?H.y:X;let Z=W.z;Z=Z>Y.z?Y.z:Z,Z=Z<H.z?H.z:Z,s(Q,X,Z,j)}function B(W,H){const Y=W.x-H.x,j=W.y-H.y,Q=W.z-H.z;return Y*Y+j*j+Q*Q}function A(W,H,j,Q){const X=Y.Quaternion.create();Y.Quaternion.fromAxisToRotationQuaternionToRef(W,H,j,X),a(Y.Quaternion.toEulerAngles(X),Q)}function C(W,H,Y){Y.x=W.x*H.x,Y.y=W.y*H.y,Y.z=W.z*H.z}function w(W,H,Y,j,Q){Q.x=W.x*H,Q.y=W.y*Y,Q.z=W.z*j}function S(W,H,Y,j,Q){H>W.x?Q.x=H:Q.x=W.x,Y>W.y?Q.y=Y:Q.y=W.y,j>W.z?Q.z=j:Q.z=W.z}function P(W,H,Y,j,Q){H<W.x?Q.x=H:Q.x=W.x,Y<W.y?Q.y=Y:Q.y=W.y,j<W.z?Q.z=j:Q.z=W.z}function k(){return o(0,0,0)}W.isNonUniform=function(W){const H=Math.abs(W.x);return H!==Math.abs(W.y)||H!==Math.abs(W.z)},W.create=o,W.add=i,W.addToRef=function(W,H,Y){Y.x=W.x+H.x,Y.y=W.y+H.y,Y.z=W.z+H.z},W.subtract=function(W,H){return{x:W.x-H.x,y:W.y-H.y,z:W.z-H.z}},W.subtractToRef=function(W,H,Y){Y.x=W.x-H.x,Y.y=W.y-H.y,Y.z=W.z-H.z},W.subtractFromFloatsToRef=function(W,H,Y,j,Q){Q.x=W.x-H,Q.y=W.y-Y,Q.z=W.z-j},W.negate=function(W){return{x:-W.x,y:-W.y,z:-W.z}},W.copyFrom=a,W.copyFromFloats=s,W.clone=c,W.getClipFactor=function(W,H,Y,j){const Q=g(W,Y)-j;return Q/(Q-(g(H,Y)-j))},W.getAngleBetweenVectors=function(W,H,Y){const j=p(W),Q=p(H),X=g(j,Q),Z=o();return E(j,Q,Z),g(Z,Y)>0?Math.acos(X):-Math.acos(X)},W.fromArray=u,W.fromFloatArray=function(W,H){return u(W,H)},W.fromArrayToRef=l,W.fromFloatArrayToRef=function(W,H,Y){return l(W,H,Y)},W.length=f,W.lengthSquared=function(W){return W.x*W.x+W.y*W.y+W.z*W.z},W.scaleToRef=d,W.scale=function(W,H){return o(W.x*H,W.y*H,W.z*H)},W.normalizeFromLength=m,W.normalizeFromLengthToRef=h,W.normalize=p,W.normalizeToRef=function(W,H){h(W,f(W),H)},W.dot=g,W.applyMatrix4=function(W,H){const Y=c(W);return y(W,H,Y),Y},W.applyMatrix4ToRef=y,W.rotate=function(W,H){const Y=o();return b(W,H,Y),Y},W.rotateToRef=b,W.lerp=function(W,H,Y){const j=o(0,0,0);return v(W,H,Y,j),j},W.lerpToRef=v,W.cross=function(W,H){const Y=k();return E(W,H,Y),Y},W.crossToRef=E,W.transformCoordinates=function(W,H){const Y=k();return T(W,H,Y),Y},W.transformCoordinatesToRef=T,W.transformCoordinatesFromFloatsToRef=x,W.transformNormal=function(W,H){const Y=k();return _(W,H,Y),Y},W.transformNormalToRef=_,W.transformNormalFromFloatsToRef=R,W.catmullRom=function(W,H,Y,j,Q){const X=Q*Q,Z=Q*X;return o(.5*(2*H.x+(-W.x+Y.x)*Q+(2*W.x-5*H.x+4*Y.x-j.x)*X+(-W.x+3*H.x-3*Y.x+j.x)*Z),.5*(2*H.y+(-W.y+Y.y)*Q+(2*W.y-5*H.y+4*Y.y-j.y)*X+(-W.y+3*H.y-3*Y.y+j.y)*Z),.5*(2*H.z+(-W.z+Y.z)*Q+(2*W.z-5*H.z+4*Y.z-j.z)*X+(-W.z+3*H.z-3*Y.z+j.z)*Z))},W.clamp=function(W,H,Y){const j=o();return M(W,H,Y,j),j},W.clampToRef=M,W.hermite=function(W,H,Y,j,Q){const X=Q*Q,Z=Q*X,J=2*Z-3*X+1,K=-2*Z+3*X,ee=Z-2*X+Q,te=Z-X;return o(W.x*J+Y.x*K+H.x*ee+j.x*te,W.y*J+Y.y*K+H.y*ee+j.y*te,W.z*J+Y.z*K+H.z*ee+j.z*te)},W.minimize=function(W,H){const Y=o();return P(H,W.x,W.y,W.z,Y),Y},W.maximize=function(W,H){const Y=o();return S(W,H.x,H.y,H.z,Y),Y},W.distance=function(W,H){return Math.sqrt(B(W,H))},W.distanceSquared=B,W.center=function(W,H){const Y=i(W,H);return d(Y,.5,Y),Y},W.rotationFromAxis=function(W,H,Y){const j=k();return A(W,H,Y,j),j},W.rotationFromAxisToRef=A,W.toString=function(W){return`(${W.x}, ${W.y}, ${W.z})`},W.getHashCode=function(W){let H=W.x||0;return H=397*H^(W.y||0),H=397*H^(W.z||0),H},W.equals=function(W,H){return W.x===H.x&&W.y===H.y&&W.z===H.z},W.equalsWithEpsilon=function(W,Y,Q=H.Epsilon){return j.Scalar.withinEpsilon(W.x,Y.x,Q)&&j.Scalar.withinEpsilon(W.y,Y.y,Q)&&j.Scalar.withinEpsilon(W.z,Y.z,Q)},W.equalsToFloats=function(W,H,Y,j){return W.x===H&&W.y===Y&&W.z===j},W.multiply=function(W,H){const Y=o();return C(W,H,Y),Y},W.multiplyToRef=C,W.multiplyByFloatsToRef=w,W.multiplyByFloats=function(W,H,Y,j){const Q=o();return w(W,H,Y,j,Q),Q},W.divide=function(W,H){return{x:W.x/H.x,y:W.y/H.y,z:W.z/H.z}},W.divideToRef=function(W,H,Y){Y.x=W.x/H.x,Y.y=W.y/H.y,Y.z=W.z/H.z},W.maximizeInPlaceFromFloatsToRef=S,W.minimizeInPlaceFromFloatsToRef=P,W.floor=function(W){return o(Math.floor(W.x),Math.floor(W.y),Math.floor(W.z))},W.fract=function(W){return o(W.x-Math.floor(W.x),W.y-Math.floor(W.y),W.z-Math.floor(W.z))},W.Zero=k,W.One=function(){return o(1,1,1)},W.Up=function(){return o(0,1,0)},W.Down=function(){return o(0,-1,0)},W.Forward=function(){return o(0,0,1)},W.Backward=function(){return o(0,0,-1)},W.Right=function(){return o(1,0,0)},W.Left=function(){return o(-1,0,0)},W.Random=function(){return o(Math.random(),Math.random(),Math.random())}}(W.Vector3||(W.Vector3={}))}(Q)),Q}var te={},ne={},re,oe,ie;function requirePlane(){return re||(re=1,function(W){Object.defineProperty(W,"__esModule",{value:!0}),W.Plane=void 0;const H=requireVector3(),Y=requireMatrix();!function(W){function r(W,Y,j,Q){return{normal:H.Vector3.create(W,Y,j),d:Q}}W.create=r,W.fromArray=function(W){return r(W[0],W[1],W[2],W[3])},W.fromPoints=function(W,H,Y){return r(0,0,0,0)},W.romPositionAndNormal=function(W,Y){const j=r(0,0,0,0);return j.normal=H.Vector3.normalize(Y),j.d=-(Y.x*W.x+Y.y*W.y+Y.z*W.z),j},W.signedDistanceToPlaneFromPositionAndNormal=function(W,Y,j){const Q=-(Y.x*W.x+Y.y*W.y+Y.z*W.z);return H.Vector3.dot(j,Y)+Q},W.asArray=function(W){return[W.normal.x,W.normal.y,W.normal.z,W.d]},W.clone=function(W){return r(W.normal.x,W.normal.y,W.normal.z,W.d)},W.getHashCode=function(W){return 0},W.normalize=function(W){const H=r(0,0,0,0),Y=Math.sqrt(W.normal.x*W.normal.x+W.normal.y*W.normal.y+W.normal.z*W.normal.z);let j=0;return 0!==Y&&(j=1/Y),H.normal.x=W.normal.x*j,H.normal.y=W.normal.y*j,H.normal.z=W.normal.z*j,H.d*=j,W},W.transform=function(W,H){const j=Y.Matrix.create();Y.Matrix.transposeToRef(H,j);const Q=j._m,X=W.normal.x,Z=W.normal.y,J=W.normal.z,K=W.d;return r(X*Q[0]+Z*Q[1]+J*Q[2]+K*Q[3],X*Q[4]+Z*Q[5]+J*Q[6]+K*Q[7],X*Q[8]+Z*Q[9]+J*Q[10]+K*Q[11],X*Q[12]+Z*Q[13]+J*Q[14]+K*Q[15])},W.dotCoordinate=function(W,H){return W.normal.x*H.x+W.normal.y*H.y+W.normal.z*H.z+W.d},W.copyFromPoints=function(W,Y,j){const Q=Y.x-W.x,X=Y.y-W.y,Z=Y.z-W.z,J=j.x-W.x,K=j.y-W.y,ee=j.z-W.z,te=X*ee-Z*K,ne=Z*J-Q*ee,re=Q*K-X*J,oe=Math.sqrt(te*te+ne*ne+re*re);let ie;ie=0!==oe?1/oe:0;const ae=H.Vector3.create(te*ie,ne*ie,re*ie);return{normal:ae,d:-(ae.x*W.x+ae.y*W.y+ae.z*W.z)}},W.isFrontFacingTo=function(W,Y,j){return H.Vector3.dot(W.normal,Y)<=j},W.signedDistanceTo=function(W,Y){return H.Vector3.dot(Y,W.normal)+W.d}}(W.Plane||(W.Plane={}))}(ne)),ne}function requireMatrix(){return oe||(oe=1,function(W){Object.defineProperty(W,"__esModule",{value:!0}),W.Matrix=void 0;const H=requireVector3(),Y=requireQuaternion(),j=requirePlane();!function(W){W.m=function(W){return W._m};let Q=0;const X={};function a(){const W={updateFlag:0,isIdentity:!1,isIdentity3x2:!0,_isIdentityDirty:!0,_isIdentity3x2Dirty:!0,_m:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]};return V(W,!1),W}function s(W,H,Y){for(let j=0;j<16;j++)Y._m[j]=W[j+H];P(Y)}function c(W,H,Y,j,Q,X,Z,J,K,ee,te,ne,re,oe,ie,ae,se){const ce=se._m;ce[0]=W,ce[1]=H,ce[2]=Y,ce[3]=j,ce[4]=Q,ce[5]=X,ce[6]=Z,ce[7]=J,ce[8]=K,ce[9]=ee,ce[10]=te,ce[11]=ne,ce[12]=re,ce[13]=oe,ce[14]=ie,ce[15]=ae,P(se)}function u(W,H,Y,j,Q,X,Z,J,K,ee,te,ne,re,oe,ie,ae){const se=a(),ce=se._m;return ce[0]=W,ce[1]=H,ce[2]=Y,ce[3]=j,ce[4]=Q,ce[5]=X,ce[6]=Z,ce[7]=J,ce[8]=K,ce[9]=ee,ce[10]=te,ce[11]=ne,ce[12]=re,ce[13]=oe,ce[14]=ie,ce[15]=ae,P(se),se}function l(W,H,Y,j){const Q=[a(),a(),a()];y(W.x,W.y,W.z,Q[1]),S(H,Q[0]),L(Q[1],Q[0],j),z(j,Y)}function f(){const W=u(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1);return V(W,!0),W}function d(W,H){const Y=Math.sin(W),j=Math.cos(W);c(1,0,0,0,0,j,Y,0,0,-Y,j,0,0,0,0,1,H),V(H,1===j&&0===Y)}function m(W,H){const Y=Math.sin(W),j=Math.cos(W);c(j,0,-Y,0,0,1,0,0,Y,0,j,0,0,0,0,1,H),V(H,1===j&&0===Y)}function h(W,H){const Y=Math.sin(W),j=Math.cos(W);c(j,Y,0,0,-Y,j,0,0,0,0,1,0,0,0,0,1,H),V(H,1===j&&0===Y)}function p(W,Y,j){const Q=Math.sin(-Y),X=Math.cos(-Y),Z=1-X,J=H.Vector3.normalize(W),K=j._m;K[0]=J.x*J.x*Z+X,K[1]=J.x*J.y*Z-J.z*Q,K[2]=J.x*J.z*Z+J.y*Q,K[3]=0,K[4]=J.y*J.x*Z+J.z*Q,K[5]=J.y*J.y*Z+X,K[6]=J.y*J.z*Z-J.x*Q,K[7]=0,K[8]=J.z*J.x*Z-J.y*Q,K[9]=J.z*J.y*Z+J.x*Q,K[10]=J.z*J.z*Z+X,K[11]=0,K[12]=0,K[13]=0,K[14]=0,K[15]=1,P(j)}function g(W,H,j,Q){const X=Y.Quaternion.Zero();Y.Quaternion.fromRotationYawPitchRollToRef(W,H,j,X),S(X,Q)}function y(W,H,Y,j){c(W,0,0,0,0,H,0,0,0,0,Y,0,0,0,0,1,j),V(j,1===W&&1===H&&1===Y)}function b(W,H,Y,j){c(1,0,0,0,0,1,0,0,0,0,1,0,W,H,Y,1,j),V(j,0===W&&0===H&&0===Y)}function v(W,H,Y,j){for(let Q=0;Q<16;Q++)j._m[Q]=W._m[Q]*(1-Y)+H._m[Q]*Y;P(j)}function E(W,j,Q,X){const Z=H.Vector3.Zero(),J=Y.Quaternion.Zero(),K=H.Vector3.Zero();q(W,Z,J,K);const ee=H.Vector3.Zero(),te=Y.Quaternion.Zero(),ne=H.Vector3.Zero();q(j,ee,te,ne);const re=H.Vector3.Zero();H.Vector3.lerpToRef(Z,ee,Q,re);const oe=Y.Quaternion.Zero();Y.Quaternion.slerpToRef(J,te,Q,oe);const ie=H.Vector3.Zero();H.Vector3.lerpToRef(K,ne,Q,ie),l(re,oe,ie,X)}function T(W,Y,j,Q){const X=H.Vector3.Zero(),Z=H.Vector3.Zero(),J=H.Vector3.Zero();H.Vector3.subtractToRef(Y,W,J),H.Vector3.normalizeToRef(J,J),H.Vector3.crossToRef(j,J,X);const K=H.Vector3.lengthSquared(X);0===K?X.x=1:H.Vector3.normalizeFromLengthToRef(X,Math.sqrt(K),X),H.Vector3.crossToRef(J,X,Z),H.Vector3.normalizeToRef(Z,Z);const ee=-H.Vector3.dot(X,W),te=-H.Vector3.dot(Z,W),ne=-H.Vector3.dot(J,W);c(X.x,Z.x,J.x,0,X.y,Z.y,J.y,0,X.z,Z.z,J.z,0,ee,te,ne,1,Q)}function x(W,Y,j,Q){const X=H.Vector3.Zero(),Z=H.Vector3.Zero(),J=H.Vector3.Zero();H.Vector3.subtractToRef(W,Y,J),H.Vector3.normalizeToRef(J,J),H.Vector3.crossToRef(j,J,X);const K=H.Vector3.lengthSquared(X);0===K?X.x=1:H.Vector3.normalizeFromLengthToRef(X,Math.sqrt(K),X),H.Vector3.crossToRef(J,X,Z),H.Vector3.normalizeToRef(Z,Z);const ee=-H.Vector3.dot(X,W),te=-H.Vector3.dot(Z,W),ne=-H.Vector3.dot(J,W);c(X.x,Z.x,J.x,0,X.y,Z.y,J.y,0,X.z,Z.z,J.z,0,ee,te,ne,1,Q)}function _(W,H,Y,j,Q){const X=2/W,Z=2/H,J=2/(j-Y),K=-(j+Y)/(j-Y);c(X,0,0,0,0,Z,0,0,0,0,J,0,0,0,K,1,Q),V(Q,1===X&&1===Z&&1===J&&0===K)}function R(W,H,Y,j,Q,X,Z){c(2/(H-W),0,0,0,0,2/(j-Y),0,0,0,0,2/(X-Q),0,(W+H)/(W-H),(j+Y)/(Y-j),-(X+Q)/(X-Q),1,Z),P(Z)}function M(W,H,Y,j,Q,X,Z){R(W,H,Y,j,Q,X,Z),Z._m[10]*=-1}function B(W,H,Y,j,Q,X=!0){const Z=Y,J=j,K=1/Math.tan(.5*W);c(X?K/H:K,0,0,0,0,X?K:K*H,0,0,0,0,(J+Z)/(J-Z),1,0,0,-2*J*Z/(J-Z),0,Q),V(Q,!1)}function A(W,H,Y,j,Q,X=!0){const Z=Y,J=j,K=1/Math.tan(.5*W);c(X?K/H:K,0,0,0,0,X?K:K*H,0,0,0,0,-(J+Z)/(J-Z),-1,0,0,-2*J*Z/(J-Z),0,Q),V(Q,!1)}function C(W,H){const Y=H._m,j=W._m;Y[0]=j[0],Y[1]=j[4],Y[2]=j[8],Y[3]=j[12],Y[4]=j[1],Y[5]=j[5],Y[6]=j[9],Y[7]=j[13],Y[8]=j[2],Y[9]=j[6],Y[10]=j[10],Y[11]=j[14],Y[12]=j[3],Y[13]=j[7],Y[14]=j[11],Y[15]=j[15],V(H,W.isIdentity,W._isIdentityDirty)}function w(W,H){const Y=j.Plane.normalize(W),Q=Y.normal.x,X=Y.normal.y,Z=Y.normal.z,J=-2*Q,K=-2*X,ee=-2*Z;c(J*Q+1,K*Q,ee*Q,0,J*X,K*X+1,ee*X,0,J*Z,K*Z,ee*Z+1,0,J*Y.d,K*Y.d,ee*Y.d,1,H)}function S(W,H){const Y=W.x*W.x,j=W.y*W.y,Q=W.z*W.z,X=W.x*W.y,Z=W.z*W.w,J=W.z*W.x,K=W.y*W.w,ee=W.y*W.z,te=W.x*W.w;H._m[0]=1-2*(j+Q),H._m[1]=2*(X+Z),H._m[2]=2*(J-K),H._m[3]=0,H._m[4]=2*(X-Z),H._m[5]=1-2*(Q+Y),H._m[6]=2*(ee+te),H._m[7]=0,H._m[8]=2*(J+K),H._m[9]=2*(ee-te),H._m[10]=1-2*(j+Y),H._m[11]=0,H._m[12]=0,H._m[13]=0,H._m[14]=0,H._m[15]=1,P(H)}function P(W){W.updateFlag=Q++,W.isIdentity=!1,W.isIdentity3x2=!1,W._isIdentityDirty=!0,W._isIdentity3x2Dirty=!0}function k(W){if(!0===W.isIdentity)return 1;const H=W._m,Y=H[0],j=H[1],Q=H[2],X=H[3],Z=H[4],J=H[5],K=H[6],ee=H[7],te=H[8],ne=H[9],re=H[10],oe=H[11],ie=H[12],ae=H[13],se=H[14],ce=H[15],ue=re*ce-se*oe,fe=ne*ce-ae*oe,le=ne*se-ae*re,de=te*ce-ie*oe,he=te*se-re*ie,pe=te*ae-ie*ne;return Y*+(J*ue-K*fe+ee*le)+j*-(Z*ue-K*de+ee*he)+Q*+(Z*fe-J*de+ee*pe)+X*-(Z*le-J*he+K*pe)}function I(W,H,Y){for(let j=0;j<16;j++)Y._m[j]=W._m[j]+H._m[j];P(Y)}function O(W,H){if(!0===W.isIdentity)return void U(W,H);const Y=W._m,j=Y[0],Q=Y[1],X=Y[2],Z=Y[3],J=Y[4],K=Y[5],ee=Y[6],te=Y[7],ne=Y[8],re=Y[9],oe=Y[10],ie=Y[11],ae=Y[12],se=Y[13],ce=Y[14],ue=Y[15],fe=oe*ue-ce*ie,le=re*ue-se*ie,de=re*ce-se*oe,he=ne*ue-ae*ie,pe=ne*ce-oe*ae,me=ne*se-ae*re,ge=+(K*fe-ee*le+te*de),ye=-(J*fe-ee*he+te*pe),be=+(J*le-K*he+te*me),ve=-(J*de-K*pe+ee*me),Ee=j*ge+Q*ye+X*be+Z*ve;if(0===Ee)return void U(W,H);const Te=1/Ee,_e=ee*ue-ce*te,we=K*ue-se*te,Ae=K*ce-se*ee,Re=J*ue-ae*te,xe=J*ce-ae*ee,Me=J*se-ae*K,Se=ee*ie-oe*te,Be=K*ie-re*te,ke=K*oe-re*ee,Ce=J*ie-ne*te,Ie=J*oe-ne*ee,ze=J*re-ne*K;c(ge*Te,-(Q*fe-X*le+Z*de)*Te,+(Q*_e-X*we+Z*Ae)*Te,-(Q*Se-X*Be+Z*ke)*Te,ye*Te,+(j*fe-X*he+Z*pe)*Te,-(j*_e-X*Re+Z*xe)*Te,+(j*Se-X*Ce+Z*Ie)*Te,be*Te,-(j*le-Q*he+Z*me)*Te,+(j*we-Q*Re+Z*Me)*Te,-(j*Be-Q*Ce+Z*ze)*Te,ve*Te,+(j*de-Q*pe+X*me)*Te,-(j*Ae-Q*xe+X*Me)*Te,+(j*ke-Q*Ie+X*ze)*Te,H)}function N(W,H,Y,j){W._m[12]=H,W._m[13]=Y,W._m[14]=j,P(W)}function z(W,H){N(W,H.x,H.y,H.z)}function U(W,H){D(W,H._m),V(H,W.isIdentity,W._isIdentityDirty,W.isIdentity3x2,W._isIdentity3x2Dirty)}function D(W,H,Y=0){for(let j=0;j<16;j++)H[Y+j]=W._m[j]}function L(W,H,Y){W.isIdentity?U(H,Y):H.isIdentity?U(W,Y):(F(W,H,Y._m,0),P(Y))}function F(W,H,Y,j){const Q=W._m,X=H._m,Z=Q[0],J=Q[1],K=Q[2],ee=Q[3],te=Q[4],ne=Q[5],re=Q[6],oe=Q[7],ie=Q[8],ae=Q[9],se=Q[10],ce=Q[11],ue=Q[12],fe=Q[13],le=Q[14],de=Q[15],he=X[0],pe=X[1],me=X[2],ge=X[3],ye=X[4],be=X[5],ve=X[6],Ee=X[7],Te=X[8],_e=X[9],we=X[10],Ae=X[11],Re=X[12],xe=X[13],Me=X[14],Se=X[15];Y[j]=Z*he+J*ye+K*Te+ee*Re,Y[j+1]=Z*pe+J*be+K*_e+ee*xe,Y[j+2]=Z*me+J*ve+K*we+ee*Me,Y[j+3]=Z*ge+J*Ee+K*Ae+ee*Se,Y[j+4]=te*he+ne*ye+re*Te+oe*Re,Y[j+5]=te*pe+ne*be+re*_e+oe*xe,Y[j+6]=te*me+ne*ve+re*we+oe*Me,Y[j+7]=te*ge+ne*Ee+re*Ae+oe*Se,Y[j+8]=ie*he+ae*ye+se*Te+ce*Re,Y[j+9]=ie*pe+ae*be+se*_e+ce*xe,Y[j+10]=ie*me+ae*ve+se*we+ce*Me,Y[j+11]=ie*ge+ae*Ee+se*Ae+ce*Se,Y[j+12]=ue*he+fe*ye+le*Te+de*Re,Y[j+13]=ue*pe+fe*be+le*_e+de*xe,Y[j+14]=ue*me+fe*ve+le*we+de*Me,Y[j+15]=ue*ge+fe*Ee+le*Ae+de*Se}function q(W,j,Q,X){if(W.isIdentity)return X&&(X=H.Vector3.create(0,0,0)),j&&(j=H.Vector3.create(0,0,0)),Q&&(Q=Y.Quaternion.create(0,0,0,1)),!0;const Z=W._m;X&&(X=H.Vector3.create(Z[12],Z[13],Z[14]));const J=j||H.Vector3.Zero();if(J.x=Math.sqrt(Z[0]*Z[0]+Z[1]*Z[1]+Z[2]*Z[2]),J.y=Math.sqrt(Z[4]*Z[4]+Z[5]*Z[5]+Z[6]*Z[6]),J.z=Math.sqrt(Z[8]*Z[8]+Z[9]*Z[9]+Z[10]*Z[10]),k(W)<=0&&(J.y*=-1),0===J.x||0===J.y||0===J.z)return Q&&(Q=Y.Quaternion.create(0,0,0,1)),!1;if(Q){const W=1/J.x,H=1/J.y,j=1/J.z,X=a();c(Z[0]*W,Z[1]*W,Z[2]*W,0,Z[4]*H,Z[5]*H,Z[6]*H,0,Z[8]*j,Z[9]*j,Z[10]*j,0,0,0,0,1,X),Y.Quaternion.fromRotationMatrixToRef(X,Q)}return!0}function G(W,H,Y){for(let j=0;j<16;j++)Y._m[j]=W._m[j]*H;P(Y)}function $(W,Y){const j=H.Vector3.Zero();if(!q(W,j))return void(Y=f());const Q=W._m,X=1/j.x,Z=1/j.y,J=1/j.z;c(Q[0]*X,Q[1]*X,Q[2]*X,0,Q[4]*Z,Q[5]*Z,Q[6]*Z,0,Q[8]*J,Q[9]*J,Q[10]*J,0,0,0,0,1,Y)}function V(W,H,Y=!1,j=!1,X=!0){W.updateFlag=Q++,W.isIdentity=H,W.isIdentity3x2=H||j,W._isIdentityDirty=!W.isIdentity&&Y,W._isIdentity3x2Dirty=!W.isIdentity3x2&&X}W.IdentityReadonly=function(){return X},W.create=a,W.fromArray=function(W,H=0){const Y=a();return s(W,H,Y),Y},W.fromArrayToRef=s,W.fromFloatArrayToRefScaled=function(W,H,Y,j){for(let Q=0;Q<16;Q++)j._m[Q]=W[Q+H]*Y;P(j)},W.fromValuesToRef=c,W.fromValues=u,W.compose=function(W,H,Y){const j=a();return l(W,H,Y,j),j},W.composeToRef=l,W.Identity=f,W.IdentityToRef=function(W){c(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1,W),V(W,!0)},W.Zero=function(){const W=u(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);return V(W,!1),W},W.RotationX=function(W){const H=a();return d(W,H),H},W.rotationXToRef=d,W.rotationY=function(W){const H=a();return m(W,H),H},W.rotationYToRef=m,W.rotationZ=function(W){const H=a();return h(W,H),H},W.rotationZToRef=h,W.rotationAxis=function(W,H){const Y=a();return p(W,H,Y),Y},W.rotationAxisToRef=p,W.rotationYawPitchRoll=function(W,H,Y){const j=a();return g(W,H,Y,j),j},W.rotationYawPitchRollToRef=g,W.scaling=function(W,H,Y){const j=a();return y(W,H,Y,j),j},W.scalingToRef=y,W.translation=function(W,H,Y){const j=a();return b(W,H,Y,j),j},W.translationToRef=b,W.lerp=function(W,H,Y){const j=a();return v(W,H,Y,j),j},W.lerpToRef=v,W.decomposeLerp=function(W,H,Y){const j=a();return E(W,H,Y,j),j},W.decomposeLerpToRef=E,W.LookAtLH=function(W,H,Y){const j=a();return T(W,H,Y,j),j},W.lookAtLHToRef=T,W.lookAtRH=function(W,H,Y){const j=a();return x(W,H,Y,j),j},W.lookAtRHToRef=x,W.orthoLH=function(W,H,Y,j){const Q=a();return _(W,H,Y,j,Q),Q},W.orthoLHToRef=_,W.OrthoOffCenterLH=function(W,H,Y,j,Q,X){const Z=a();return R(W,H,Y,j,Q,X,Z),Z},W.orthoOffCenterLHToRef=R,W.orthoOffCenterRH=function(W,H,Y,j,Q,X){const Z=a();return M(W,H,Y,j,Q,X,Z),Z},W.orthoOffCenterRHToRef=M,W.perspectiveLH=function(W,H,Y,j){const Q=a();return c(2*Y/W,0,0,0,0,2*Y/H,0,0,0,0,(j+Y)/(j-Y),1,0,0,-2*j*Y/(j-Y),0,Q),V(Q,!1),Q},W.perspectiveFovLH=function(W,H,Y,j){const Q=a();return B(W,H,Y,j,Q),Q},W.perspectiveFovLHToRef=B,W.PerspectiveFovRH=function(W,H,Y,j){const Q=a();return A(W,H,Y,j,Q),Q},W.perspectiveFovRHToRef=A,W.perspectiveFovWebVRToRef=function(W,H,Y,j,Q=!1){const X=Q?-1:1,Z=Math.tan(W.upDegrees*Math.PI/180),J=Math.tan(W.downDegrees*Math.PI/180),K=Math.tan(W.leftDegrees*Math.PI/180),ee=Math.tan(W.rightDegrees*Math.PI/180),te=2/(K+ee),ne=2/(Z+J),re=j._m;re[0]=te,re[1]=re[2]=re[3]=re[4]=0,re[5]=ne,re[6]=re[7]=0,re[8]=(K-ee)*te*.5,re[9]=-(Z-J)*ne*.5,re[10]=-Y/(H-Y),re[11]=1*X,re[12]=re[13]=re[15]=0,re[14]=-2*Y*H/(Y-H),P(j)},W.GetAsMatrix2x2=function(W){return[W._m[0],W._m[1],W._m[4],W._m[5]]},W.GetAsMatrix3x3=function(W){return[W._m[0],W._m[1],W._m[2],W._m[4],W._m[5],W._m[6],W._m[8],W._m[9],W._m[10]]},W.transpose=function(W){const H=a();return C(W,H),H},W.transposeToRef=C,W.reflection=function(W){const H=a();return w(W,H),H},W.reflectionToRef=w,W.fromXYZAxesToRef=function(W,H,Y,j){c(W.x,W.y,W.z,0,H.x,H.y,H.z,0,Y.x,Y.y,Y.z,0,0,0,0,1,j)},W.fromQuaternionToRef=S,W.isIdentityUpdate=function(W){if(W._isIdentityDirty){W._isIdentityDirty=!1;const H=W._m;W.isIdentity=1===H[0]&&0===H[1]&&0===H[2]&&0===H[3]&&0===H[4]&&1===H[5]&&0===H[6]&&0===H[7]&&0===H[8]&&0===H[9]&&1===H[10]&&0===H[11]&&0===H[12]&&0===H[13]&&0===H[14]&&1===H[15]}return W.isIdentity},W.isIdentityAs3x2Update=function(W){return W._isIdentity3x2Dirty&&(W._isIdentity3x2Dirty=!1,1!==W._m[0]||1!==W._m[5]||1!==W._m[15]||0!==W._m[1]||0!==W._m[2]||0!==W._m[3]||0!==W._m[4]||0!==W._m[6]||0!==W._m[7]||0!==W._m[8]||0!==W._m[9]||0!==W._m[10]||0!==W._m[11]||0!==W._m[12]||0!==W._m[13]||0!==W._m[14]?W.isIdentity3x2=!1:W.isIdentity3x2=!0),W.isIdentity3x2},W.determinant=k,W.toArray=function(W){return W._m},W.asArray=function(W){return W._m},W.reset=function(W){c(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,W),V(W,!1)},W.add=function(W,H){const Y=a();return I(W,H,Y),Y},W.addToRef=I,W.addToSelf=function(W,H){for(let Y=0;Y<16;Y++)W._m[Y]+=H._m[Y];P(W)},W.invert=function(W){const H=a();return O(W,H),H},W.invertToRef=O,W.addAtIndex=function(W,H,Y){W._m[H]+=Y,P(W)},W.multiplyAtIndex=function(W,H,Y){return W._m[H]*=Y,P(W),W},W.setTranslationFromFloats=N,W.setTranslation=z,W.getTranslation=function(W){return H.Vector3.create(W._m[12],W._m[13],W._m[14])},W.getTranslationToRef=function(W,H){H.x=W._m[12],H.y=W._m[13],H.z=W._m[14]},W.removeRotationAndScaling=function(W){const H=W._m;return c(1,0,0,0,0,1,0,0,0,0,1,0,H[12],H[13],H[14],H[15],W),V(W,0===H[12]&&0===H[13]&&0===H[14]&&1===H[15]),W},W.multiply=function(W,H){const Y=a();return L(W,H,Y),Y},W.copy=U,W.copyToArray=D,W.multiplyToRef=L,W.multiplyToArray=F,W.equals=function(W,H){const Y=H;if(!Y)return!1;if((W.isIdentity||Y.isIdentity)&&!W._isIdentityDirty&&!Y._isIdentityDirty)return W.isIdentity&&Y.isIdentity;const j=W._m,Q=Y._m;return j[0]===Q[0]&&j[1]===Q[1]&&j[2]===Q[2]&&j[3]===Q[3]&&j[4]===Q[4]&&j[5]===Q[5]&&j[6]===Q[6]&&j[7]===Q[7]&&j[8]===Q[8]&&j[9]===Q[9]&&j[10]===Q[10]&&j[11]===Q[11]&&j[12]===Q[12]&&j[13]===Q[13]&&j[14]===Q[14]&&j[15]===Q[15]},W.clone=function(W){const H=a();return U(W,H),H},W.getHashCode=function(W){let H=W._m[0]||0;for(let Y=1;Y<16;Y++)H=397*H^(W._m[Y]||0);return H},W.decompose=q,W.setRowFromFloats=function(W,H,Y,j,Q,X){if(H<0||H>3)return;const Z=4*H;W._m[Z+0]=Y,W._m[Z+1]=j,W._m[Z+2]=Q,W._m[Z+3]=X,P(W)},W.scale=function(W,H){const Y=a();return G(W,H,Y),Y},W.scaleToRef=G,W.scaleAndAddToRef=function(W,H,Y){for(let j=0;j<16;j++)Y._m[j]+=W._m[j]*H;P(Y)},W.normalMatrixToRef=function(W,H){const Y=a();O(W,Y),C(Y,H);const j=H._m;c(j[0],j[1],j[2],0,j[4],j[5],j[6],0,j[8],j[9],j[10],0,0,0,0,1,H)},W.getRotationMatrix=function(W){const H=a();return $(W,H),H},W.getRotationMatrixToRef=$,W.toggleModelMatrixHandInPlace=function(W){W._m[2]*=-1,W._m[6]*=-1,W._m[8]*=-1,W._m[9]*=-1,W._m[14]*=-1,P(W)},W.toggleProjectionMatrixHandInPlace=function(W){W._m[8]*=-1,W._m[9]*=-1,W._m[10]*=-1,W._m[11]*=-1,P(W)}}(W.Matrix||(W.Matrix={}))}(te)),te}function requireQuaternion(){return ie||(ie=1,function(W){Object.defineProperty(W,"__esModule",{value:!0}),W.Quaternion=void 0;const H=requireVector3(),Y=requireScalar(),j=requireTypes$1(),Q=requireMatrix();!function(W){function i(W=0,H=0,Y=0,j=1){return{x:W,y:H,z:Y,w:j}}function a(W,H,Y){const j=.5*H,Q=.5*W,X=.5*Y,Z=Math.cos(j),J=Math.cos(Q),K=Math.cos(X),ee=Math.sin(j),te=Math.sin(Q),ne=Math.sin(X);return i(J*ee*K+te*Z*ne,te*Z*K-J*ee*ne,J*Z*ne-te*ee*K,J*Z*K+te*ee*ne)}function s(W){return Math.sqrt(c(W))}function c(W){return W.x*W.x+W.y*W.y+W.z*W.z+W.w*W.w}function u(W,H){return W.x*H.x+W.y*H.y+W.z*H.z+W.w*H.w}function l(W,H){const Y=u(W,H);return 2*Math.acos(Math.min(Math.abs(Y),1))*j.RAD2DEG}function f(W){const H=1/s(W);return i(W.x*H,W.y*H,W.z*H,W.w*H)}function d(){return i(0,0,0,1)}function m(H,Y,j){const Q=W.Identity();return W.slerpToRef(H,Y,j,Q),Q}function h(W,H,Y){Y.x=W.x*H.w+W.y*H.z-W.z*H.y+W.w*H.x,Y.y=-W.x*H.z+W.y*H.w+W.z*H.x+W.w*H.y,Y.z=W.x*H.y-W.y*H.x+W.z*H.w+W.w*H.z,Y.w=-W.x*H.x-W.y*H.y-W.z*H.z+W.w*H.w}function p(Y,j,X,Z){const J=Q.Matrix.create();Q.Matrix.fromXYZAxesToRef(H.Vector3.normalize(Y),H.Vector3.normalize(j),H.Vector3.normalize(X),J),W.fromRotationMatrixToRef(J,Z)}function g(Y,j,X=H.Vector3.Up(),Z){const J=Q.Matrix.Identity();Q.Matrix.lookAtLHToRef(Y,j,X,J),Q.Matrix.invertToRef(J,J),W.fromRotationMatrixToRef(J,Z)}W.create=i,W.add=function(W,H){return{x:W.x+H.x,y:W.y+H.y,z:W.z+H.z,w:W.w+H.w}},W.fromRotationYawPitchRoll=a,W.fromEulerDegress=function(W,H,Y){return a(H*j.DEG2RAD,W*j.DEG2RAD,Y*j.DEG2RAD)},W.length=s,W.lengthSquared=c,W.dot=u,W.angle=l,W.rotateTowards=function(W,H,Y){const j=l(W,H);return 0===j?H:m(W,H,Math.min(1,Y/j))},W.lookRotation=function(W,Y={x:0,y:1,z:0}){const j=H.Vector3.normalize(W),Q=H.Vector3.normalize(H.Vector3.cross(Y,j)),X=H.Vector3.cross(j,Q),Z=Q.x,J=Q.y,K=Q.z,ee=X.x,te=X.y,ne=X.z,re=j.x,oe=j.y,ie=j.z,ae=Z+te+ie,se=i();if(ae>0){let W=Math.sqrt(ae+1);return se.w=.5*W,W=.5/W,se.x=(ne-oe)*W,se.y=(re-K)*W,se.z=(J-ee)*W,se}if(Z>=te&&Z>=ie){const W=Math.sqrt(1+Z-te-ie),H=.5/W;return se.x=.5*W,se.y=(J+ee)*H,se.z=(K+re)*H,se.w=(ne-oe)*H,se}if(te>ie){const W=Math.sqrt(1+te-Z-ie),H=.5/W;return se.x=(ee+J)*H,se.y=.5*W,se.z=(oe+ne)*H,se.w=(re-K)*H,se}const ce=Math.sqrt(1+ie-Z-te),ue=.5/ce;return se.x=(re+K)*ue,se.y=(oe+ne)*ue,se.z=.5*ce,se.w=(J-ee)*ue,se},W.normalize=f,W.fromToRotation=function(W,Y,j=H.Vector3.Up()){const Q=H.Vector3.normalize(W),X=H.Vector3.normalize(Y),Z=H.Vector3.cross(Q,X),J=Math.sqrt(H.Vector3.lengthSquared(Q)*H.Vector3.lengthSquared(X))+H.Vector3.dot(Q,X);return H.Vector3.lengthSquared(Z)<1e-4?Math.abs(J)<1e-4?f(i(j.x,j.y,j.z,0)):d():f(i(Z.x,Z.y,Z.z,J))},W.Identity=d,W.toEulerAngles=function(W){const Q=H.Vector3.create(),X=W.x*W.x+W.y*W.y+W.z*W.z+W.w*W.w,Z=W.x*W.w-W.y*W.z;return Z>.4995*X?(Q.x=Math.PI/2,Q.y=2*Math.atan2(W.y,W.x),Q.z=0):Z<-.4995*X?(Q.x=-Math.PI/2,Q.y=-2*Math.atan2(W.y,W.x),Q.z=0):(Q.x=Math.asin(2*(W.w*W.x-W.y*W.z)),Q.y=Math.atan2(2*W.w*W.y+2*W.z*W.x,1-2*(W.x*W.x+W.y*W.y)),Q.z=Math.atan2(2*W.w*W.z+2*W.x*W.y,1-2*(W.z*W.z+W.x*W.x))),Q.x*=j.RAD2DEG,Q.y*=j.RAD2DEG,Q.z*=j.RAD2DEG,Q.x=Y.Scalar.repeat(Q.x,360),Q.y=Y.Scalar.repeat(Q.y,360),Q.z=Y.Scalar.repeat(Q.z,360),Q},W.fromRotationYawPitchRollToRef=function(W,H,Y,j){const Q=.5*H,X=.5*W,Z=.5*Y,J=Math.cos(Q),K=Math.cos(X),ee=Math.cos(Z),te=Math.sin(Q),ne=Math.sin(X),re=Math.sin(Z);j.x=K*te*ee+ne*J*re,j.y=ne*J*ee-K*te*re,j.z=K*J*re-ne*te*ee,j.w=K*J*ee+ne*te*re},W.fromRotationMatrixToRef=function(W,H){const Y=W._m,j=Y[0],Q=Y[4],X=Y[8],Z=Y[1],J=Y[5],K=Y[9],ee=Y[2],te=Y[6],ne=Y[10],re=j+J+ne;let oe;re>0?(oe=.5/Math.sqrt(re+1),H.w=.25/oe,H.x=(te-K)*oe,H.y=(X-ee)*oe,H.z=(Z-Q)*oe):j>J&&j>ne?(oe=2*Math.sqrt(1+j-J-ne),H.w=(te-K)/oe,H.x=.25*oe,H.y=(Q+Z)/oe,H.z=(X+ee)/oe):J>ne?(oe=2*Math.sqrt(1+J-j-ne),H.w=(X-ee)/oe,H.x=(Q+Z)/oe,H.y=.25*oe,H.z=(K+te)/oe):(oe=2*Math.sqrt(1+ne-j-J),H.w=(Z-Q)/oe,H.x=(X+ee)/oe,H.y=(K+te)/oe,H.z=.25*oe)},W.slerp=m,W.slerpToRef=function(W,H,Y,j){let Q,X,Z=W.x*H.x+W.y*H.y+W.z*H.z+W.w*H.w,J=!1;if(Z<0&&(J=!0,Z=-Z),Z>.999999)X=1-Y,Q=J?-Y:Y;else{const W=Math.acos(Z),H=1/Math.sin(W);X=Math.sin((1-Y)*W)*H,Q=J?-Math.sin(Y*W)*H:Math.sin(Y*W)*H}j.x=X*W.x+Q*H.x,j.y=X*W.y+Q*H.y,j.z=X*W.z+Q*H.z,j.w=X*W.w+Q*H.w},W.multiply=function(W,H){const Y=i(0,0,0,1);return h(W,H,Y),Y},W.multiplyToRef=h,W.fromAngleAxis=function(Y,Q){if(0===H.Vector3.lengthSquared(Q))return W.Identity();const X=d();let Z=Y*j.DEG2RAD;Z*=.5;const J=H.Vector3.normalize(Q);return H.Vector3.scaleToRef(J,Math.sin(Z),J),X.x=J.x,X.y=J.y,X.z=J.z,X.w=Math.cos(Z),f(X)},W.fromAxisToRotationQuaternion=function(H,Y,j){const Q=W.create(0,0,0,0);return p(H,Y,j,Q),Q},W.fromAxisToRotationQuaternionToRef=p,W.Zero=function(){return i(0,0,0,0)},W.fromLookAt=function(Y,j,Q=H.Vector3.Up()){const X=W.Identity();return g(Y,j,Q,X),X},W.fromLookAtToRef=g}(W.Quaternion||(W.Quaternion={}))}(j)),j}var ae={},se={},ce,ue,fe;function requireColor4(){return ce||(ce=1,function(W){Object.defineProperty(W,"__esModule",{value:!0}),W.Color4=void 0;const H=requireScalar(),Y=requireTypes$1();!function(W){function r(W=0,H=0,Y=0,j=1){return{r:W,g:H,b:Y,a:j}}function o(){return r(0,0,0,0)}function i(W,H,Y){Y.r=W.r+H.r,Y.g=W.g+H.g,Y.b=W.b+H.b,Y.a=W.a+H.a}function a(W,H,Y){Y.r=W.r-H.r,Y.g=W.g-H.g,Y.b=W.b-H.b,Y.a=W.a-H.a}function s(W,H){H.r=Math.pow(W.r,Y.ToLinearSpace),H.g=Math.pow(W.g,Y.ToLinearSpace),H.b=Math.pow(W.b,Y.ToLinearSpace),H.a=W.a}function c(W,H){H.r=Math.pow(W.r,Y.ToGammaSpace),H.g=Math.pow(W.g,Y.ToGammaSpace),H.b=Math.pow(W.b,Y.ToGammaSpace),H.a=W.a}W.create=r,W.fromHexString=function(H){if("#"!==H.substring(0,1)||9!==H.length)return r(0,0,0,0);const Y=parseInt(H.substring(1,3),16),j=parseInt(H.substring(3,5),16),Q=parseInt(H.substring(5,7),16),X=parseInt(H.substring(7,9),16);return W.fromInts(Y,j,Q,X)},W.lerp=function(H,Y,j){const Q=r(0,0,0,0);return W.lerpToRef(H,Y,j,Q),Q},W.lerpToRef=function(W,H,Y,j){j.r=W.r+(H.r-W.r)*Y,j.g=W.g+(H.g-W.g)*Y,j.b=W.b+(H.b-W.b)*Y,j.a=W.a+(H.a-W.a)*Y},W.Red=function(){return r(1,0,0,1)},W.Green=function(){return r(0,1,0,1)},W.Blue=function(){return r(0,0,1,1)},W.Black=function(){return r(0,0,0,1)},W.White=function(){return r(1,1,1,1)},W.Purple=function(){return r(.5,0,.5,1)},W.Magenta=function(){return r(1,0,1,1)},W.Yellow=function(){return r(1,1,0,1)},W.Gray=function(){return r(.5,.5,.5,1)},W.Teal=function(){return r(0,1,1,1)},W.Clear=o,W.fromColor3=function(W,H=1){return r(W.r,W.g,W.b,H)},W.fromArray=function(W,H=0){return r(W[H],W[H+1],W[H+2],W[H+3])},W.fromInts=function(W,H,Y,j){return r(W/255,H/255,Y/255,j/255)},W.checkColors4=function(W,H){if(W.length===3*H){const H=[];for(let Y=0;Y<W.length;Y+=3){const j=Y/3*4;H[j]=W[Y],H[j+1]=W[Y+1],H[j+2]=W[Y+2],H[j+3]=1}return H}return W},W.addToRef=i,W.toArray=function(W,H,Y=0){H[Y]=W.r,H[Y+1]=W.g,H[Y+2]=W.b,H[Y+3]=W.a},W.add=function(W,H){const Y=o();return i(W,H,Y),Y},W.subtract=function(W,H){const Y=o();return a(W,H,Y),Y},W.subtractToRef=a,W.scale=function(W,H){return r(W.r*H,W.g*H,W.b*H,W.a*H)},W.scaleToRef=function(W,H,Y){Y.r=W.r*H,Y.g=W.g*H,Y.b=W.b*H,Y.a=W.a*H},W.scaleAndAddToRef=function(W,H,Y){Y.r+=W.r*H,Y.g+=W.g*H,Y.b+=W.b*H,Y.a+=W.a*H},W.clampToRef=function(W,Y=0,j=1,Q){Q.r=H.Scalar.clamp(W.r,Y,j),Q.g=H.Scalar.clamp(W.g,Y,j),Q.b=H.Scalar.clamp(W.b,Y,j),Q.a=H.Scalar.clamp(W.a,Y,j)},W.multiply=function(W,H){return r(W.r*H.r,W.g*H.g,W.b*H.b,W.a*H.a)},W.multiplyToRef=function(W,H,Y){Y.r=W.r*H.r,Y.g=W.g*H.g,Y.b=W.b*H.b,Y.a=W.a*H.a},W.toString=function(W){return"{R: "+W.r+" G:"+W.g+" B:"+W.b+" A:"+W.a+"}"},W.getHashCode=function(W){let H=W.r||0;return H=397*H^(W.g||0),H=397*H^(W.b||0),H=397*H^(W.a||0),H},W.clone=function(W){return r(W.r,W.g,W.b,W.a)},W.copyFrom=function(W,H){H.r=W.r,H.g=W.g,H.b=W.b,H.a=W.a},W.copyFromFloats=function(W,H,Y,j,Q){Q.r=W,Q.g=H,Q.b=Y,Q.a=j},W.set=function(W,H,Y,j,Q){Q.r=W,Q.g=H,Q.b=Y,Q.a=j},W.toHexString=function(W){const Y=255*W.r|0,j=255*W.g|0,Q=255*W.b|0,X=255*W.a|0;return"#"+H.Scalar.toHex(Y)+H.Scalar.toHex(j)+H.Scalar.toHex(Q)+H.Scalar.toHex(X)},W.toLinearSpace=function(W){const H=r();return s(W,H),H},W.toLinearSpaceToRef=s,W.toGammaSpace=function(W){const H=r();return c(W,H),H},W.toGammaSpaceToRef=c}(W.Color4||(W.Color4={}))}(se)),se}function requireColor3(){return ue||(ue=1,function(W){Object.defineProperty(W,"__esModule",{value:!0}),W.Color3=void 0;const H=requireTypes$1(),Y=requireColor4(),j=requireScalar();!function(W){function o(W=0,H=0,Y=0){return{r:W,g:H,b:Y}}function i(W,H,Y){return o(W/255,H/255,Y/255)}function a(W,H,Y=0){H[Y]=W.r,H[Y+1]=W.g,H[Y+2]=W.b}function s(W,H=0,Y=1,Q){Q.r=j.Scalar.clamp(W.r,H,Y),Q.g=j.Scalar.clamp(W.g,H,Y),Q.b=j.Scalar.clamp(W.b,H,Y)}function c(W,Y){Y.r=Math.pow(W.r,H.ToLinearSpace),Y.g=Math.pow(W.g,H.ToLinearSpace),Y.b=Math.pow(W.b,H.ToLinearSpace)}function u(W,Y){Y.r=Math.pow(W.r,H.ToGammaSpace),Y.g=Math.pow(W.g,H.ToGammaSpace),Y.b=Math.pow(W.b,H.ToGammaSpace)}W.create=o,W.fromHexString=function(W){return"#"!==W.substring(0,1)||7!==W.length?o(0,0,0):i(parseInt(W.substring(1,3),16),parseInt(W.substring(3,5),16),parseInt(W.substring(5,7),16))},W.fromArray=function(W,H=0){return o(W[H],W[H+1],W[H+2])},W.fromInts=i,W.lerp=function(H,Y,j){const Q=o(0,0,0);return W.lerpToRef(H,Y,j,Q),Q},W.lerpToRef=function(W,H,Y,j){j.r=W.r+(H.r-W.r)*Y,j.g=W.g+(H.g-W.g)*Y,j.b=W.b+(H.b-W.b)*Y},W.Red=function(){return o(1,0,0)},W.Green=function(){return o(0,1,0)},W.Blue=function(){return o(0,0,1)},W.Black=function(){return o(0,0,0)},W.White=function(){return o(1,1,1)},W.Purple=function(){return o(.5,0,.5)},W.Magenta=function(){return o(1,0,1)},W.Yellow=function(){return o(1,1,0)},W.Gray=function(){return o(.5,.5,.5)},W.Teal=function(){return o(0,1,1)},W.Random=function(){return o(Math.random(),Math.random(),Math.random())},W.toString=function(W){return"{R: "+W.r+" G:"+W.g+" B:"+W.b+"}"},W.getHashCode=function(W){let H=W.r||0;return H=397*H^(W.g||0),H=397*H^(W.b||0),H},W.toArray=a,W.toColor4=function(W,H=1){return Y.Color4.create(W.r,W.g,W.b,H)},W.asArray=function(W){const H=new Array;return a(W,H,0),H},W.toLuminance=function(W){return.3*W.r+.59*W.g+.11*W.b},W.multiply=function(W,H){return o(W.r*H.r,W.g*H.g,W.b*H.b)},W.multiplyToRef=function(W,H,Y){Y.r=W.r*H.r,Y.g=W.g*H.g,Y.b=W.b*H.b},W.equals=function(W,H){return H&&W.r===H.r&&W.g===H.g&&W.b===H.b},W.equalsFloats=function(W,H,Y,j){return W.r===H&&W.g===Y&&W.b===j},W.scale=function(W,H){return o(W.r*H,W.g*H,W.b*H)},W.scaleToRef=function(W,H,Y){Y.r=W.r*H,Y.g=W.g*H,Y.b=W.b*H},W.scaleAndAddToRef=function(W,H,Y){Y.r+=W.r*H,Y.g+=W.g*H,Y.b+=W.b*H},W.clampToRef=s,W.clamp=function(H,Y=0,j=1){const Q=W.Black();return s(H,Y,j,Q),Q},W.add=function(W,H){return o(W.r+H.r,W.g+H.g,W.b+H.b)},W.addToRef=function(W,H,Y){Y.r=W.r+H.r,Y.g=W.g+H.g,Y.b=W.b+H.b},W.subtract=function(W,H){return o(W.r-H.r,W.g-H.g,W.b-H.b)},W.subtractToRef=function(W,H,Y){Y.r=W.r-H.r,Y.g=W.g-H.g,Y.b=W.b-H.b},W.clone=function(W){return o(W.r,W.g,W.b)},W.copyFrom=function(W,H){H.r=W.r,H.g=W.g,H.b=W.b},W.set=function(W,H,Y,j){W.r=H,W.g=Y,W.b=j},W.toHexString=function(W){const H=255*W.r|0,Y=255*W.g|0,Q=255*W.b|0;return"#"+j.Scalar.toHex(H)+j.Scalar.toHex(Y)+j.Scalar.toHex(Q)},W.toLinearSpace=function(W){const H=o();return c(W,H),H},W.toLinearSpaceToRef=c,W.toGammaSpace=function(W){const H=o();return u(W,H),H},W.toGammaSpaceToRef=u}(W.Color3||(W.Color3={}))}(ae)),ae}function requireDist$1(){return fe||(fe=1,W=Y,j=H&&H.__createBinding||(Object.create?function(W,H,Y,j){void 0===j&&(j=Y),Object.defineProperty(W,j,{enumerable:!0,get:function(){return H[Y]}})}:function(W,H,Y,j){void 0===j&&(j=Y),W[j]=H[Y]}),Q=H&&H.__exportStar||function(W,H){for(var Y in W)"default"===Y||Object.prototype.hasOwnProperty.call(H,Y)||j(H,W,Y)},Object.defineProperty(W,"__esModule",{value:!0}),Q(requireQuaternion(),W),Q(requireVector3(),W),Q(requireColor3(),W),Q(requireColor4(),W),Q(requireVector3(),W),Q(requireScalar(),W),Q(requireTypes$1(),W),Q(requireDist$1(),W)),Y;var W,j,Q}var le=requireDist$1(),de={exports:{}},he={},pe={},me,ge;function requireAspromise(){return ge||(ge=1,me=function(W,H){for(var Y=new Array(arguments.length-1),j=0,Q=2,X=!0;Q<arguments.length;)Y[j++]=arguments[Q++];return new Promise((function(Q,Z){Y[j]=function(W){if(X)if(X=!1,W)Z(W);else{for(var H=new Array(arguments.length-1),Y=0;Y<H.length;)H[Y++]=arguments[Y];Q.apply(null,H)}};try{W.apply(H||null,Y)}catch(W){X&&(X=!1,Z(W))}}))}),me}var ye={},be,ve,Ee,Te,_e,we,Ae;function requireBase64(){return be||(be=1,function(W){var H=W;H.length=function(W){var H=W.length;if(!H)return 0;for(var Y=0;--H%4>1&&"="===W.charAt(H);)++Y;return Math.ceil(3*W.length)/4-Y};for(var Y=new Array(64),j=new Array(123),Q=0;Q<64;)j[Y[Q]=Q<26?Q+65:Q<52?Q+71:Q<62?Q-4:Q-59|43]=Q++;H.encode=function(W,H,j){for(var Q,X=null,Z=[],J=0,K=0;H<j;){var ee=W[H++];switch(K){case 0:Z[J++]=Y[ee>>2],Q=(3&ee)<<4,K=1;break;case 1:Z[J++]=Y[Q|ee>>4],Q=(15&ee)<<2,K=2;break;case 2:Z[J++]=Y[Q|ee>>6],Z[J++]=Y[63&ee],K=0}J>8191&&((X||(X=[])).push(String.fromCharCode.apply(String,Z)),J=0)}return K&&(Z[J++]=Y[Q],Z[J++]=61,1===K&&(Z[J++]=61)),X?(J&&X.push(String.fromCharCode.apply(String,Z.slice(0,J))),X.join("")):String.fromCharCode.apply(String,Z.slice(0,J))};var X="invalid encoding";H.decode=function(W,H,Y){for(var Q,Z=Y,J=0,K=0;K<W.length;){var ee=W.charCodeAt(K++);if(61===ee&&J>1)break;if(void 0===(ee=j[ee]))throw Error(X);switch(J){case 0:Q=ee,J=1;break;case 1:H[Y++]=Q<<2|(48&ee)>>4,Q=ee,J=2;break;case 2:H[Y++]=(15&Q)<<4|(60&ee)>>2,Q=ee,J=3;break;case 3:H[Y++]=(3&Q)<<6|ee,J=0}}if(1===J)throw Error(X);return Y-Z},H.test=function(W){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(W)}}(ye)),ye}function requireEventemitter(){if(Ee)return ve;function e(){this._listeners={}}return Ee=1,ve=e,e.prototype.on=function(W,H,Y){return(this._listeners[W]||(this._listeners[W]=[])).push({fn:H,ctx:Y||this}),this},e.prototype.off=function(W,H){if(void 0===W)this._listeners={};else if(void 0===H)this._listeners[W]=[];else for(var Y=this._listeners[W],j=0;j<Y.length;)Y[j].fn===H?Y.splice(j,1):++j;return this},e.prototype.emit=function(W){var H=this._listeners[W];if(H){for(var Y=[],j=1;j<arguments.length;)Y.push(arguments[j++]);for(j=0;j<H.length;)H[j].fn.apply(H[j++].ctx,Y)}return this},ve}function requireFloat(){if(_e)return Te;function e(W){return"undefined"!=typeof Float32Array?function(){var H=new Float32Array([-0]),Y=new Uint8Array(H.buffer),j=128===Y[3];function o(W,j,Q){H[0]=W,j[Q]=Y[0],j[Q+1]=Y[1],j[Q+2]=Y[2],j[Q+3]=Y[3]}function i(W,j,Q){H[0]=W,j[Q]=Y[3],j[Q+1]=Y[2],j[Q+2]=Y[1],j[Q+3]=Y[0]}function a(W,j){return Y[0]=W[j],Y[1]=W[j+1],Y[2]=W[j+2],Y[3]=W[j+3],H[0]}function s(W,j){return Y[3]=W[j],Y[2]=W[j+1],Y[1]=W[j+2],Y[0]=W[j+3],H[0]}W.writeFloatLE=j?o:i,W.writeFloatBE=j?i:o,W.readFloatLE=j?a:s,W.readFloatBE=j?s:a}():function(){function i(W,H,Y,j){var Q=H<0?1:0;if(Q&&(H=-H),0===H)W(1/H>0?0:2147483648,Y,j);else if(isNaN(H))W(2143289344,Y,j);else if(H>34028234663852886e22)W((Q<<31|2139095040)>>>0,Y,j);else if(H<11754943508222875e-54)W((Q<<31|Math.round(H/1401298464324817e-60))>>>0,Y,j);else{var X=Math.floor(Math.log(H)/Math.LN2);W((Q<<31|X+127<<23|8388607&Math.round(H*Math.pow(2,-X)*8388608))>>>0,Y,j)}}function a(W,H,Y){var j=W(H,Y),Q=2*(j>>31)+1,X=j>>>23&255,Z=8388607&j;return 255===X?Z?NaN:Q*(1/0):0===X?1401298464324817e-60*Q*Z:Q*Math.pow(2,X-150)*(Z+8388608)}W.writeFloatLE=i.bind(null,t),W.writeFloatBE=i.bind(null,n),W.readFloatLE=a.bind(null,r),W.readFloatBE=a.bind(null,o)}(),"undefined"!=typeof Float64Array?function(){var H=new Float64Array([-0]),Y=new Uint8Array(H.buffer),j=128===Y[7];function o(W,j,Q){H[0]=W,j[Q]=Y[0],j[Q+1]=Y[1],j[Q+2]=Y[2],j[Q+3]=Y[3],j[Q+4]=Y[4],j[Q+5]=Y[5],j[Q+6]=Y[6],j[Q+7]=Y[7]}function i(W,j,Q){H[0]=W,j[Q]=Y[7],j[Q+1]=Y[6],j[Q+2]=Y[5],j[Q+3]=Y[4],j[Q+4]=Y[3],j[Q+5]=Y[2],j[Q+6]=Y[1],j[Q+7]=Y[0]}function a(W,j){return Y[0]=W[j],Y[1]=W[j+1],Y[2]=W[j+2],Y[3]=W[j+3],Y[4]=W[j+4],Y[5]=W[j+5],Y[6]=W[j+6],Y[7]=W[j+7],H[0]}function s(W,j){return Y[7]=W[j],Y[6]=W[j+1],Y[5]=W[j+2],Y[4]=W[j+3],Y[3]=W[j+4],Y[2]=W[j+5],Y[1]=W[j+6],Y[0]=W[j+7],H[0]}W.writeDoubleLE=j?o:i,W.writeDoubleBE=j?i:o,W.readDoubleLE=j?a:s,W.readDoubleBE=j?s:a}():function(){function i(W,H,Y,j,Q,X){var Z=j<0?1:0;if(Z&&(j=-j),0===j)W(0,Q,X+H),W(1/j>0?0:2147483648,Q,X+Y);else if(isNaN(j))W(0,Q,X+H),W(2146959360,Q,X+Y);else if(j>17976931348623157e292)W(0,Q,X+H),W((Z<<31|2146435072)>>>0,Q,X+Y);else{var J;if(j<22250738585072014e-324)W((J=j/5e-324)>>>0,Q,X+H),W((Z<<31|J/4294967296)>>>0,Q,X+Y);else{var K=Math.floor(Math.log(j)/Math.LN2);1024===K&&(K=1023),W(4503599627370496*(J=j*Math.pow(2,-K))>>>0,Q,X+H),W((Z<<31|K+1023<<20|1048576*J&1048575)>>>0,Q,X+Y)}}}function a(W,H,Y,j,Q){var X=W(j,Q+H),Z=W(j,Q+Y),J=2*(Z>>31)+1,K=Z>>>20&2047,ee=4294967296*(1048575&Z)+X;return 2047===K?ee?NaN:J*(1/0):0===K?5e-324*J*ee:J*Math.pow(2,K-1075)*(ee+4503599627370496)}W.writeDoubleLE=i.bind(null,t,0,4),W.writeDoubleBE=i.bind(null,n,4,0),W.readDoubleLE=a.bind(null,r,0,4),W.readDoubleBE=a.bind(null,o,4,0)}(),W}function t(W,H,Y){H[Y]=255&W,H[Y+1]=W>>>8&255,H[Y+2]=W>>>16&255,H[Y+3]=W>>>24}function n(W,H,Y){H[Y]=W>>>24,H[Y+1]=W>>>16&255,H[Y+2]=W>>>8&255,H[Y+3]=255&W}function r(W,H){return(W[H]|W[H+1]<<8|W[H+2]<<16|W[H+3]<<24)>>>0}function o(W,H){return(W[H]<<24|W[H+1]<<16|W[H+2]<<8|W[H+3])>>>0}return _e=1,Te=e(e)}function requireInquire(){if(Ae)return we;function inquire(W){try{var H=eval("quire".replace(/^/,"re"))(W);if(H&&(H.length||Object.keys(H).length))return H}catch(W){}return null}return Ae=1,we=inquire,we}var Re={},xe,Me,Se,Be,ke,Ce,Ie,ze,Ne,Oe,Ue,Pe,Le,Fe;function requireUtf8(){return xe||(xe=1,(W=Re).length=function(W){for(var H=0,Y=0,j=0;j<W.length;++j)(Y=W.charCodeAt(j))<128?H+=1:Y<2048?H+=2:55296==(64512&Y)&&56320==(64512&W.charCodeAt(j+1))?(++j,H+=4):H+=3;return H},W.read=function(W,H,Y){if(Y-H<1)return"";for(var j,Q=null,X=[],Z=0;H<Y;)(j=W[H++])<128?X[Z++]=j:j>191&&j<224?X[Z++]=(31&j)<<6|63&W[H++]:j>239&&j<365?(j=((7&j)<<18|(63&W[H++])<<12|(63&W[H++])<<6|63&W[H++])-65536,X[Z++]=55296+(j>>10),X[Z++]=56320+(1023&j)):X[Z++]=(15&j)<<12|(63&W[H++])<<6|63&W[H++],Z>8191&&((Q||(Q=[])).push(String.fromCharCode.apply(String,X)),Z=0);return Q?(Z&&Q.push(String.fromCharCode.apply(String,X.slice(0,Z))),Q.join("")):String.fromCharCode.apply(String,X.slice(0,Z))},W.write=function(W,H,Y){for(var j,Q,X=Y,Z=0;Z<W.length;++Z)(j=W.charCodeAt(Z))<128?H[Y++]=j:j<2048?(H[Y++]=j>>6|192,H[Y++]=63&j|128):55296==(64512&j)&&56320==(64512&(Q=W.charCodeAt(Z+1)))?(j=65536+((1023&j)<<10)+(1023&Q),++Z,H[Y++]=j>>18|240,H[Y++]=j>>12&63|128,H[Y++]=j>>6&63|128,H[Y++]=63&j|128):(H[Y++]=j>>12|224,H[Y++]=j>>6&63|128,H[Y++]=63&j|128);return Y-X}),Re;var W}function requirePool(){return Se?Me:(Se=1,Me=function(W,H,Y){var j=Y||8192,Q=j>>>1,X=null,Z=j;return function(Y){if(Y<1||Y>Q)return W(Y);Z+Y>j&&(X=W(j),Z=0);var J=H.call(X,Z,Z+=Y);return 7&Z&&(Z=1+(7|Z)),J}})}function requireLongbits(){if(ke)return Be;ke=1,Be=t;var W=requireMinimal$1();function t(W,H){this.lo=W>>>0,this.hi=H>>>0}var H=t.zero=new t(0,0);H.toNumber=function(){return 0},H.zzEncode=H.zzDecode=function(){return this},H.length=function(){return 1};var Y=t.zeroHash="\0\0\0\0\0\0\0\0";t.fromNumber=function(W){if(0===W)return H;var Y=W<0;Y&&(W=-W);var j=W>>>0,Q=(W-j)/4294967296>>>0;return Y&&(Q=~Q>>>0,j=~j>>>0,++j>4294967295&&(j=0,++Q>4294967295&&(Q=0))),new t(j,Q)},t.from=function(Y){if("number"==typeof Y)return t.fromNumber(Y);if(W.isString(Y)){if(!W.Long)return t.fromNumber(parseInt(Y,10));Y=W.Long.fromString(Y)}return Y.low||Y.high?new t(Y.low>>>0,Y.high>>>0):H},t.prototype.toNumber=function(W){if(!W&&this.hi>>>31){var H=1+~this.lo>>>0,Y=~this.hi>>>0;return H||(Y=Y+1>>>0),-(H+4294967296*Y)}return this.lo+4294967296*this.hi},t.prototype.toLong=function(H){return W.Long?new W.Long(0|this.lo,0|this.hi,Boolean(H)):{low:0|this.lo,high:0|this.hi,unsigned:Boolean(H)}};var j=String.prototype.charCodeAt;return t.fromHash=function(W){return W===Y?H:new t((j.call(W,0)|j.call(W,1)<<8|j.call(W,2)<<16|j.call(W,3)<<24)>>>0,(j.call(W,4)|j.call(W,5)<<8|j.call(W,6)<<16|j.call(W,7)<<24)>>>0)},t.prototype.toHash=function(){return String.fromCharCode(255&this.lo,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,255&this.hi,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)},t.prototype.zzEncode=function(){var W=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^W)>>>0,this.lo=(this.lo<<1^W)>>>0,this},t.prototype.zzDecode=function(){var W=-(1&this.lo);return this.lo=((this.lo>>>1|this.hi<<31)^W)>>>0,this.hi=(this.hi>>>1^W)>>>0,this},t.prototype.length=function(){var W=this.lo,H=(this.lo>>>28|this.hi<<4)>>>0,Y=this.hi>>>24;return 0===Y?0===H?W<16384?W<128?1:2:W<2097152?3:4:H<16384?H<128?5:6:H<2097152?7:8:Y<128?9:10},Be}function requireMinimal$1(){return Ce||(Ce=1,function(W){var Y=W;function n(W,H,Y){for(var j=Object.keys(H),Q=0;Q<j.length;++Q)void 0!==W[j[Q]]&&Y||(W[j[Q]]=H[j[Q]]);return W}function r(W){function t(W,H){if(!(this instanceof t))return new t(W,H);Object.defineProperty(this,"message",{get:function(){return W}}),Error.captureStackTrace?Error.captureStackTrace(this,t):Object.defineProperty(this,"stack",{value:(new Error).stack||""}),H&&n(this,H)}return(t.prototype=Object.create(Error.prototype)).constructor=t,Object.defineProperty(t.prototype,"name",{get:function(){return W}}),t.prototype.toString=function(){return this.name+": "+this.message},t}Y.asPromise=requireAspromise(),Y.base64=requireBase64(),Y.EventEmitter=requireEventemitter(),Y.float=requireFloat(),Y.inquire=requireInquire(),Y.utf8=requireUtf8(),Y.pool=requirePool(),Y.LongBits=requireLongbits(),Y.isNode=Boolean(void 0!==H&&H&&H.process&&H.process.versions&&H.process.versions.node),Y.global=Y.isNode&&H||"undefined"!=typeof window&&window||"undefined"!=typeof self&&self||H,Y.emptyArray=Object.freeze?Object.freeze([]):[],Y.emptyObject=Object.freeze?Object.freeze({}):{},Y.isInteger=Number.isInteger||function(W){return"number"==typeof W&&isFinite(W)&&Math.floor(W)===W},Y.isString=function(W){return"string"==typeof W||W instanceof String},Y.isObject=function(W){return W&&"object"==typeof W},Y.isset=Y.isSet=function(W,H){var Y=W[H];return!(null==Y||!W.hasOwnProperty(H))&&("object"!=typeof Y||(Array.isArray(Y)?Y.length:Object.keys(Y).length)>0)},Y.Buffer=function(){try{var W=Y.inquire("buffer").Buffer;return W.prototype.utf8Write?W:null}catch(W){return null}}(),Y._Buffer_from=null,Y._Buffer_allocUnsafe=null,Y.newBuffer=function(W){return"number"==typeof W?Y.Buffer?Y._Buffer_allocUnsafe(W):new Y.Array(W):Y.Buffer?Y._Buffer_from(W):"undefined"==typeof Uint8Array?W:new Uint8Array(W)},Y.Array="undefined"!=typeof Uint8Array?Uint8Array:Array,Y.Long=Y.global.dcodeIO&&Y.global.dcodeIO.Long||Y.global.Long||Y.inquire("long"),Y.key2Re=/^true|false|0|1$/,Y.key32Re=/^-?(?:0|[1-9][0-9]*)$/,Y.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/,Y.longToHash=function(W){return W?Y.LongBits.from(W).toHash():Y.LongBits.zeroHash},Y.longFromHash=function(W,H){var j=Y.LongBits.fromHash(W);return Y.Long?Y.Long.fromBits(j.lo,j.hi,H):j.toNumber(Boolean(H))},Y.merge=n,Y.lcFirst=function(W){return W.charAt(0).toLowerCase()+W.substring(1)},Y.newError=r,Y.ProtocolError=r("ProtocolError"),Y.oneOfGetter=function(W){for(var H={},Y=0;Y<W.length;++Y)H[W[Y]]=1;return function(){for(var W=Object.keys(this),Y=W.length-1;Y>-1;--Y)if(1===H[W[Y]]&&void 0!==this[W[Y]]&&null!==this[W[Y]])return W[Y]}},Y.oneOfSetter=function(W){return function(H){for(var Y=0;Y<W.length;++Y)W[Y]!==H&&delete this[W[Y]]}},Y.toJSONOptions={longs:String,enums:String,bytes:String,json:!0},Y._configure=function(){var W=Y.Buffer;W?(Y._Buffer_from=W.from!==Uint8Array.from&&W.from||function(H,Y){return new W(H,Y)},Y._Buffer_allocUnsafe=W.allocUnsafe||function(H){return new W(H)}):Y._Buffer_from=Y._Buffer_allocUnsafe=null}}(pe)),pe}function requireWriter(){if(ze)return Ie;ze=1,Ie=c;var W,H=requireMinimal$1(),Y=H.LongBits,j=H.base64,Q=H.utf8;function i(W,H,Y){this.fn=W,this.len=H,this.next=void 0,this.val=Y}function a(){}function s(W){this.head=W.head,this.tail=W.tail,this.len=W.len,this.next=W.states}function c(){this.len=0,this.head=new i(a,0,0),this.tail=this.head,this.states=null}var u=function(){return H.Buffer?function(){return(c.create=function(){return new W})()}:function(){return new c}};function l(W,H,Y){H[Y]=255&W}function f(W,H){this.len=W,this.next=void 0,this.val=H}function d(W,H,Y){for(;W.hi;)H[Y++]=127&W.lo|128,W.lo=(W.lo>>>7|W.hi<<25)>>>0,W.hi>>>=7;for(;W.lo>127;)H[Y++]=127&W.lo|128,W.lo=W.lo>>>7;H[Y++]=W.lo}function m(W,H,Y){H[Y]=255&W,H[Y+1]=W>>>8&255,H[Y+2]=W>>>16&255,H[Y+3]=W>>>24}c.create=u(),c.alloc=function(W){return new H.Array(W)},H.Array!==Array&&(c.alloc=H.pool(c.alloc,H.Array.prototype.subarray)),c.prototype._push=function(W,H,Y){return this.tail=this.tail.next=new i(W,H,Y),this.len+=H,this},f.prototype=Object.create(i.prototype),f.prototype.fn=function(W,H,Y){for(;W>127;)H[Y++]=127&W|128,W>>>=7;H[Y]=W},c.prototype.uint32=function(W){return this.len+=(this.tail=this.tail.next=new f((W>>>=0)<128?1:W<16384?2:W<2097152?3:W<268435456?4:5,W)).len,this},c.prototype.int32=function(W){return W<0?this._push(d,10,Y.fromNumber(W)):this.uint32(W)},c.prototype.sint32=function(W){return this.uint32((W<<1^W>>31)>>>0)},c.prototype.uint64=function(W){var H=Y.from(W);return this._push(d,H.length(),H)},c.prototype.int64=c.prototype.uint64,c.prototype.sint64=function(W){var H=Y.from(W).zzEncode();return this._push(d,H.length(),H)},c.prototype.bool=function(W){return this._push(l,1,W?1:0)},c.prototype.fixed32=function(W){return this._push(m,4,W>>>0)},c.prototype.sfixed32=c.prototype.fixed32,c.prototype.fixed64=function(W){var H=Y.from(W);return this._push(m,4,H.lo)._push(m,4,H.hi)},c.prototype.sfixed64=c.prototype.fixed64,c.prototype.float=function(W){return this._push(H.float.writeFloatLE,4,W)},c.prototype.double=function(W){return this._push(H.float.writeDoubleLE,8,W)};var X=H.Array.prototype.set?function(W,H,Y){H.set(W,Y)}:function(W,H,Y){for(var j=0;j<W.length;++j)H[Y+j]=W[j]};return c.prototype.bytes=function(W){var Y=W.length>>>0;if(!Y)return this._push(l,1,0);if(H.isString(W)){var Q=c.alloc(Y=j.length(W));j.decode(W,Q,0),W=Q}return this.uint32(Y)._push(X,Y,W)},c.prototype.string=function(W){var H=Q.length(W);return H?this.uint32(H)._push(Q.write,H,W):this._push(l,1,0)},c.prototype.fork=function(){return this.states=new s(this),this.head=this.tail=new i(a,0,0),this.len=0,this},c.prototype.reset=function(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new i(a,0,0),this.len=0),this},c.prototype.ldelim=function(){var W=this.head,H=this.tail,Y=this.len;return this.reset().uint32(Y),Y&&(this.tail.next=W.next,this.tail=H,this.len+=Y),this},c.prototype.finish=function(){for(var W=this.head.next,H=this.constructor.alloc(this.len),Y=0;W;)W.fn(W.val,H,Y),Y+=W.len,W=W.next;return H},c._configure=function(H){W=H,c.create=u(),W._configure()},Ie}function requireWriter_buffer(){if(Oe)return Ne;Oe=1,Ne=n;var W=requireWriter();(n.prototype=Object.create(W.prototype)).constructor=n;var H=requireMinimal$1();function n(){W.call(this)}function r(W,Y,j){W.length<40?H.utf8.write(W,Y,j):Y.utf8Write?Y.utf8Write(W,j):Y.write(W,j)}return n._configure=function(){n.alloc=H._Buffer_allocUnsafe,n.writeBytesBuffer=H.Buffer&&H.Buffer.prototype instanceof Uint8Array&&"set"===H.Buffer.prototype.set.name?function(W,H,Y){H.set(W,Y)}:function(W,H,Y){if(W.copy)W.copy(H,Y,0,W.length);else for(var j=0;j<W.length;)H[Y++]=W[j++]}},n.prototype.bytes=function(W){H.isString(W)&&(W=H._Buffer_from(W,"base64"));var Y=W.length>>>0;return this.uint32(Y),Y&&this._push(n.writeBytesBuffer,Y,W),this},n.prototype.string=function(W){var Y=H.Buffer.byteLength(W);return this.uint32(Y),Y&&this._push(r,Y,W),this},n._configure(),Ne}function requireReader(){if(Pe)return Ue;Pe=1,Ue=i;var W,H=requireMinimal$1(),Y=H.LongBits,j=H.utf8;function o(W,H){return RangeError("index out of range: "+W.pos+" + "+(H||1)+" > "+W.len)}function i(W){this.buf=W,this.pos=0,this.len=W.length}var Q,X="undefined"!=typeof Uint8Array?function(W){if(W instanceof Uint8Array||Array.isArray(W))return new i(W);throw Error("illegal buffer")}:function(W){if(Array.isArray(W))return new i(W);throw Error("illegal buffer")},c=function(){return H.Buffer?function(Y){return(i.create=function(Y){return H.Buffer.isBuffer(Y)?new W(Y):X(Y)})(Y)}:X};function u(){var W=new Y(0,0),H=0;if(!(this.len-this.pos>4)){for(;H<3;++H){if(this.pos>=this.len)throw o(this);if(W.lo=(W.lo|(127&this.buf[this.pos])<<7*H)>>>0,this.buf[this.pos++]<128)return W}return W.lo=(W.lo|(127&this.buf[this.pos++])<<7*H)>>>0,W}for(;H<4;++H)if(W.lo=(W.lo|(127&this.buf[this.pos])<<7*H)>>>0,this.buf[this.pos++]<128)return W;if(W.lo=(W.lo|(127&this.buf[this.pos])<<28)>>>0,W.hi=(W.hi|(127&this.buf[this.pos])>>4)>>>0,this.buf[this.pos++]<128)return W;if(H=0,this.len-this.pos>4){for(;H<5;++H)if(W.hi=(W.hi|(127&this.buf[this.pos])<<7*H+3)>>>0,this.buf[this.pos++]<128)return W}else for(;H<5;++H){if(this.pos>=this.len)throw o(this);if(W.hi=(W.hi|(127&this.buf[this.pos])<<7*H+3)>>>0,this.buf[this.pos++]<128)return W}throw Error("invalid varint encoding")}function l(W,H){return(W[H-4]|W[H-3]<<8|W[H-2]<<16|W[H-1]<<24)>>>0}function f(){if(this.pos+8>this.len)throw o(this,8);return new Y(l(this.buf,this.pos+=4),l(this.buf,this.pos+=4))}return i.create=c(),i.prototype._slice=H.Array.prototype.subarray||H.Array.prototype.slice,i.prototype.uint32=(Q=4294967295,function(){if(Q=(127&this.buf[this.pos])>>>0,this.buf[this.pos++]<128)return Q;if(Q=(Q|(127&this.buf[this.pos])<<7)>>>0,this.buf[this.pos++]<128)return Q;if(Q=(Q|(127&this.buf[this.pos])<<14)>>>0,this.buf[this.pos++]<128)return Q;if(Q=(Q|(127&this.buf[this.pos])<<21)>>>0,this.buf[this.pos++]<128)return Q;if(Q=(Q|(15&this.buf[this.pos])<<28)>>>0,this.buf[this.pos++]<128)return Q;if((this.pos+=5)>this.len)throw this.pos=this.len,o(this,10);return Q}),i.prototype.int32=function(){return 0|this.uint32()},i.prototype.sint32=function(){var W=this.uint32();return W>>>1^-(1&W)|0},i.prototype.bool=function(){return 0!==this.uint32()},i.prototype.fixed32=function(){if(this.pos+4>this.len)throw o(this,4);return l(this.buf,this.pos+=4)},i.prototype.sfixed32=function(){if(this.pos+4>this.len)throw o(this,4);return 0|l(this.buf,this.pos+=4)},i.prototype.float=function(){if(this.pos+4>this.len)throw o(this,4);var W=H.float.readFloatLE(this.buf,this.pos);return this.pos+=4,W},i.prototype.double=function(){if(this.pos+8>this.len)throw o(this,4);var W=H.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,W},i.prototype.bytes=function(){var W=this.uint32(),H=this.pos,Y=this.pos+W;if(Y>this.len)throw o(this,W);return this.pos+=W,Array.isArray(this.buf)?this.buf.slice(H,Y):H===Y?new this.buf.constructor(0):this._slice.call(this.buf,H,Y)},i.prototype.string=function(){var W=this.bytes();return j.read(W,0,W.length)},i.prototype.skip=function(W){if("number"==typeof W){if(this.pos+W>this.len)throw o(this,W);this.pos+=W}else do{if(this.pos>=this.len)throw o(this)}while(128&this.buf[this.pos++]);return this},i.prototype.skipType=function(W){switch(W){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;4!=(W=7&this.uint32());)this.skipType(W);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+W+" at offset "+this.pos)}return this},i._configure=function(Y){W=Y,i.create=c(),W._configure();var j=H.Long?"toLong":"toNumber";H.merge(i.prototype,{int64:function(){return u.call(this)[j](!1)},uint64:function(){return u.call(this)[j](!0)},sint64:function(){return u.call(this).zzDecode()[j](!1)},fixed64:function(){return f.call(this)[j](!0)},sfixed64:function(){return f.call(this)[j](!1)}})},Ue}function requireReader_buffer(){if(Fe)return Le;Fe=1,Le=n;var W=requireReader();(n.prototype=Object.create(W.prototype)).constructor=n;var H=requireMinimal$1();function n(H){W.call(this,H)}return n._configure=function(){H.Buffer&&(n.prototype._slice=H.Buffer.prototype.slice)},n.prototype.string=function(){var W=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+W,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+W,this.len))},n._configure(),Le}var De={},Ge,qe,Ve,We,He,Ye,$e;function requireService(){if(qe)return Ge;qe=1,Ge=t;var W=requireMinimal$1();function t(H,Y,j){if("function"!=typeof H)throw TypeError("rpcImpl must be a function");W.EventEmitter.call(this),this.rpcImpl=H,this.requestDelimited=Boolean(Y),this.responseDelimited=Boolean(j)}return(t.prototype=Object.create(W.EventEmitter.prototype)).constructor=t,t.prototype.rpcCall=function t(H,Y,j,Q,X){if(!Q)throw TypeError("request must be specified");var Z=this;if(!X)return W.asPromise(t,Z,H,Y,j,Q);if(Z.rpcImpl)try{return Z.rpcImpl(H,Y[Z.requestDelimited?"encodeDelimited":"encode"](Q).finish(),(function(W,Y){if(W)return Z.emit("error",W,H),X(W);if(null!==Y){if(!(Y instanceof j))try{Y=j[Z.responseDelimited?"decodeDelimited":"decode"](Y)}catch(W){return Z.emit("error",W,H),X(W)}return Z.emit("data",Y,H),X(null,Y)}Z.end(!0)}))}catch(W){return Z.emit("error",W,H),void setTimeout((function(){X(W)}),0)}else setTimeout((function(){X(Error("already ended"))}),0)},t.prototype.end=function(W){return this.rpcImpl&&(W||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this},Ge}function requireRpc(){return Ve||(Ve=1,De.Service=requireService()),De}function requireRoots(){return He?We:(He=1,We={})}function requireIndexMinimal(){return Ye||(Ye=1,function(W){var H=W;function n(){H.util._configure(),H.Writer._configure(H.BufferWriter),H.Reader._configure(H.BufferReader)}H.build="minimal",H.Writer=requireWriter(),H.BufferWriter=requireWriter_buffer(),H.Reader=requireReader(),H.BufferReader=requireReader_buffer(),H.util=requireMinimal$1(),H.rpc=requireRpc(),H.roots=requireRoots(),H.configure=n,n()}(he)),he}function requireMinimal(){return $e||($e=1,de.exports=requireIndexMinimal()),de.exports}var je=requireMinimal();function createBasePBAnimator(){return{states:[]}}const Qe={encode(W,H=je.Writer.create()){for(const Y of W.states)Xe.encode(Y,H.uint32(10).fork()).ldelim();return H},decode(W,H){const Y=W instanceof je.Reader?W:new je.Reader(W);let j=void 0===H?Y.len:Y.pos+H;const Q=createBasePBAnimator();for(;Y.pos<j;){const W=Y.uint32();W>>>3==1?Q.states.push(Xe.decode(Y,Y.uint32())):Y.skipType(7&W)}return Q}};function createBasePBAnimationState(){return{name:"",clip:"",playing:void 0,weight:void 0,speed:void 0,loop:void 0,shouldReset:void 0}}const Xe={encode:(W,H=je.Writer.create())=>(""!==W.name&&H.uint32(10).string(W.name),""!==W.clip&&H.uint32(18).string(W.clip),void 0!==W.playing&&H.uint32(24).bool(W.playing),void 0!==W.weight&&H.uint32(37).float(W.weight),void 0!==W.speed&&H.uint32(45).float(W.speed),void 0!==W.loop&&H.uint32(48).bool(W.loop),void 0!==W.shouldReset&&H.uint32(56).bool(W.shouldReset),H),decode(W,H){const Y=W instanceof je.Reader?W:new je.Reader(W);let j=void 0===H?Y.len:Y.pos+H;const Q=createBasePBAnimationState();for(;Y.pos<j;){const W=Y.uint32();switch(W>>>3){case 1:Q.name=Y.string();break;case 2:Q.clip=Y.string();break;case 3:Q.playing=Y.bool();break;case 4:Q.weight=Y.float();break;case 5:Q.speed=Y.float();break;case 6:Q.loop=Y.bool();break;case 7:Q.shouldReset=Y.bool();break;default:Y.skipType(7&W)}}return Q}},Ze=1042,Je={serialize(W,H){const Y=Qe.encode(W),j=new Uint8Array(Y.finish(),0,Y.len);H.writeBuffer(j,!1)},deserialize:W=>Qe.decode(W.buffer(),W.remainingBytes()),create:()=>Qe.decode(new Uint8Array)};function createBasePBAudioSource(){return{playing:void 0,volume:void 0,loop:void 0,pitch:void 0,audioClipUrl:""}}const Ke={encode:(W,H=je.Writer.create())=>(void 0!==W.playing&&H.uint32(8).bool(W.playing),void 0!==W.volume&&H.uint32(21).float(W.volume),void 0!==W.loop&&H.uint32(24).bool(W.loop),void 0!==W.pitch&&H.uint32(37).float(W.pitch),""!==W.audioClipUrl&&H.uint32(42).string(W.audioClipUrl),H),decode(W,H){const Y=W instanceof je.Reader?W:new je.Reader(W);let j=void 0===H?Y.len:Y.pos+H;const Q=createBasePBAudioSource();for(;Y.pos<j;){const W=Y.uint32();switch(W>>>3){case 1:Q.playing=Y.bool();break;case 2:Q.volume=Y.float();break;case 3:Q.loop=Y.bool();break;case 4:Q.pitch=Y.float();break;case 5:Q.audioClipUrl=Y.string();break;default:Y.skipType(7&W)}}return Q}},et=1020,tt={serialize(W,H){const Y=Ke.encode(W),j=new Uint8Array(Y.finish(),0,Y.len);H.writeBuffer(j,!1)},deserialize:W=>Ke.decode(W.buffer(),W.remainingBytes()),create:()=>Ke.decode(new Uint8Array)};function createBasePBAudioStream(){return{playing:void 0,volume:void 0,url:""}}const nt={encode:(W,H=je.Writer.create())=>(void 0!==W.playing&&H.uint32(8).bool(W.playing),void 0!==W.volume&&H.uint32(21).float(W.volume),""!==W.url&&H.uint32(26).string(W.url),H),decode(W,H){const Y=W instanceof je.Reader?W:new je.Reader(W);let j=void 0===H?Y.len:Y.pos+H;const Q=createBasePBAudioStream();for(;Y.pos<j;){const W=Y.uint32();switch(W>>>3){case 1:Q.playing=Y.bool();break;case 2:Q.volume=Y.float();break;case 3:Q.url=Y.string();break;default:Y.skipType(7&W)}}return Q}},rt=1021,ot={serialize(W,H){const Y=nt.encode(W),j=new Uint8Array(Y.finish(),0,Y.len);H.writeBuffer(j,!1)},deserialize:W=>nt.decode(W.buffer(),W.remainingBytes()),create:()=>nt.decode(new Uint8Array)};var it,at;function createBasePBAvatarAttach(){return{avatarId:"",anchorPointId:0}}at=it||(it={}),at[at.AAPT_POSITION=0]="AAPT_POSITION",at[at.AAPT_NAME_TAG=1]="AAPT_NAME_TAG",at[at.AAPT_LEFT_HAND=2]="AAPT_LEFT_HAND",at[at.AAPT_RIGHT_HAND=3]="AAPT_RIGHT_HAND";const st={encode:(W,H=je.Writer.create())=>(""!==W.avatarId&&H.uint32(10).string(W.avatarId),0!==W.anchorPointId&&H.uint32(16).int32(W.anchorPointId),H),decode(W,H){const Y=W instanceof je.Reader?W:new je.Reader(W);let j=void 0===H?Y.len:Y.pos+H;const Q=createBasePBAvatarAttach();for(;Y.pos<j;){const W=Y.uint32();switch(W>>>3){case 1:Q.avatarId=Y.string();break;case 2:Q.anchorPointId=Y.int32();break;default:Y.skipType(7&W)}}return Q}},ct=1073,ut={serialize(W,H){const Y=st.encode(W),j=new Uint8Array(Y.finish(),0,Y.len);H.writeBuffer(j,!1)},deserialize:W=>st.decode(W.buffer(),W.remainingBytes()),create:()=>st.decode(new Uint8Array)};function createBaseVector3(){return{x:0,y:0,z:0}}const ft={encode:(W,H=je.Writer.create())=>(0!==W.x&&H.uint32(13).float(W.x),0!==W.y&&H.uint32(21).float(W.y),0!==W.z&&H.uint32(29).float(W.z),H),decode(W,H){const Y=W instanceof je.Reader?W:new je.Reader(W);let j=void 0===H?Y.len:Y.pos+H;const Q=createBaseVector3();for(;Y.pos<j;){const W=Y.uint32();switch(W>>>3){case 1:Q.x=Y.float();break;case 2:Q.y=Y.float();break;case 3:Q.z=Y.float();break;default:Y.skipType(7&W)}}return Q}};var lt;function createBasePBAvatarModifierArea(){return{area:void 0,excludeIds:[],modifiers:[]}}!function(W){W[W.AMT_HIDE_AVATARS=0]="AMT_HIDE_AVATARS",W[W.AMT_DISABLE_PASSPORTS=1]="AMT_DISABLE_PASSPORTS"}(lt||(lt={}));const dt={encode(W,H=je.Writer.create()){void 0!==W.area&&ft.encode(W.area,H.uint32(10).fork()).ldelim();for(const Y of W.excludeIds)H.uint32(18).string(Y);H.uint32(26).fork();for(const Y of W.modifiers)H.int32(Y);return H.ldelim(),H},decode(W,H){const Y=W instanceof je.Reader?W:new je.Reader(W);let j=void 0===H?Y.len:Y.pos+H;const Q=createBasePBAvatarModifierArea();for(;Y.pos<j;){const W=Y.uint32();switch(W>>>3){case 1:Q.area=ft.decode(Y,Y.uint32());break;case 2:Q.excludeIds.push(Y.string());break;case 3:if(2==(7&W)){const W=Y.uint32()+Y.pos;for(;Y.pos<W;)Q.modifiers.push(Y.int32())}else Q.modifiers.push(Y.int32());break;default:Y.skipType(7&W)}}return Q}},ht=1070,pt={serialize(W,H){const Y=dt.encode(W),j=new Uint8Array(Y.finish(),0,Y.len);H.writeBuffer(j,!1)},deserialize:W=>dt.decode(W.buffer(),W.remainingBytes()),create:()=>dt.decode(new Uint8Array)};var mt,gt;function requireLong(){if(gt)return mt;gt=1,mt=t;var W=null;try{W=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch(W){}function t(W,H,Y){this.low=0|W,this.high=0|H,this.unsigned=!!Y}function n(W){return!0===(W&&W.__isLong__)}t.prototype.__isLong__,Object.defineProperty(t.prototype,"__isLong__",{value:!0}),t.isLong=n;var H={},Y={};function i(W,j){var Q,X,Z;return j?(Z=0<=(W>>>=0)&&W<256)&&(X=Y[W])?X:(Q=s(W,(0|W)<0?-1:0,!0),Z&&(Y[W]=Q),Q):(Z=-128<=(W|=0)&&W<128)&&(X=H[W])?X:(Q=s(W,W<0?-1:0,!1),Z&&(H[W]=Q),Q)}function a(W,H){if(isNaN(W))return H?ee:K;if(H){if(W<0)return ee;if(W>=X)return ie}else{if(W<=-Z)return ae;if(W+1>=Z)return oe}return W<0?a(-W,H).neg():s(W%Q|0,W/Q|0,H)}function s(W,H,Y){return new t(W,H,Y)}t.fromInt=i,t.fromNumber=a,t.fromBits=s;var j=Math.pow;function u(W,H,Y){if(0===W.length)throw Error("empty string");if("NaN"===W||"Infinity"===W||"+Infinity"===W||"-Infinity"===W)return K;if("number"==typeof H?(Y=H,H=!1):H=!!H,(Y=Y||10)<2||36<Y)throw RangeError("radix");var Q;if((Q=W.indexOf("-"))>0)throw Error("interior hyphen");if(0===Q)return u(W.substring(1),H,Y).neg();for(var X=a(j(Y,8)),Z=K,J=0;J<W.length;J+=8){var ee=Math.min(8,W.length-J),te=parseInt(W.substring(J,J+ee),Y);if(ee<8){var ne=a(j(Y,ee));Z=Z.mul(ne).add(a(te))}else Z=(Z=Z.mul(X)).add(a(te))}return Z.unsigned=H,Z}function l(W,H){return"number"==typeof W?a(W,H):"string"==typeof W?u(W,H):s(W.low,W.high,"boolean"==typeof H?H:W.unsigned)}t.fromString=u,t.fromValue=l;var Q=4294967296,X=Q*Q,Z=X/2,J=i(1<<24),K=i(0);t.ZERO=K;var ee=i(0,!0);t.UZERO=ee;var te=i(1);t.ONE=te;var ne=i(1,!0);t.UONE=ne;var re=i(-1);t.NEG_ONE=re;var oe=s(-1,2147483647,!1);t.MAX_VALUE=oe;var ie=s(-1,-1,!0);t.MAX_UNSIGNED_VALUE=ie;var ae=s(0,-2147483648,!1);t.MIN_VALUE=ae;var se=t.prototype;return se.toInt=function(){return this.unsigned?this.low>>>0:this.low},se.toNumber=function(){return this.unsigned?(this.high>>>0)*Q+(this.low>>>0):this.high*Q+(this.low>>>0)},se.toString=function(W){if((W=W||10)<2||36<W)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative()){if(this.eq(ae)){var H=a(W),Y=this.div(H),Q=Y.mul(H).sub(this);return Y.toString(W)+Q.toInt().toString(W)}return"-"+this.neg().toString(W)}for(var X=a(j(W,6),this.unsigned),Z=this,J="";;){var K=Z.div(X),ee=(Z.sub(K.mul(X)).toInt()>>>0).toString(W);if((Z=K).isZero())return ee+J;for(;ee.length<6;)ee="0"+ee;J=""+ee+J}},se.getHighBits=function(){return this.high},se.getHighBitsUnsigned=function(){return this.high>>>0},se.getLowBits=function(){return this.low},se.getLowBitsUnsigned=function(){return this.low>>>0},se.getNumBitsAbs=function(){if(this.isNegative())return this.eq(ae)?64:this.neg().getNumBitsAbs();for(var W=0!=this.high?this.high:this.low,H=31;H>0&&0==(W&1<<H);H--);return 0!=this.high?H+33:H+1},se.isZero=function(){return 0===this.high&&0===this.low},se.eqz=se.isZero,se.isNegative=function(){return!this.unsigned&&this.high<0},se.isPositive=function(){return this.unsigned||this.high>=0},se.isOdd=function(){return 1==(1&this.low)},se.isEven=function(){return 0==(1&this.low)},se.equals=function(W){return n(W)||(W=l(W)),(this.unsigned===W.unsigned||this.high>>>31!=1||W.high>>>31!=1)&&this.high===W.high&&this.low===W.low},se.eq=se.equals,se.notEquals=function(W){return!this.eq(W)},se.neq=se.notEquals,se.ne=se.notEquals,se.lessThan=function(W){return this.comp(W)<0},se.lt=se.lessThan,se.lessThanOrEqual=function(W){return this.comp(W)<=0},se.lte=se.lessThanOrEqual,se.le=se.lessThanOrEqual,se.greaterThan=function(W){return this.comp(W)>0},se.gt=se.greaterThan,se.greaterThanOrEqual=function(W){return this.comp(W)>=0},se.gte=se.greaterThanOrEqual,se.ge=se.greaterThanOrEqual,se.compare=function(W){if(n(W)||(W=l(W)),this.eq(W))return 0;var H=this.isNegative(),Y=W.isNegative();return H&&!Y?-1:!H&&Y?1:this.unsigned?W.high>>>0>this.high>>>0||W.high===this.high&&W.low>>>0>this.low>>>0?-1:1:this.sub(W).isNegative()?-1:1},se.comp=se.compare,se.negate=function(){return!this.unsigned&&this.eq(ae)?ae:this.not().add(te)},se.neg=se.negate,se.add=function(W){n(W)||(W=l(W));var H=this.high>>>16,Y=65535&this.high,j=this.low>>>16,Q=65535&this.low,X=W.high>>>16,Z=65535&W.high,J=W.low>>>16,K=0,ee=0,te=0,ne=0;return te+=(ne+=Q+(65535&W.low))>>>16,ee+=(te+=j+J)>>>16,K+=(ee+=Y+Z)>>>16,K+=H+X,s((te&=65535)<<16|(ne&=65535),(K&=65535)<<16|(ee&=65535),this.unsigned)},se.subtract=function(W){return n(W)||(W=l(W)),this.add(W.neg())},se.sub=se.subtract,se.multiply=function(H){if(this.isZero())return K;if(n(H)||(H=l(H)),W)return s(W.mul(this.low,this.high,H.low,H.high),W.get_high(),this.unsigned);if(H.isZero())return K;if(this.eq(ae))return H.isOdd()?ae:K;if(H.eq(ae))return this.isOdd()?ae:K;if(this.isNegative())return H.isNegative()?this.neg().mul(H.neg()):this.neg().mul(H).neg();if(H.isNegative())return this.mul(H.neg()).neg();if(this.lt(J)&&H.lt(J))return a(this.toNumber()*H.toNumber(),this.unsigned);var Y=this.high>>>16,j=65535&this.high,Q=this.low>>>16,X=65535&this.low,Z=H.high>>>16,ee=65535&H.high,te=H.low>>>16,ne=65535&H.low,re=0,oe=0,ie=0,se=0;return ie+=(se+=X*ne)>>>16,oe+=(ie+=Q*ne)>>>16,ie&=65535,oe+=(ie+=X*te)>>>16,re+=(oe+=j*ne)>>>16,oe&=65535,re+=(oe+=Q*te)>>>16,oe&=65535,re+=(oe+=X*ee)>>>16,re+=Y*ne+j*te+Q*ee+X*Z,s((ie&=65535)<<16|(se&=65535),(re&=65535)<<16|(oe&=65535),this.unsigned)},se.mul=se.multiply,se.divide=function(H){if(n(H)||(H=l(H)),H.isZero())throw Error("division by zero");var Y,Q,X;if(W)return this.unsigned||-2147483648!==this.high||-1!==H.low||-1!==H.high?s((this.unsigned?W.div_u:W.div_s)(this.low,this.high,H.low,H.high),W.get_high(),this.unsigned):this;if(this.isZero())return this.unsigned?ee:K;if(this.unsigned){if(H.unsigned||(H=H.toUnsigned()),H.gt(this))return ee;if(H.gt(this.shru(1)))return ne;X=ee}else{if(this.eq(ae))return H.eq(te)||H.eq(re)?ae:H.eq(ae)?te:(Y=this.shr(1).div(H).shl(1)).eq(K)?H.isNegative()?te:re:(Q=this.sub(H.mul(Y)),X=Y.add(Q.div(H)));if(H.eq(ae))return this.unsigned?ee:K;if(this.isNegative())return H.isNegative()?this.neg().div(H.neg()):this.neg().div(H).neg();if(H.isNegative())return this.div(H.neg()).neg();X=K}for(Q=this;Q.gte(H);){Y=Math.max(1,Math.floor(Q.toNumber()/H.toNumber()));for(var Z=Math.ceil(Math.log(Y)/Math.LN2),J=Z<=48?1:j(2,Z-48),oe=a(Y),ie=oe.mul(H);ie.isNegative()||ie.gt(Q);)ie=(oe=a(Y-=J,this.unsigned)).mul(H);oe.isZero()&&(oe=te),X=X.add(oe),Q=Q.sub(ie)}return X},se.div=se.divide,se.modulo=function(H){return n(H)||(H=l(H)),W?s((this.unsigned?W.rem_u:W.rem_s)(this.low,this.high,H.low,H.high),W.get_high(),this.unsigned):this.sub(this.div(H).mul(H))},se.mod=se.modulo,se.rem=se.modulo,se.not=function(){return s(~this.low,~this.high,this.unsigned)},se.and=function(W){return n(W)||(W=l(W)),s(this.low&W.low,this.high&W.high,this.unsigned)},se.or=function(W){return n(W)||(W=l(W)),s(this.low|W.low,this.high|W.high,this.unsigned)},se.xor=function(W){return n(W)||(W=l(W)),s(this.low^W.low,this.high^W.high,this.unsigned)},se.shiftLeft=function(W){return n(W)&&(W=W.toInt()),0==(W&=63)?this:W<32?s(this.low<<W,this.high<<W|this.low>>>32-W,this.unsigned):s(0,this.low<<W-32,this.unsigned)},se.shl=se.shiftLeft,se.shiftRight=function(W){return n(W)&&(W=W.toInt()),0==(W&=63)?this:W<32?s(this.low>>>W|this.high<<32-W,this.high>>W,this.unsigned):s(this.high>>W-32,this.high>=0?0:-1,this.unsigned)},se.shr=se.shiftRight,se.shiftRightUnsigned=function(W){if(n(W)&&(W=W.toInt()),0==(W&=63))return this;var H=this.high;return W<32?s(this.low>>>W|H<<32-W,H>>>W,this.unsigned):s(32===W?H:H>>>W-32,0,this.unsigned)},se.shru=se.shiftRightUnsigned,se.shr_u=se.shiftRightUnsigned,se.toSigned=function(){return this.unsigned?s(this.low,this.high,!1):this},se.toUnsigned=function(){return this.unsigned?this:s(this.low,this.high,!0)},se.toBytes=function(W){return W?this.toBytesLE():this.toBytesBE()},se.toBytesLE=function(){var W=this.high,H=this.low;return[255&H,H>>>8&255,H>>>16&255,H>>>24,255&W,W>>>8&255,W>>>16&255,W>>>24]},se.toBytesBE=function(){var W=this.high,H=this.low;return[W>>>24,W>>>16&255,W>>>8&255,255&W,H>>>24,H>>>16&255,H>>>8&255,255&H]},t.fromBytes=function(W,H,Y){return Y?t.fromBytesLE(W,H):t.fromBytesBE(W,H)},t.fromBytesLE=function(W,H){return new t(W[0]|W[1]<<8|W[2]<<16|W[3]<<24,W[4]|W[5]<<8|W[6]<<16|W[7]<<24,H)},t.fromBytesBE=function(W,H){return new t(W[4]<<24|W[5]<<16|W[6]<<8|W[7],W[0]<<24|W[1]<<16|W[2]<<8|W[3],H)},mt}var yt=requireLong();function createBaseColor3(){return{r:0,g:0,b:0}}const bt={encode:(W,H=je.Writer.create())=>(0!==W.r&&H.uint32(13).float(W.r),0!==W.g&&H.uint32(21).float(W.g),0!==W.b&&H.uint32(29).float(W.b),H),decode(W,H){const Y=W instanceof je.Reader?W:new je.Reader(W);let j=void 0===H?Y.len:Y.pos+H;const Q=createBaseColor3();for(;Y.pos<j;){const W=Y.uint32();switch(W>>>3){case 1:Q.r=Y.float();break;case 2:Q.g=Y.float();break;case 3:Q.b=Y.float();break;default:Y.skipType(7&W)}}return Q}};function createBaseColor4(){return{r:0,g:0,b:0,a:0}}const vt={encode:(W,H=je.Writer.create())=>(0!==W.r&&H.uint32(13).float(W.r),0!==W.g&&H.uint32(21).float(W.g),0!==W.b&&H.uint32(29).float(W.b),0!==W.a&&H.uint32(37).float(W.a),H),decode(W,H){const Y=W instanceof je.Reader?W:new je.Reader(W);let j=void 0===H?Y.len:Y.pos+H;const Q=createBaseColor4();for(;Y.pos<j;){const W=Y.uint32();switch(W>>>3){case 1:Q.r=Y.float();break;case 2:Q.g=Y.float();break;case 3:Q.b=Y.float();break;case 4:Q.a=Y.float();break;default:Y.skipType(7&W)}}return Q}};function createBasePBAvatarShape(){return{id:"",name:void 0,bodyShape:void 0,skinColor:void 0,hairColor:void 0,eyeColor:void 0,expressionTriggerId:void 0,expressionTriggerTimestamp:void 0,talking:void 0,wearables:[],emotes:[]}}const Et={encode(W,H=je.Writer.create()){""!==W.id&&H.uint32(10).string(W.id),void 0!==W.name&&H.uint32(18).string(W.name),void 0!==W.bodyShape&&H.uint32(26).string(W.bodyShape),void 0!==W.skinColor&&bt.encode(W.skinColor,H.uint32(34).fork()).ldelim(),void 0!==W.hairColor&&bt.encode(W.hairColor,H.uint32(42).fork()).ldelim(),void 0!==W.eyeColor&&bt.encode(W.eyeColor,H.uint32(50).fork()).ldelim(),void 0!==W.expressionTriggerId&&H.uint32(58).string(W.expressionTriggerId),void 0!==W.expressionTriggerTimestamp&&H.uint32(64).int64(W.expressionTriggerTimestamp),void 0!==W.talking&&H.uint32(72).bool(W.talking);for(const Y of W.wearables)H.uint32(82).string(Y);for(const Y of W.emotes)H.uint32(90).string(Y);return H},decode(W,H){const Y=W instanceof je.Reader?W:new je.Reader(W);let j=void 0===H?Y.len:Y.pos+H;const Q=createBasePBAvatarShape();for(;Y.pos<j;){const W=Y.uint32();switch(W>>>3){case 1:Q.id=Y.string();break;case 2:Q.name=Y.string();break;case 3:Q.bodyShape=Y.string();break;case 4:Q.skinColor=bt.decode(Y,Y.uint32());break;case 5:Q.hairColor=bt.decode(Y,Y.uint32());break;case 6:Q.eyeColor=bt.decode(Y,Y.uint32());break;case 7:Q.expressionTriggerId=Y.string();break;case 8:Q.expressionTriggerTimestamp=longToNumber$1(Y.int64());break;case 9:Q.talking=Y.bool();break;case 10:Q.wearables.push(Y.string());break;case 11:Q.emotes.push(Y.string());break;default:Y.skipType(7&W)}}return Q}};var Tt=(()=>{if(void 0!==Tt)return Tt;if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if("undefined"!=typeof global)return global;throw"Unable to locate global object"})();function longToNumber$1(W){if(W.gt(Number.MAX_SAFE_INTEGER))throw new Tt.Error("Value is larger than Number.MAX_SAFE_INTEGER");return W.toNumber()}je.util.Long!==yt&&(je.util.Long=yt,je.configure());const _t=1080,wt={serialize(W,H){const Y=Et.encode(W),j=new Uint8Array(Y.finish(),0,Y.len);H.writeBuffer(j,!1)},deserialize:W=>Et.decode(W.buffer(),W.remainingBytes()),create:()=>Et.decode(new Uint8Array)};var At;function createBasePBBillboard(){return{billboardMode:void 0,oppositeDirection:void 0}}!function(W){W[W.BM_ALL_AXES=0]="BM_ALL_AXES",W[W.BM_Y_AXE=1]="BM_Y_AXE"}(At||(At={}));const Rt={encode:(W,H=je.Writer.create())=>(void 0!==W.billboardMode&&H.uint32(8).int32(W.billboardMode),void 0!==W.oppositeDirection&&H.uint32(16).bool(W.oppositeDirection),H),decode(W,H){const Y=W instanceof je.Reader?W:new je.Reader(W);let j=void 0===H?Y.len:Y.pos+H;const Q=createBasePBBillboard();for(;Y.pos<j;){const W=Y.uint32();switch(W>>>3){case 1:Q.billboardMode=Y.int32();break;case 2:Q.oppositeDirection=Y.bool();break;default:Y.skipType(7&W)}}return Q}},xt=1090,Mt={serialize(W,H){const Y=Rt.encode(W),j=new Uint8Array(Y.finish(),0,Y.len);H.writeBuffer(j,!1)},deserialize:W=>Rt.decode(W.buffer(),W.remainingBytes()),create:()=>Rt.decode(new Uint8Array)};function createBasePBCameraMode(){return{mode:0}}const St={encode:(W,H=je.Writer.create())=>(0!==W.mode&&H.uint32(8).int32(W.mode),H),decode(W,H){const Y=W instanceof je.Reader?W:new je.Reader(W);let j=void 0===H?Y.len:Y.pos+H;const Q=createBasePBCameraMode();for(;Y.pos<j;){const W=Y.uint32();W>>>3==1?Q.mode=Y.int32():Y.skipType(7&W)}return Q}},Bt=1072,kt={serialize(W,H){const Y=St.encode(W),j=new Uint8Array(Y.finish(),0,Y.len);H.writeBuffer(j,!1)},deserialize:W=>St.decode(W.buffer(),W.remainingBytes()),create:()=>St.decode(new Uint8Array)};function createBasePBCameraModeArea(){return{area:void 0,mode:0}}const Ct={encode:(W,H=je.Writer.create())=>(void 0!==W.area&&ft.encode(W.area,H.uint32(10).fork()).ldelim(),0!==W.mode&&H.uint32(16).int32(W.mode),H),decode(W,H){const Y=W instanceof je.Reader?W:new je.Reader(W);let j=void 0===H?Y.len:Y.pos+H;const Q=createBasePBCameraModeArea();for(;Y.pos<j;){const W=Y.uint32();switch(W>>>3){case 1:Q.area=ft.decode(Y,Y.uint32());break;case 2:Q.mode=Y.int32();break;default:Y.skipType(7&W)}}return Q}},It=1071,zt={serialize(W,H){const Y=Ct.encode(W),j=new Uint8Array(Y.finish(),0,Y.len);H.writeBuffer(j,!1)},deserialize:W=>Ct.decode(W.buffer(),W.remainingBytes()),create:()=>Ct.decode(new Uint8Array)};function createBasePBGltfContainer(){return{src:""}}const Nt={encode:(W,H=je.Writer.create())=>(""!==W.src&&H.uint32(10).string(W.src),H),decode(W,H){const Y=W instanceof je.Reader?W:new je.Reader(W);let j=void 0===H?Y.len:Y.pos+H;const Q=createBasePBGltfContainer();for(;Y.pos<j;){const W=Y.uint32();W>>>3==1?Q.src=Y.string():Y.skipType(7&W)}return Q}},Ot=1041,Ut={serialize(W,H){const Y=Nt.encode(W),j=new Uint8Array(Y.finish(),0,Y.len);H.writeBuffer(j,!1)},deserialize:W=>Nt.decode(W.buffer(),W.remainingBytes()),create:()=>Nt.decode(new Uint8Array)};var Pt,Lt;function createBaseTexture(){return{src:"",wrapMode:void 0,filterMode:void 0}}!function(W){W[W.TWM_REPEAT=0]="TWM_REPEAT",W[W.TWM_CLAMP=1]="TWM_CLAMP",W[W.TWM_MIRROR=2]="TWM_MIRROR",W[W.TWM_MIRROR_ONCE=3]="TWM_MIRROR_ONCE"}(Pt||(Pt={})),function(W){W[W.TFM_POINT=0]="TFM_POINT",W[W.TFM_BILINEAR=1]="TFM_BILINEAR",W[W.TFM_TRILINEAR=2]="TFM_TRILINEAR"}(Lt||(Lt={}));const Ft={encode:(W,H=je.Writer.create())=>(""!==W.src&&H.uint32(10).string(W.src),void 0!==W.wrapMode&&H.uint32(16).int32(W.wrapMode),void 0!==W.filterMode&&H.uint32(24).int32(W.filterMode),H),decode(W,H){const Y=W instanceof je.Reader?W:new je.Reader(W);let j=void 0===H?Y.len:Y.pos+H;const Q=createBaseTexture();for(;Y.pos<j;){const W=Y.uint32();switch(W>>>3){case 1:Q.src=Y.string();break;case 2:Q.wrapMode=Y.int32();break;case 3:Q.filterMode=Y.int32();break;default:Y.skipType(7&W)}}return Q}};function createBaseAvatarTexture(){return{userId:"",wrapMode:void 0,filterMode:void 0}}const Dt={encode:(W,H=je.Writer.create())=>(""!==W.userId&&H.uint32(10).string(W.userId),void 0!==W.wrapMode&&H.uint32(16).int32(W.wrapMode),void 0!==W.filterMode&&H.uint32(24).int32(W.filterMode),H),decode(W,H){const Y=W instanceof je.Reader?W:new je.Reader(W);let j=void 0===H?Y.len:Y.pos+H;const Q=createBaseAvatarTexture();for(;Y.pos<j;){const W=Y.uint32();switch(W>>>3){case 1:Q.userId=Y.string();break;case 2:Q.wrapMode=Y.int32();break;case 3:Q.filterMode=Y.int32();break;default:Y.skipType(7&W)}}return Q}};function createBaseTextureUnion(){return{tex:void 0}}const Gt={encode:(W,H=je.Writer.create())=>("texture"===W.tex?.$case&&Ft.encode(W.tex.texture,H.uint32(10).fork()).ldelim(),"avatarTexture"===W.tex?.$case&&Dt.encode(W.tex.avatarTexture,H.uint32(18).fork()).ldelim(),H),decode(W,H){const Y=W instanceof je.Reader?W:new je.Reader(W);let j=void 0===H?Y.len:Y.pos+H;const Q=createBaseTextureUnion();for(;Y.pos<j;){const W=Y.uint32();switch(W>>>3){case 1:Q.tex={$case:"texture",texture:Ft.decode(Y,Y.uint32())};break;case 2:Q.tex={$case:"avatarTexture",avatarTexture:Dt.decode(Y,Y.uint32())};break;default:Y.skipType(7&W)}}return Q}};var qt;function createBasePBMaterial(){return{texture:void 0,alphaTest:void 0,castShadows:void 0,alphaTexture:void 0,emissiveTexture:void 0,bumpTexture:void 0,albedoColor:void 0,emissiveColor:void 0,reflectivityColor:void 0,transparencyMode:void 0,metallic:void 0,roughness:void 0,glossiness:void 0,specularIntensity:void 0,emissiveIntensity:void 0,directIntensity:void 0}}!function(W){W[W.MTM_OPAQUE=0]="MTM_OPAQUE",W[W.MTM_ALPHA_TEST=1]="MTM_ALPHA_TEST",W[W.MTM_ALPHA_BLEND=2]="MTM_ALPHA_BLEND",W[W.MTM_ALPHA_TEST_AND_ALPHA_BLEND=3]="MTM_ALPHA_TEST_AND_ALPHA_BLEND",W[W.MTM_AUTO=4]="MTM_AUTO"}(qt||(qt={}));const Vt={encode:(W,H=je.Writer.create())=>(void 0!==W.texture&&Gt.encode(W.texture,H.uint32(10).fork()).ldelim(),void 0!==W.alphaTest&&H.uint32(21).float(W.alphaTest),void 0!==W.castShadows&&H.uint32(24).bool(W.castShadows),void 0!==W.alphaTexture&&Gt.encode(W.alphaTexture,H.uint32(34).fork()).ldelim(),void 0!==W.emissiveTexture&&Gt.encode(W.emissiveTexture,H.uint32(42).fork()).ldelim(),void 0!==W.bumpTexture&&Gt.encode(W.bumpTexture,H.uint32(50).fork()).ldelim(),void 0!==W.albedoColor&&bt.encode(W.albedoColor,H.uint32(58).fork()).ldelim(),void 0!==W.emissiveColor&&bt.encode(W.emissiveColor,H.uint32(66).fork()).ldelim(),void 0!==W.reflectivityColor&&bt.encode(W.reflectivityColor,H.uint32(74).fork()).ldelim(),void 0!==W.transparencyMode&&H.uint32(80).int32(W.transparencyMode),void 0!==W.metallic&&H.uint32(93).float(W.metallic),void 0!==W.roughness&&H.uint32(101).float(W.roughness),void 0!==W.glossiness&&H.uint32(109).float(W.glossiness),void 0!==W.specularIntensity&&H.uint32(117).float(W.specularIntensity),void 0!==W.emissiveIntensity&&H.uint32(125).float(W.emissiveIntensity),void 0!==W.directIntensity&&H.uint32(133).float(W.directIntensity),H),decode(W,H){const Y=W instanceof je.Reader?W:new je.Reader(W);let j=void 0===H?Y.len:Y.pos+H;const Q=createBasePBMaterial();for(;Y.pos<j;){const W=Y.uint32();switch(W>>>3){case 1:Q.texture=Gt.decode(Y,Y.uint32());break;case 2:Q.alphaTest=Y.float();break;case 3:Q.castShadows=Y.bool();break;case 4:Q.alphaTexture=Gt.decode(Y,Y.uint32());break;case 5:Q.emissiveTexture=Gt.decode(Y,Y.uint32());break;case 6:Q.bumpTexture=Gt.decode(Y,Y.uint32());break;case 7:Q.albedoColor=bt.decode(Y,Y.uint32());break;case 8:Q.emissiveColor=bt.decode(Y,Y.uint32());break;case 9:Q.reflectivityColor=bt.decode(Y,Y.uint32());break;case 10:Q.transparencyMode=Y.int32();break;case 11:Q.metallic=Y.float();break;case 12:Q.roughness=Y.float();break;case 13:Q.glossiness=Y.float();break;case 14:Q.specularIntensity=Y.float();break;case 15:Q.emissiveIntensity=Y.float();break;case 16:Q.directIntensity=Y.float();break;default:Y.skipType(7&W)}}return Q}},Wt=1017,Ht={serialize(W,H){const Y=Vt.encode(W),j=new Uint8Array(Y.finish(),0,Y.len);H.writeBuffer(j,!1)},deserialize:W=>Vt.decode(W.buffer(),W.remainingBytes()),create:()=>Vt.decode(new Uint8Array)};var Yt;function createBasePBMeshCollider(){return{collisionMask:void 0,mesh:void 0}}!function(W){W[W.CL_NONE=0]="CL_NONE",W[W.CL_POINTER=1]="CL_POINTER",W[W.CL_PHYSICS=2]="CL_PHYSICS"}(Yt||(Yt={}));const $t={encode:(W,H=je.Writer.create())=>(void 0!==W.collisionMask&&H.uint32(8).int32(W.collisionMask),"box"===W.mesh?.$case&&jt.encode(W.mesh.box,H.uint32(18).fork()).ldelim(),"sphere"===W.mesh?.$case&&Zt.encode(W.mesh.sphere,H.uint32(26).fork()).ldelim(),"cylinder"===W.mesh?.$case&&Qt.encode(W.mesh.cylinder,H.uint32(34).fork()).ldelim(),"plane"===W.mesh?.$case&&Xt.encode(W.mesh.plane,H.uint32(42).fork()).ldelim(),H),decode(W,H){const Y=W instanceof je.Reader?W:new je.Reader(W);let j=void 0===H?Y.len:Y.pos+H;const Q=createBasePBMeshCollider();for(;Y.pos<j;){const W=Y.uint32();switch(W>>>3){case 1:Q.collisionMask=Y.int32();break;case 2:Q.mesh={$case:"box",box:jt.decode(Y,Y.uint32())};break;case 3:Q.mesh={$case:"sphere",sphere:Zt.decode(Y,Y.uint32())};break;case 4:Q.mesh={$case:"cylinder",cylinder:Qt.decode(Y,Y.uint32())};break;case 5:Q.mesh={$case:"plane",plane:Xt.decode(Y,Y.uint32())};break;default:Y.skipType(7&W)}}return Q}};function createBasePBMeshCollider_BoxMesh(){return{}}const jt={encode:(W,H=je.Writer.create())=>H,decode(W,H){const Y=W instanceof je.Reader?W:new je.Reader(W);let j=void 0===H?Y.len:Y.pos+H;const Q=createBasePBMeshCollider_BoxMesh();for(;Y.pos<j;){const W=Y.uint32();Y.skipType(7&W)}return Q}};function createBasePBMeshCollider_CylinderMesh(){return{radiusTop:void 0,radiusBottom:void 0}}const Qt={encode:(W,H=je.Writer.create())=>(void 0!==W.radiusTop&&H.uint32(13).float(W.radiusTop),void 0!==W.radiusBottom&&H.uint32(21).float(W.radiusBottom),H),decode(W,H){const Y=W instanceof je.Reader?W:new je.Reader(W);let j=void 0===H?Y.len:Y.pos+H;const Q=createBasePBMeshCollider_CylinderMesh();for(;Y.pos<j;){const W=Y.uint32();switch(W>>>3){case 1:Q.radiusTop=Y.float();break;case 2:Q.radiusBottom=Y.float();break;default:Y.skipType(7&W)}}return Q}};function createBasePBMeshCollider_PlaneMesh(){return{}}const Xt={encode:(W,H=je.Writer.create())=>H,decode(W,H){const Y=W instanceof je.Reader?W:new je.Reader(W);let j=void 0===H?Y.len:Y.pos+H;const Q=createBasePBMeshCollider_PlaneMesh();for(;Y.pos<j;){const W=Y.uint32();Y.skipType(7&W)}return Q}};function createBasePBMeshCollider_SphereMesh(){return{}}const Zt={encode:(W,H=je.Writer.create())=>H,decode(W,H){const Y=W instanceof je.Reader?W:new je.Reader(W);let j=void 0===H?Y.len:Y.pos+H;const Q=createBasePBMeshCollider_SphereMesh();for(;Y.pos<j;){const W=Y.uint32();Y.skipType(7&W)}return Q}},Jt=1019,Kt={serialize(W,H){const Y=$t.encode(W),j=new Uint8Array(Y.finish(),0,Y.len);H.writeBuffer(j,!1)},deserialize:W=>$t.decode(W.buffer(),W.remainingBytes()),create:()=>$t.decode(new Uint8Array)};function createBasePBMeshRenderer(){return{mesh:void 0}}const en={encode:(W,H=je.Writer.create())=>("box"===W.mesh?.$case&&tn.encode(W.mesh.box,H.uint32(10).fork()).ldelim(),"sphere"===W.mesh?.$case&&on.encode(W.mesh.sphere,H.uint32(18).fork()).ldelim(),"cylinder"===W.mesh?.$case&&nn.encode(W.mesh.cylinder,H.uint32(26).fork()).ldelim(),"plane"===W.mesh?.$case&&rn.encode(W.mesh.plane,H.uint32(34).fork()).ldelim(),H),decode(W,H){const Y=W instanceof je.Reader?W:new je.Reader(W);let j=void 0===H?Y.len:Y.pos+H;const Q=createBasePBMeshRenderer();for(;Y.pos<j;){const W=Y.uint32();switch(W>>>3){case 1:Q.mesh={$case:"box",box:tn.decode(Y,Y.uint32())};break;case 2:Q.mesh={$case:"sphere",sphere:on.decode(Y,Y.uint32())};break;case 3:Q.mesh={$case:"cylinder",cylinder:nn.decode(Y,Y.uint32())};break;case 4:Q.mesh={$case:"plane",plane:rn.decode(Y,Y.uint32())};break;default:Y.skipType(7&W)}}return Q}};function createBasePBMeshRenderer_BoxMesh(){return{uvs:[]}}const tn={encode(W,H=je.Writer.create()){H.uint32(10).fork();for(const Y of W.uvs)H.float(Y);return H.ldelim(),H},decode(W,H){const Y=W instanceof je.Reader?W:new je.Reader(W);let j=void 0===H?Y.len:Y.pos+H;const Q=createBasePBMeshRenderer_BoxMesh();for(;Y.pos<j;){const W=Y.uint32();if(W>>>3==1)if(2==(7&W)){const W=Y.uint32()+Y.pos;for(;Y.pos<W;)Q.uvs.push(Y.float())}else Q.uvs.push(Y.float());else Y.skipType(7&W)}return Q}};function createBasePBMeshRenderer_CylinderMesh(){return{radiusTop:void 0,radiusBottom:void 0}}const nn={encode:(W,H=je.Writer.create())=>(void 0!==W.radiusTop&&H.uint32(13).float(W.radiusTop),void 0!==W.radiusBottom&&H.uint32(21).float(W.radiusBottom),H),decode(W,H){const Y=W instanceof je.Reader?W:new je.Reader(W);let j=void 0===H?Y.len:Y.pos+H;const Q=createBasePBMeshRenderer_CylinderMesh();for(;Y.pos<j;){const W=Y.uint32();switch(W>>>3){case 1:Q.radiusTop=Y.float();break;case 2:Q.radiusBottom=Y.float();break;default:Y.skipType(7&W)}}return Q}};function createBasePBMeshRenderer_PlaneMesh(){return{uvs:[]}}const rn={encode(W,H=je.Writer.create()){H.uint32(10).fork();for(const Y of W.uvs)H.float(Y);return H.ldelim(),H},decode(W,H){const Y=W instanceof je.Reader?W:new je.Reader(W);let j=void 0===H?Y.len:Y.pos+H;const Q=createBasePBMeshRenderer_PlaneMesh();for(;Y.pos<j;){const W=Y.uint32();if(W>>>3==1)if(2==(7&W)){const W=Y.uint32()+Y.pos;for(;Y.pos<W;)Q.uvs.push(Y.float())}else Q.uvs.push(Y.float());else Y.skipType(7&W)}return Q}};function createBasePBMeshRenderer_SphereMesh(){return{}}const on={encode:(W,H=je.Writer.create())=>H,decode(W,H){const Y=W instanceof je.Reader?W:new je.Reader(W);let j=void 0===H?Y.len:Y.pos+H;const Q=createBasePBMeshRenderer_SphereMesh();for(;Y.pos<j;){const W=Y.uint32();Y.skipType(7&W)}return Q}},an=1018,sn={serialize(W,H){const Y=en.encode(W),j=new Uint8Array(Y.finish(),0,Y.len);H.writeBuffer(j,!1)},deserialize:W=>en.decode(W.buffer(),W.remainingBytes()),create:()=>en.decode(new Uint8Array)};var cn;function createBasePBNftShape(){return{src:"",style:void 0,color:void 0}}!function(W){W[W.NFT_CLASSIC=0]="NFT_CLASSIC",W[W.NFT_BAROQUE_ORNAMENT=1]="NFT_BAROQUE_ORNAMENT",W[W.NFT_DIAMOND_ORNAMENT=2]="NFT_DIAMOND_ORNAMENT",W[W.NFT_MINIMAL_WIDE=3]="NFT_MINIMAL_WIDE",W[W.NFT_MINIMAL_GREY=4]="NFT_MINIMAL_GREY",W[W.NFT_BLOCKY=5]="NFT_BLOCKY",W[W.NFT_GOLD_EDGES=6]="NFT_GOLD_EDGES",W[W.NFT_GOLD_CARVED=7]="NFT_GOLD_CARVED",W[W.NFT_GOLD_WIDE=8]="NFT_GOLD_WIDE",W[W.NFT_GOLD_ROUNDED=9]="NFT_GOLD_ROUNDED",W[W.NFT_METAL_MEDIUM=10]="NFT_METAL_MEDIUM",W[W.NFT_METAL_WIDE=11]="NFT_METAL_WIDE",W[W.NFT_METAL_SLIM=12]="NFT_METAL_SLIM",W[W.NFT_METAL_ROUNDED=13]="NFT_METAL_ROUNDED",W[W.NFT_PINS=14]="NFT_PINS",W[W.NFT_MINIMAL_BLACK=15]="NFT_MINIMAL_BLACK",W[W.NFT_MINIMAL_WHITE=16]="NFT_MINIMAL_WHITE",W[W.NFT_TAPE=17]="NFT_TAPE",W[W.NFT_WOOD_SLIM=18]="NFT_WOOD_SLIM",W[W.NFT_WOOD_WIDE=19]="NFT_WOOD_WIDE",W[W.NFT_WOOD_TWIGS=20]="NFT_WOOD_TWIGS",W[W.NFT_CANVAS=21]="NFT_CANVAS",W[W.NFT_NONE=22]="NFT_NONE"}(cn||(cn={}));const un={encode:(W,H=je.Writer.create())=>(""!==W.src&&H.uint32(10).string(W.src),void 0!==W.style&&H.uint32(16).int32(W.style),void 0!==W.color&&bt.encode(W.color,H.uint32(26).fork()).ldelim(),H),decode(W,H){const Y=W instanceof je.Reader?W:new je.Reader(W);let j=void 0===H?Y.len:Y.pos+H;const Q=createBasePBNftShape();for(;Y.pos<j;){const W=Y.uint32();switch(W>>>3){case 1:Q.src=Y.string();break;case 2:Q.style=Y.int32();break;case 3:Q.color=bt.decode(Y,Y.uint32());break;default:Y.skipType(7&W)}}return Q}},fn=1040,ln={serialize(W,H){const Y=un.encode(W),j=new Uint8Array(Y.finish(),0,Y.len);H.writeBuffer(j,!1)},deserialize:W=>un.decode(W.buffer(),W.remainingBytes()),create:()=>un.decode(new Uint8Array)};function createBasePBRaycastResult(){return{timestamp:0,origin:void 0,direction:void 0,hits:[]}}const dn={encode(W,H=je.Writer.create()){0!==W.timestamp&&H.uint32(8).int32(W.timestamp),void 0!==W.origin&&ft.encode(W.origin,H.uint32(18).fork()).ldelim(),void 0!==W.direction&&ft.encode(W.direction,H.uint32(26).fork()).ldelim();for(const Y of W.hits)hn.encode(Y,H.uint32(34).fork()).ldelim();return H},decode(W,H){const Y=W instanceof je.Reader?W:new je.Reader(W);let j=void 0===H?Y.len:Y.pos+H;const Q=createBasePBRaycastResult();for(;Y.pos<j;){const W=Y.uint32();switch(W>>>3){case 1:Q.timestamp=Y.int32();break;case 2:Q.origin=ft.decode(Y,Y.uint32());break;case 3:Q.direction=ft.decode(Y,Y.uint32());break;case 4:Q.hits.push(hn.decode(Y,Y.uint32()));break;default:Y.skipType(7&W)}}return Q}};function createBaseRaycastHit(){return{position:void 0,origin:void 0,direction:void 0,normalHit:void 0,length:0,meshName:void 0,entityId:void 0}}const hn={encode:(W,H=je.Writer.create())=>(void 0!==W.position&&ft.encode(W.position,H.uint32(10).fork()).ldelim(),void 0!==W.origin&&ft.encode(W.origin,H.uint32(18).fork()).ldelim(),void 0!==W.direction&&ft.encode(W.direction,H.uint32(26).fork()).ldelim(),void 0!==W.normalHit&&ft.encode(W.normalHit,H.uint32(34).fork()).ldelim(),0!==W.length&&H.uint32(45).float(W.length),void 0!==W.meshName&&H.uint32(50).string(W.meshName),void 0!==W.entityId&&H.uint32(56).int64(W.entityId),H),decode(W,H){const Y=W instanceof je.Reader?W:new je.Reader(W);let j=void 0===H?Y.len:Y.pos+H;const Q=createBaseRaycastHit();for(;Y.pos<j;){const W=Y.uint32();switch(W>>>3){case 1:Q.position=ft.decode(Y,Y.uint32());break;case 2:Q.origin=ft.decode(Y,Y.uint32());break;case 3:Q.direction=ft.decode(Y,Y.uint32());break;case 4:Q.normalHit=ft.decode(Y,Y.uint32());break;case 5:Q.length=Y.float();break;case 6:Q.meshName=Y.string();break;case 7:Q.entityId=longToNumber(Y.int64());break;default:Y.skipType(7&W)}}return Q}};var pn=(()=>{if(void 0!==pn)return pn;if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if("undefined"!=typeof global)return global;throw"Unable to locate global object"})();function longToNumber(W){if(W.gt(Number.MAX_SAFE_INTEGER))throw new pn.Error("Value is larger than Number.MAX_SAFE_INTEGER");return W.toNumber()}function createBasePBPointerEventsResult(){return{commands:[]}}je.util.Long!==yt&&(je.util.Long=yt,je.configure());const mn={encode(W,H=je.Writer.create()){for(const Y of W.commands)gn.encode(Y,H.uint32(10).fork()).ldelim();return H},decode(W,H){const Y=W instanceof je.Reader?W:new je.Reader(W);let j=void 0===H?Y.len:Y.pos+H;const Q=createBasePBPointerEventsResult();for(;Y.pos<j;){const W=Y.uint32();W>>>3==1?Q.commands.push(gn.decode(Y,Y.uint32())):Y.skipType(7&W)}return Q}};function createBasePBPointerEventsResult_PointerCommand(){return{button:0,hit:void 0,state:0,timestamp:0,analog:void 0}}const gn={encode:(W,H=je.Writer.create())=>(0!==W.button&&H.uint32(8).int32(W.button),void 0!==W.hit&&hn.encode(W.hit,H.uint32(18).fork()).ldelim(),0!==W.state&&H.uint32(32).int32(W.state),0!==W.timestamp&&H.uint32(40).int32(W.timestamp),void 0!==W.analog&&H.uint32(53).float(W.analog),H),decode(W,H){const Y=W instanceof je.Reader?W:new je.Reader(W);let j=void 0===H?Y.len:Y.pos+H;const Q=createBasePBPointerEventsResult_PointerCommand();for(;Y.pos<j;){const W=Y.uint32();switch(W>>>3){case 1:Q.button=Y.int32();break;case 2:Q.hit=hn.decode(Y,Y.uint32());break;case 4:Q.state=Y.int32();break;case 5:Q.timestamp=Y.int32();break;case 6:Q.analog=Y.float();break;default:Y.skipType(7&W)}}return Q}},yn=1063,bn={serialize(W,H){const Y=mn.encode(W),j=new Uint8Array(Y.finish(),0,Y.len);H.writeBuffer(j,!1)},deserialize:W=>mn.decode(W.buffer(),W.remainingBytes()),create:()=>mn.decode(new Uint8Array)};var vn;function createBasePBPointerHoverFeedback(){return{pointerEvents:[]}}!function(W){W[W.PET_UP=0]="PET_UP",W[W.PET_DOWN=1]="PET_DOWN",W[W.PET_HOVER_ENTER=2]="PET_HOVER_ENTER",W[W.PET_HOVER_LEAVE=3]="PET_HOVER_LEAVE"}(vn||(vn={}));const En={encode(W,H=je.Writer.create()){for(const Y of W.pointerEvents)_n.encode(Y,H.uint32(10).fork()).ldelim();return H},decode(W,H){const Y=W instanceof je.Reader?W:new je.Reader(W);let j=void 0===H?Y.len:Y.pos+H;const Q=createBasePBPointerHoverFeedback();for(;Y.pos<j;){const W=Y.uint32();W>>>3==1?Q.pointerEvents.push(_n.decode(Y,Y.uint32())):Y.skipType(7&W)}return Q}};function createBasePBPointerHoverFeedback_Info(){return{button:void 0,hoverText:void 0,maxDistance:void 0,showFeedback:void 0}}const Tn={encode:(W,H=je.Writer.create())=>(void 0!==W.button&&H.uint32(8).int32(W.button),void 0!==W.hoverText&&H.uint32(18).string(W.hoverText),void 0!==W.maxDistance&&H.uint32(29).float(W.maxDistance),void 0!==W.showFeedback&&H.uint32(32).bool(W.showFeedback),H),decode(W,H){const Y=W instanceof je.Reader?W:new je.Reader(W);let j=void 0===H?Y.len:Y.pos+H;const Q=createBasePBPointerHoverFeedback_Info();for(;Y.pos<j;){const W=Y.uint32();switch(W>>>3){case 1:Q.button=Y.int32();break;case 2:Q.hoverText=Y.string();break;case 3:Q.maxDistance=Y.float();break;case 4:Q.showFeedback=Y.bool();break;default:Y.skipType(7&W)}}return Q}};function createBasePBPointerHoverFeedback_Entry(){return{eventType:0,eventInfo:void 0}}const _n={encode:(W,H=je.Writer.create())=>(0!==W.eventType&&H.uint32(8).int32(W.eventType),void 0!==W.eventInfo&&Tn.encode(W.eventInfo,H.uint32(18).fork()).ldelim(),H),decode(W,H){const Y=W instanceof je.Reader?W:new je.Reader(W);let j=void 0===H?Y.len:Y.pos+H;const Q=createBasePBPointerHoverFeedback_Entry();for(;Y.pos<j;){const W=Y.uint32();switch(W>>>3){case 1:Q.eventType=Y.int32();break;case 2:Q.eventInfo=Tn.decode(Y,Y.uint32());break;default:Y.skipType(7&W)}}return Q}},wn=1062,An={serialize(W,H){const Y=En.encode(W),j=new Uint8Array(Y.finish(),0,Y.len);H.writeBuffer(j,!1)},deserialize:W=>En.decode(W.buffer(),W.remainingBytes()),create:()=>En.decode(new Uint8Array)};function createBasePBPointerLock(){return{isPointerLocked:!1}}const Rn={encode:(W,H=je.Writer.create())=>(!0===W.isPointerLocked&&H.uint32(8).bool(W.isPointerLocked),H),decode(W,H){const Y=W instanceof je.Reader?W:new je.Reader(W);let j=void 0===H?Y.len:Y.pos+H;const Q=createBasePBPointerLock();for(;Y.pos<j;){const W=Y.uint32();W>>>3==1?Q.isPointerLocked=Y.bool():Y.skipType(7&W)}return Q}},xn=1074,Mn={serialize(W,H){const Y=Rn.encode(W),j=new Uint8Array(Y.finish(),0,Y.len);H.writeBuffer(j,!1)},deserialize:W=>Rn.decode(W.buffer(),W.remainingBytes()),create:()=>Rn.decode(new Uint8Array)};var Sn;function createBasePBRaycast(){return{timestamp:0,origin:void 0,direction:void 0,maxDistance:0,queryType:0}}!function(W){W[W.RQT_HIT_FIRST=0]="RQT_HIT_FIRST",W[W.RQT_QUERY_ALL=1]="RQT_QUERY_ALL"}(Sn||(Sn={}));const Bn={encode:(W,H=je.Writer.create())=>(0!==W.timestamp&&H.uint32(8).int32(W.timestamp),void 0!==W.origin&&ft.encode(W.origin,H.uint32(18).fork()).ldelim(),void 0!==W.direction&&ft.encode(W.direction,H.uint32(26).fork()).ldelim(),0!==W.maxDistance&&H.uint32(37).float(W.maxDistance),0!==W.queryType&&H.uint32(40).int32(W.queryType),H),decode(W,H){const Y=W instanceof je.Reader?W:new je.Reader(W);let j=void 0===H?Y.len:Y.pos+H;const Q=createBasePBRaycast();for(;Y.pos<j;){const W=Y.uint32();switch(W>>>3){case 1:Q.timestamp=Y.int32();break;case 2:Q.origin=ft.decode(Y,Y.uint32());break;case 3:Q.direction=ft.decode(Y,Y.uint32());break;case 4:Q.maxDistance=Y.float();break;case 5:Q.queryType=Y.int32();break;default:Y.skipType(7&W)}}return Q}},kn=1067,Cn={serialize(W,H){const Y=Bn.encode(W),j=new Uint8Array(Y.finish(),0,Y.len);H.writeBuffer(j,!1)},deserialize:W=>Bn.decode(W.buffer(),W.remainingBytes()),create:()=>Bn.decode(new Uint8Array)},In=1068,zn={serialize(W,H){const Y=dn.encode(W),j=new Uint8Array(Y.finish(),0,Y.len);H.writeBuffer(j,!1)},deserialize:W=>dn.decode(W.buffer(),W.remainingBytes()),create:()=>dn.decode(new Uint8Array)};function createBasePBTextShape(){return{text:"",font:void 0,fontSize:void 0,fontAutoSize:void 0,textAlign:void 0,width:void 0,height:void 0,paddingTop:void 0,paddingRight:void 0,paddingBottom:void 0,paddingLeft:void 0,lineSpacing:void 0,lineCount:void 0,textWrapping:void 0,shadowBlur:void 0,shadowOffsetX:void 0,shadowOffsetY:void 0,outlineWidth:void 0,shadowColor:void 0,outlineColor:void 0,textColor:void 0}}const Nn={encode:(W,H=je.Writer.create())=>(""!==W.text&&H.uint32(10).string(W.text),void 0!==W.font&&H.uint32(16).int32(W.font),void 0!==W.fontSize&&H.uint32(29).float(W.fontSize),void 0!==W.fontAutoSize&&H.uint32(32).bool(W.fontAutoSize),void 0!==W.textAlign&&H.uint32(40).int32(W.textAlign),void 0!==W.width&&H.uint32(53).float(W.width),void 0!==W.height&&H.uint32(61).float(W.height),void 0!==W.paddingTop&&H.uint32(69).float(W.paddingTop),void 0!==W.paddingRight&&H.uint32(77).float(W.paddingRight),void 0!==W.paddingBottom&&H.uint32(85).float(W.paddingBottom),void 0!==W.paddingLeft&&H.uint32(93).float(W.paddingLeft),void 0!==W.lineSpacing&&H.uint32(101).float(W.lineSpacing),void 0!==W.lineCount&&H.uint32(104).int32(W.lineCount),void 0!==W.textWrapping&&H.uint32(112).bool(W.textWrapping),void 0!==W.shadowBlur&&H.uint32(125).float(W.shadowBlur),void 0!==W.shadowOffsetX&&H.uint32(133).float(W.shadowOffsetX),void 0!==W.shadowOffsetY&&H.uint32(141).float(W.shadowOffsetY),void 0!==W.outlineWidth&&H.uint32(149).float(W.outlineWidth),void 0!==W.shadowColor&&bt.encode(W.shadowColor,H.uint32(154).fork()).ldelim(),void 0!==W.outlineColor&&bt.encode(W.outlineColor,H.uint32(162).fork()).ldelim(),void 0!==W.textColor&&vt.encode(W.textColor,H.uint32(170).fork()).ldelim(),H),decode(W,H){const Y=W instanceof je.Reader?W:new je.Reader(W);let j=void 0===H?Y.len:Y.pos+H;const Q=createBasePBTextShape();for(;Y.pos<j;){const W=Y.uint32();switch(W>>>3){case 1:Q.text=Y.string();break;case 2:Q.font=Y.int32();break;case 3:Q.fontSize=Y.float();break;case 4:Q.fontAutoSize=Y.bool();break;case 5:Q.textAlign=Y.int32();break;case 6:Q.width=Y.float();break;case 7:Q.height=Y.float();break;case 8:Q.paddingTop=Y.float();break;case 9:Q.paddingRight=Y.float();break;case 10:Q.paddingBottom=Y.float();break;case 11:Q.paddingLeft=Y.float();break;case 12:Q.lineSpacing=Y.float();break;case 13:Q.lineCount=Y.int32();break;case 14:Q.textWrapping=Y.bool();break;case 15:Q.shadowBlur=Y.float();break;case 16:Q.shadowOffsetX=Y.float();break;case 17:Q.shadowOffsetY=Y.float();break;case 18:Q.outlineWidth=Y.float();break;case 19:Q.shadowColor=bt.decode(Y,Y.uint32());break;case 20:Q.outlineColor=bt.decode(Y,Y.uint32());break;case 21:Q.textColor=vt.decode(Y,Y.uint32());break;default:Y.skipType(7&W)}}return Q}},On=1030,Un={serialize(W,H){const Y=Nn.encode(W),j=new Uint8Array(Y.finish(),0,Y.len);H.writeBuffer(j,!1)},deserialize:W=>Nn.decode(W.buffer(),W.remainingBytes()),create:()=>Nn.decode(new Uint8Array)};function createBasePBUiBackground(){return{backgroundColor:void 0}}const Pn={encode:(W,H=je.Writer.create())=>(void 0!==W.backgroundColor&&vt.encode(W.backgroundColor,H.uint32(10).fork()).ldelim(),H),decode(W,H){const Y=W instanceof je.Reader?W:new je.Reader(W);let j=void 0===H?Y.len:Y.pos+H;const Q=createBasePBUiBackground();for(;Y.pos<j;){const W=Y.uint32();W>>>3==1?Q.backgroundColor=vt.decode(Y,Y.uint32()):Y.skipType(7&W)}return Q}},Ln=1053,Fn={serialize(W,H){const Y=Pn.encode(W),j=new Uint8Array(Y.finish(),0,Y.len);H.writeBuffer(j,!1)},deserialize:W=>Pn.decode(W.buffer(),W.remainingBytes()),create:()=>Pn.decode(new Uint8Array)};function createBasePBUiText(){return{value:"",color:void 0,textAlign:void 0,font:void 0,fontSize:void 0}}const Dn={encode:(W,H=je.Writer.create())=>(""!==W.value&&H.uint32(10).string(W.value),void 0!==W.color&&bt.encode(W.color,H.uint32(18).fork()).ldelim(),void 0!==W.textAlign&&H.uint32(24).int32(W.textAlign),void 0!==W.font&&H.uint32(32).int32(W.font),void 0!==W.fontSize&&H.uint32(40).int32(W.fontSize),H),decode(W,H){const Y=W instanceof je.Reader?W:new je.Reader(W);let j=void 0===H?Y.len:Y.pos+H;const Q=createBasePBUiText();for(;Y.pos<j;){const W=Y.uint32();switch(W>>>3){case 1:Q.value=Y.string();break;case 2:Q.color=bt.decode(Y,Y.uint32());break;case 3:Q.textAlign=Y.int32();break;case 4:Q.font=Y.int32();break;case 5:Q.fontSize=Y.int32();break;default:Y.skipType(7&W)}}return Q}},Gn=1052,qn={serialize(W,H){const Y=Dn.encode(W),j=new Uint8Array(Y.finish(),0,Y.len);H.writeBuffer(j,!1)},deserialize:W=>Dn.decode(W.buffer(),W.remainingBytes()),create:()=>Dn.decode(new Uint8Array)};var Vn,Wn,Hn,Yn,$n,jn,Qn,Xn,Zn,Jn;function createBasePBUiTransform(){return{parent:0,rightOf:0,positionType:0,alignContent:0,alignItems:0,alignSelf:0,flexDirection:0,flexWrap:0,justifyContent:0,overflow:0,display:0,direction:0,flex:0,flexBasisUnit:0,flexBasis:0,flexGrow:0,flexShrink:0,widthUnit:0,width:0,heightUnit:0,height:0,minWidthUnit:0,minWidth:0,minHeightUnit:0,minHeight:0,maxWidthUnit:0,maxWidth:0,maxHeightUnit:0,maxHeight:0,positionLeftUnit:0,positionLeft:0,positionTopUnit:0,positionTop:0,positionRightUnit:0,positionRight:0,positionBottomUnit:0,positionBottom:0,marginLeftUnit:0,marginLeft:0,marginTopUnit:0,marginTop:0,marginRightUnit:0,marginRight:0,marginBottomUnit:0,marginBottom:0,paddingLeftUnit:0,paddingLeft:0,paddingTopUnit:0,paddingTop:0,paddingRightUnit:0,paddingRight:0,paddingBottomUnit:0,paddingBottom:0,borderLeft:0,borderTop:0,borderRight:0,borderBottom:0}}!function(W){W[W.YGPT_STATIC=0]="YGPT_STATIC",W[W.YGPT_RELATIVE=1]="YGPT_RELATIVE",W[W.YGPT_ABSOLUTE=2]="YGPT_ABSOLUTE"}(Vn||(Vn={})),function(W){W[W.YGA_AUTO=0]="YGA_AUTO",W[W.YGA_FLEX_START=1]="YGA_FLEX_START",W[W.YGA_CENTER=2]="YGA_CENTER",W[W.YGA_FLEX_END=3]="YGA_FLEX_END",W[W.YGA_STRETCH=4]="YGA_STRETCH",W[W.YGA_BASELINE=5]="YGA_BASELINE",W[W.YGA_SPACE_BETWEEN=6]="YGA_SPACE_BETWEEN",W[W.YGA_SPACE_AROUND=7]="YGA_SPACE_AROUND"}(Wn||(Wn={})),function(W){W[W.YGU_UNDEFINED=0]="YGU_UNDEFINED",W[W.YGU_POINT=1]="YGU_POINT",W[W.YGU_PERCENT=2]="YGU_PERCENT",W[W.YGU_AUTO=3]="YGU_AUTO"}(Hn||(Hn={})),function(W){W[W.YGD_INHERIT=0]="YGD_INHERIT",W[W.YGD_LTR=1]="YGD_LTR",W[W.YGD_RTL=2]="YGD_RTL"}(Yn||(Yn={})),function(W){W[W.YGFD_COLUMN=0]="YGFD_COLUMN",W[W.YGFD_COLUMN_REVERSE=1]="YGFD_COLUMN_REVERSE",W[W.YGFD_ROW=2]="YGFD_ROW",W[W.YGFD_ROW_REVERSE=3]="YGFD_ROW_REVERSE"}($n||($n={})),function(W){W[W.YGW_NO_WRAP=0]="YGW_NO_WRAP",W[W.YGW_WRAP=1]="YGW_WRAP",W[W.YGW_WRAP_REVERSE=2]="YGW_WRAP_REVERSE"}(jn||(jn={})),function(W){W[W.YGJ_FLEX_START=0]="YGJ_FLEX_START",W[W.YGJ_CENTER=1]="YGJ_CENTER",W[W.YGJ_FLEX_END=2]="YGJ_FLEX_END",W[W.YGJ_SPACE_BETWEEN=3]="YGJ_SPACE_BETWEEN",W[W.YGJ_SPACE_AROUND=4]="YGJ_SPACE_AROUND",W[W.YGJ_SPACE_EVENLY=5]="YGJ_SPACE_EVENLY"}(Qn||(Qn={})),function(W){W[W.YGO_VISIBLE=0]="YGO_VISIBLE",W[W.YGO_HIDDEN=1]="YGO_HIDDEN",W[W.YGO_SCROLL=2]="YGO_SCROLL"}(Xn||(Xn={})),function(W){W[W.YGD_FLEX=0]="YGD_FLEX",W[W.YGD_NONE=1]="YGD_NONE"}(Zn||(Zn={})),function(W){W[W.YGE_LEFT=0]="YGE_LEFT",W[W.YGE_TOP=1]="YGE_TOP",W[W.YGE_RIGHT=2]="YGE_RIGHT",W[W.YGE_BOTTOM=3]="YGE_BOTTOM",W[W.YGE_START=4]="YGE_START",W[W.YGE_END=5]="YGE_END",W[W.YGE_HORIZONTAL=6]="YGE_HORIZONTAL",W[W.YGE_VERTICAL=7]="YGE_VERTICAL",W[W.YGE_ALL=8]="YGE_ALL"}(Jn||(Jn={}));const Kn={encode:(W,H=je.Writer.create())=>(0!==W.parent&&H.uint32(632).int32(W.parent),0!==W.rightOf&&H.uint32(640).int32(W.rightOf),0!==W.positionType&&H.uint32(8).int32(W.positionType),0!==W.alignContent&&H.uint32(16).int32(W.alignContent),0!==W.alignItems&&H.uint32(24).int32(W.alignItems),0!==W.alignSelf&&H.uint32(32).int32(W.alignSelf),0!==W.flexDirection&&H.uint32(40).int32(W.flexDirection),0!==W.flexWrap&&H.uint32(48).int32(W.flexWrap),0!==W.justifyContent&&H.uint32(56).int32(W.justifyContent),0!==W.overflow&&H.uint32(64).int32(W.overflow),0!==W.display&&H.uint32(72).int32(W.display),0!==W.direction&&H.uint32(80).int32(W.direction),0!==W.flex&&H.uint32(93).float(W.flex),0!==W.flexBasisUnit&&H.uint32(104).int32(W.flexBasisUnit),0!==W.flexBasis&&H.uint32(117).float(W.flexBasis),0!==W.flexGrow&&H.uint32(125).float(W.flexGrow),0!==W.flexShrink&&H.uint32(133).float(W.flexShrink),0!==W.widthUnit&&H.uint32(136).int32(W.widthUnit),0!==W.width&&H.uint32(149).float(W.width),0!==W.heightUnit&&H.uint32(152).int32(W.heightUnit),0!==W.height&&H.uint32(165).float(W.height),0!==W.minWidthUnit&&H.uint32(168).int32(W.minWidthUnit),0!==W.minWidth&&H.uint32(181).float(W.minWidth),0!==W.minHeightUnit&&H.uint32(184).int32(W.minHeightUnit),0!==W.minHeight&&H.uint32(197).float(W.minHeight),0!==W.maxWidthUnit&&H.uint32(248).int32(W.maxWidthUnit),0!==W.maxWidth&&H.uint32(261).float(W.maxWidth),0!==W.maxHeightUnit&&H.uint32(264).int32(W.maxHeightUnit),0!==W.maxHeight&&H.uint32(277).float(W.maxHeight),0!==W.positionLeftUnit&&H.uint32(328).int32(W.positionLeftUnit),0!==W.positionLeft&&H.uint32(341).float(W.positionLeft),0!==W.positionTopUnit&&H.uint32(344).int32(W.positionTopUnit),0!==W.positionTop&&H.uint32(357).float(W.positionTop),0!==W.positionRightUnit&&H.uint32(360).int32(W.positionRightUnit),0!==W.positionRight&&H.uint32(373).float(W.positionRight),0!==W.positionBottomUnit&&H.uint32(376).int32(W.positionBottomUnit),0!==W.positionBottom&&H.uint32(389).float(W.positionBottom),0!==W.marginLeftUnit&&H.uint32(408).int32(W.marginLeftUnit),0!==W.marginLeft&&H.uint32(421).float(W.marginLeft),0!==W.marginTopUnit&&H.uint32(424).int32(W.marginTopUnit),0!==W.marginTop&&H.uint32(437).float(W.marginTop),0!==W.marginRightUnit&&H.uint32(440).int32(W.marginRightUnit),0!==W.marginRight&&H.uint32(453).float(W.marginRight),0!==W.marginBottomUnit&&H.uint32(456).int32(W.marginBottomUnit),0!==W.marginBottom&&H.uint32(469).float(W.marginBottom),0!==W.paddingLeftUnit&&H.uint32(488).int32(W.paddingLeftUnit),0!==W.paddingLeft&&H.uint32(501).float(W.paddingLeft),0!==W.paddingTopUnit&&H.uint32(504).int32(W.paddingTopUnit),0!==W.paddingTop&&H.uint32(517).float(W.paddingTop),0!==W.paddingRightUnit&&H.uint32(520).int32(W.paddingRightUnit),0!==W.paddingRight&&H.uint32(533).float(W.paddingRight),0!==W.paddingBottomUnit&&H.uint32(536).int32(W.paddingBottomUnit),0!==W.paddingBottom&&H.uint32(549).float(W.paddingBottom),0!==W.borderLeft&&H.uint32(581).float(W.borderLeft),0!==W.borderTop&&H.uint32(597).float(W.borderTop),0!==W.borderRight&&H.uint32(613).float(W.borderRight),0!==W.borderBottom&&H.uint32(629).float(W.borderBottom),H),decode(W,H){const Y=W instanceof je.Reader?W:new je.Reader(W);let j=void 0===H?Y.len:Y.pos+H;const Q=createBasePBUiTransform();for(;Y.pos<j;){const W=Y.uint32();switch(W>>>3){case 79:Q.parent=Y.int32();break;case 80:Q.rightOf=Y.int32();break;case 1:Q.positionType=Y.int32();break;case 2:Q.alignContent=Y.int32();break;case 3:Q.alignItems=Y.int32();break;case 4:Q.alignSelf=Y.int32();break;case 5:Q.flexDirection=Y.int32();break;case 6:Q.flexWrap=Y.int32();break;case 7:Q.justifyContent=Y.int32();break;case 8:Q.overflow=Y.int32();break;case 9:Q.display=Y.int32();break;case 10:Q.direction=Y.int32();break;case 11:Q.flex=Y.float();break;case 13:Q.flexBasisUnit=Y.int32();break;case 14:Q.flexBasis=Y.float();break;case 15:Q.flexGrow=Y.float();break;case 16:Q.flexShrink=Y.float();break;case 17:Q.widthUnit=Y.int32();break;case 18:Q.width=Y.float();break;case 19:Q.heightUnit=Y.int32();break;case 20:Q.height=Y.float();break;case 21:Q.minWidthUnit=Y.int32();break;case 22:Q.minWidth=Y.float();break;case 23:Q.minHeightUnit=Y.int32();break;case 24:Q.minHeight=Y.float();break;case 31:Q.maxWidthUnit=Y.int32();break;case 32:Q.maxWidth=Y.float();break;case 33:Q.maxHeightUnit=Y.int32();break;case 34:Q.maxHeight=Y.float();break;case 41:Q.positionLeftUnit=Y.int32();break;case 42:Q.positionLeft=Y.float();break;case 43:Q.positionTopUnit=Y.int32();break;case 44:Q.positionTop=Y.float();break;case 45:Q.positionRightUnit=Y.int32();break;case 46:Q.positionRight=Y.float();break;case 47:Q.positionBottomUnit=Y.int32();break;case 48:Q.positionBottom=Y.float();break;case 51:Q.marginLeftUnit=Y.int32();break;case 52:Q.marginLeft=Y.float();break;case 53:Q.marginTopUnit=Y.int32();break;case 54:Q.marginTop=Y.float();break;case 55:Q.marginRightUnit=Y.int32();break;case 56:Q.marginRight=Y.float();break;case 57:Q.marginBottomUnit=Y.int32();break;case 58:Q.marginBottom=Y.float();break;case 61:Q.paddingLeftUnit=Y.int32();break;case 62:Q.paddingLeft=Y.float();break;case 63:Q.paddingTopUnit=Y.int32();break;case 64:Q.paddingTop=Y.float();break;case 65:Q.paddingRightUnit=Y.int32();break;case 66:Q.paddingRight=Y.float();break;case 67:Q.paddingBottomUnit=Y.int32();break;case 68:Q.paddingBottom=Y.float();break;case 72:Q.borderLeft=Y.float();break;case 74:Q.borderTop=Y.float();break;case 76:Q.borderRight=Y.float();break;case 78:Q.borderBottom=Y.float();break;default:Y.skipType(7&W)}}return Q}},er=1050,tr={serialize(W,H){const Y=Kn.encode(W),j=new Uint8Array(Y.finish(),0,Y.len);H.writeBuffer(j,!1)},deserialize:W=>Kn.decode(W.buffer(),W.remainingBytes()),create:()=>Kn.decode(new Uint8Array)};function createBasePBVisibilityComponent(){return{visible:void 0}}const nr={encode:(W,H=je.Writer.create())=>(void 0!==W.visible&&H.uint32(8).bool(W.visible),H),decode(W,H){const Y=W instanceof je.Reader?W:new je.Reader(W);let j=void 0===H?Y.len:Y.pos+H;const Q=createBasePBVisibilityComponent();for(;Y.pos<j;){const W=Y.uint32();W>>>3==1?Q.visible=Y.bool():Y.skipType(7&W)}return Q}},rr=1081,or={serialize(W,H){const Y=nr.encode(W),j=new Uint8Array(Y.finish(),0,Y.len);H.writeBuffer(j,!1)},deserialize:W=>nr.decode(W.buffer(),W.remainingBytes()),create:()=>nr.decode(new Uint8Array)};function defineLibraryComponents({defineComponentFromSchema:W}){return{Animator:W(Je,Ze),AudioSource:W(tt,et),AudioStream:W(ot,rt),AvatarAttach:W(ut,ct),AvatarModifierArea:W(pt,ht),AvatarShape:W(wt,_t),Billboard:W(Mt,xt),CameraMode:W(kt,Bt),CameraModeArea:W(zt,It),GltfContainer:W(Ut,Ot),Material:W(Ht,Wt),MeshCollider:W(Kt,Jt),MeshRenderer:W(sn,an),NftShape:W(ln,fn),PointerEventsResult:W(bn,yn),PointerHoverFeedback:W(An,wn),PointerLock:W(Mn,xn),Raycast:W(Cn,kn),RaycastResult:W(zn,In),TextShape:W(Un,On),UiBackground:W(Fn,Ln),UiText:W(qn,Gn),UiTransform:W(tr,er),VisibilityComponent:W(or,rr)}}const ir=1,ar=44,sr={serialize(W,H){const Y=H.incrementWriteOffset(ar);H.setFloat32(Y,W.position.x),H.setFloat32(Y+4,W.position.y),H.setFloat32(Y+8,W.position.z),H.setFloat32(Y+12,W.rotation.x),H.setFloat32(Y+16,W.rotation.y),H.setFloat32(Y+20,W.rotation.z),H.setFloat32(Y+24,W.rotation.w),H.setFloat32(Y+28,W.scale.x),H.setFloat32(Y+32,W.scale.y),H.setFloat32(Y+36,W.scale.z),H.setUint32(Y+40,W.parent||0)},deserialize(W){const H=W.incrementReadOffset(ar);return{position:{x:W.getFloat32(H),y:W.getFloat32(H+4),z:W.getFloat32(H+8)},rotation:{x:W.getFloat32(H+12),y:W.getFloat32(H+16),z:W.getFloat32(H+20),w:W.getFloat32(H+24)},scale:{x:W.getFloat32(H+28),y:W.getFloat32(H+32),z:W.getFloat32(H+36)},parent:W.getUint32(H+40)}},create:()=>({position:{x:0,y:0,z:0},scale:{x:1,y:1,z:1},rotation:{x:0,y:0,z:0,w:1}})};function defineTransformComponent({defineComponentFromSchema:W}){return W(sr,ir)}var cr;function defineSdkComponents(W){return{...defineLibraryComponents(W),Transform:defineTransformComponent(W)}}function IArray(W){return{serialize(H,Y){Y.writeUint32(H.length);for(const j of H)W.serialize(j,Y)},deserialize(H){const Y=[],j=H.readUint32();for(let Q=0;Q<j;Q++)Y.push(W.deserialize(H));return Y},create:()=>[]}}!function(W){W[W.SYNC=1e3]="SYNC"}(cr||(cr={}));const ur={serialize(W,H){H.writeInt8(W?1:0)},deserialize:W=>1===W.readInt8(),create:()=>!1};function IEnum(W){return{serialize(H,Y){W.serialize(H,Y)},deserialize:H=>W.deserialize(H),create:()=>W.create()}}const fr={serialize(W,H){H.writeFloat32(W)},deserialize:W=>W.readFloat32(),create:()=>0},lr={serialize(W,H){H.writeFloat64(W)},deserialize:W=>W.readFloat64(),create:()=>0},dr={serialize(W,H){H.writeInt64(BigInt(W))},deserialize:W=>Number(W.readInt64()),create:()=>0},hr={serialize(W,H){H.writeInt32(W)},deserialize:W=>W.readInt32(),create:()=>0},pr={serialize(W,H){H.writeInt16(W)},deserialize:W=>W.readInt16(),create:()=>0},mr={serialize(W,H){H.writeInt8(W)},deserialize:W=>W.readInt8(),create:()=>0},gr={serialize(W,H){H.writeBuffer((new TextEncoder).encode(W))},deserialize:W=>(new TextDecoder).decode(W.readBuffer()),create:()=>""},yr=gr,br={serialize(W,H){H.writeFloat32(W.r),H.writeFloat32(W.g),H.writeFloat32(W.b)},deserialize:W=>({r:W.readFloat32(),g:W.readFloat32(),b:W.readFloat32()}),create:()=>({r:0,g:0,b:0})},vr={serialize(W,H){H.writeFloat32(W.r),H.writeFloat32(W.g),H.writeFloat32(W.b),H.writeFloat32(W.a)},deserialize:W=>({r:W.readFloat32(),g:W.readFloat32(),b:W.readFloat32(),a:W.readFloat32()}),create:()=>({r:0,g:0,b:0,a:0})},Er={serialize(W,H){H.writeFloat32(W.x),H.writeFloat32(W.y),H.writeFloat32(W.z),H.writeFloat32(W.w)},deserialize:W=>({x:W.readFloat32(),y:W.readFloat32(),z:W.readFloat32(),w:W.readFloat32()}),create:()=>({x:0,y:0,z:0,w:0})},Tr={serialize(W,H){H.writeFloat32(W.x),H.writeFloat32(W.y),H.writeFloat32(W.z)},deserialize:W=>({x:W.readFloat32(),y:W.readFloat32(),z:W.readFloat32()}),create:()=>({x:0,y:0,z:0})};function IMap(W){return{serialize(H,Y){for(const j in W)W[j].serialize(H[j],Y)},deserialize(H){const Y={};for(const j in W)Y[j]=W[j].deserialize(H);return Y},create(){const H={};for(const Y in W)H[Y]=W[Y].create();return H}}}function IOptional(W){return{serialize(H,Y){H?(Y.writeInt8(1),W.serialize(H,Y)):Y.writeInt8(0)},deserialize(H){if(H.readInt8())return W.deserialize(H)},create(){}}}var _r;W.Schemas=void 0,_r=W.Schemas||(W.Schemas={}),_r.Boolean=ur,_r.String=yr,_r.Float=fr,_r.Double=lr,_r.Byte=mr,_r.Short=pr,_r.Int=hr,_r.Int64=dr,_r.Number=fr,_r.Vector3=Tr,_r.Quaternion=Er,_r.Color3=br,_r.Color4=vr,_r.Enum=IEnum,_r.Array=IArray,_r.Map=IMap,_r.Optional=IOptional;var wr={},Ar={},Rr,xr;function requireTypes(){return Rr||(Rr=1,Object.defineProperty(Ar,"__esModule",{value:!0})),Ar}function requireDist(){return xr||(xr=1,function(W){var Y=H&&H.__createBinding||(Object.create?function(W,H,Y,j){void 0===j&&(j=Y),Object.defineProperty(W,j,{enumerable:!0,get:function(){return H[Y]}})}:function(W,H,Y,j){void 0===j&&(j=Y),W[j]=H[Y]}),j=H&&H.__exportStar||function(W,H){for(var j in W)"default"===j||Object.prototype.hasOwnProperty.call(H,j)||Y(H,W,j)};Object.defineProperty(W,"__esModule",{value:!0}),W.crdtProtocol=W.stateIterator=W.sameData=void 0,j(requireTypes(),W);const Q=globalThis.Buffer;function o(W,H){if(W===H)return!0;if(W instanceof Uint8Array&&H instanceof Uint8Array){if(W.byteLength!==H.byteLength)return!1;for(let Y=0;Y<W.byteLength;Y++)if(W[Y]!==H[Y])return!1;return!0}return!!(Q&&W instanceof Q&&H instanceof Q)&&W.equals(H)}W.sameData=o,W.stateIterator=function*(W){for(const[H,Y]of W.entries())for(const[W,j]of Y.entries())yield[H,W,j]},W.crdtProtocol=function(){const W=new Map;function t(H,Y,j,Q){const X=W.get(H),Z=Math.max(Q,X?.get(Y)?.timestamp||0);if(X)X.set(Y,{timestamp:Z,data:j});else{const Q=new Map;Q.set(Y,{timestamp:Z,data:j}),W.set(H,Q)}return{timestamp:Z,data:j}}return{createEvent:function(H,Y,j){const Q=(W.get(H)?.get(Y)?.timestamp||0)+1;return t(H,Y,j,Q),{key1:H,key2:Y,data:j,timestamp:Q}},processMessage:function(H){const{key1:Y,key2:j,data:Q,timestamp:X}=H,Z=W.get(Y)?.get(j);return!Z||Z.timestamp<X?(t(Y,j,Q,X),H):Z.timestamp>X?{key1:Y,key2:j,data:Z.data,timestamp:Z.timestamp}:o(Z.data,Q)?H:function(W,H){return W>H}(Z.data,Q)?{key1:Y,key2:j,data:Z.data,timestamp:Z.timestamp}:(t(Y,j,Q,X).data,H)},getState:function(){return W}}}}(wr)),wr}var Mr=requireDist();function getNextSize(W,H){const Y=Math.max(W,H)+1024;return 1024*Math.ceil(Y/1024)}const Sr=10240;function createByteBuffer(W={}){const H=W.reading?.currentOffset||0;let Y=null,j=0;W.writing?(Y=W.writing.buffer,W.writing.currentOffset&&(j=W.writing.currentOffset)):W.reading?(Y=W.reading.buffer,j=W.reading.length||W.reading.buffer.length):Y=new Uint8Array(W.initialCapacity||Sr);let Q=Y,X=new DataView(Q.buffer,Q.byteOffset),Z=j,J=H;const c=W=>{if(Z+W>Q.byteLength){const H=getNextSize(Q.byteLength,Z+W),Y=new Uint8Array(H);Y.set(Q),Q=Y,X=new DataView(Q.buffer)}return Z+=W,Z-W},u=W=>{if(J+W>Z)throw new Error("Outside of the bounds of writen data.");return J+=W,J-W};return{buffer:()=>Q,bufferLength:()=>Q.length,resetBuffer(){J=0,Z=0},currentReadOffset:()=>J,currentWriteOffset:()=>Z,incrementReadOffset:W=>u(W),remainingBytes:()=>Z-J,readFloat32:()=>X.getFloat32(u(4)),readFloat64:()=>X.getFloat64(u(8)),readInt8:()=>X.getInt8(u(1)),readInt16:()=>X.getInt16(u(2)),readInt32:()=>X.getInt32(u(4)),readInt64:()=>X.getBigInt64(u(8)),readUint8:()=>X.getUint8(u(1)),readUint16:()=>X.getUint16(u(2)),readUint32:()=>X.getUint32(u(4)),readUint64:()=>X.getBigUint64(u(8)),readBuffer(){const W=X.getUint32(u(4));return Q.subarray(u(W),u(0))},incrementWriteOffset:W=>c(W),size:()=>Z,toBinary:()=>Q.subarray(0,Z),toCopiedBinary(){return new Uint8Array(this.toBinary())},writeBuffer(W,H=!0){H&&this.writeUint32(W.byteLength);const Y=c(W.byteLength);Q.set(W,Y)},writeFloat32(W){const H=c(4);X.setFloat32(H,W)},writeFloat64(W){const H=c(8);X.setFloat64(H,W)},writeInt8(W){const H=c(1);X.setInt8(H,W)},writeInt16(W){const H=c(2);X.setInt16(H,W)},writeInt32(W){const H=c(4);X.setInt32(H,W)},writeInt64(W){const H=c(8);X.setBigInt64(H,W)},writeUint8(W){const H=c(1);X.setUint8(H,W)},writeUint16(W){const H=c(2);X.setUint16(H,W)},writeUint32(W){const H=c(4);X.setUint32(H,W)},writeUint64(W){const H=c(8);X.setBigUint64(H,W)},getFloat32:W=>X.getFloat32(W),getFloat64:W=>X.getFloat64(W),getInt8:W=>X.getInt8(W),getInt16:W=>X.getInt16(W),getInt32:W=>X.getInt32(W),getInt64:W=>X.getBigInt64(W),getUint8:W=>X.getUint8(W),getUint16:W=>X.getUint16(W),getUint32:W=>X.getUint32(W),getUint64:W=>X.getBigUint64(W),setFloat32(W,H){X.setFloat32(W,H)},setFloat64(W,H){X.setFloat64(W,H)},setInt8(W,H){X.setInt8(W,H)},setInt16(W,H){X.setInt16(W,H)},setInt32(W,H){X.setInt32(W,H)},setInt64(W,H){X.setBigInt64(W,H)},setUint8(W,H){X.setUint8(W,H)},setUint16(W,H){X.setUint16(W,H)},setUint32(W,H){X.setUint32(W,H)},setUint64(W,H){X.setBigUint64(W,H)}}}var Br;!function(W){var H;function n(H){const Y=H.remainingBytes();return!(Y<W.HEADER_LENGTH||Y<H.getUint32(H.currentReadOffset()))}(H=W.Enum||(W.Enum={}))[H.RESERVED=0]="RESERVED",H[H.PUT_COMPONENT=1]="PUT_COMPONENT",H[H.DELETE_COMPONENT=2]="DELETE_COMPONENT",H[H.MAX_MESSAGE_TYPE=3]="MAX_MESSAGE_TYPE",W.HEADER_LENGTH=8,W.validate=n,W.readHeader=function(W){return n(W)?{length:W.readUint32(),type:W.readUint32()}:null}}(Br||(Br={}));var kr=Br,Cr,Ir;function crdtSceneSystem({engine:W}){const H=[],Y=Mr.crdtProtocol(),j=[],Q=[];function i(W){const H=Array.from(W);return W.length=0,H}return{createMessages:function(j){const X=i(Q),Z=createByteBuffer();for(const[Q,J]of j)for(const j of J){const J=W.getComponent(j),K=J.has(Q)?J.toBinary(Q).toBinary():null,ee=Y.createEvent(Q,j,K),te=Z.currentWriteOffset(),ne=J.has(Q)?kr.Enum.PUT_COMPONENT:kr.Enum.DELETE_COMPONENT,re={type:ne,componentId:j,entity:Q,timestamp:ee.timestamp};H.some((W=>W.filter(re)))&&(Cr.write(ne,Q,ee.timestamp,J,Z),X.push({...re,messageBuffer:Z.buffer().subarray(te,Z.currentWriteOffset())}))}const J=createByteBuffer();for(const W of H){J.resetBuffer();for(const H of X)W.filter(H)&&J.writeBuffer(H.messageBuffer,!1);J.size()&&W.send(J.toBinary())}},receiveMessages:function(){const X=i(j);for(const j of H){const H=createByteBuffer();for(const j of X){const{data:X,timestamp:Z,componentId:J,entity:K,type:ee}=j,te={key1:K,key2:J,data:X||null,timestamp:Z},ne=W.getComponent(J),re=Y.processMessage(te);if(te!==re){const W=ne.has(K)?kr.Enum.PUT_COMPONENT:kr.Enum.DELETE_COMPONENT;Cr.write(W,K,re.timestamp,ne,H)}else{if(ee===kr.Enum.DELETE_COMPONENT)ne.deleteFrom(K);else{const W=createByteBuffer({reading:{buffer:j.data,currentOffset:0}});ne.upsertFromBinary(j.entity,W),ne.clearDirty()}Q.push(j)}}H.size()&&j.send(H.toBinary())}},addTransport:function(W){var Y;H.push(W),W.onmessage=(Y=W.type,function(W){const H=createByteBuffer({reading:{buffer:W,currentOffset:0}});for(;kr.validate(H);){const W=H.currentReadOffset(),Q=Cr.read(H),{type:X,entity:Z,componentId:J,data:K,timestamp:ee}=Q;j.push({type:X,entity:Z,componentId:J,data:K,timestamp:ee,transportType:Y,messageBuffer:H.buffer().subarray(W,H.currentReadOffset())})}})}}}function deepReadonly(W){return Object.freeze({...W})}function defineComponent(W,H,Y){const j=new Map,Q=new Set,X=createByteBuffer();function a(){return Y?H.deserialize(createByteBuffer({writing:{buffer:X.buffer(),currentOffset:X.currentWriteOffset()}})):H.create()}function s(W){return{...a(),...W}}return Y&&H.serialize(Y,X),{_id:W,default:function(){return a()},isDirty:function(W){return Q.has(W)},has:function(W){return j.has(W)},deleteFrom:function(W){const H=j.get(W);return j.delete(W),Q.add(W),H||null},getOrNull:function(W){const H=j.get(W);return H?deepReadonly(H):null},get:function(H){const Y=j.get(H);if(!Y)throw new Error(`[getFrom] Component ${W} for ${H} not found`);return deepReadonly(Y)},create:function(H,Y){if(j.get(H))throw new Error(`[create] Component ${W} for ${H} already exists`);const X=void 0===Y?a():s(Y);return j.set(H,X),Q.add(H),X},createOrReplace:function(W,H){const Y=void 0===H?a():s(H);return j.set(W,Y),Q.add(W),Y},getMutableOrNull:function(W){const H=j.get(W);return H?(Q.add(W),H):null},getMutable:function(H){const Y=this.getMutableOrNull(H);if(null===Y)throw new Error(`[mutable] Component ${W} for ${H} not found`);return Y},iterator:function*(){for(const[W,H]of j)yield[W,H]},dirtyIterator:function*(){for(const W of Q)yield W},toBinary(Y){const Q=j.get(Y);if(!Q)throw new Error(`[toBinary] Component ${W} for ${Y} not found`);const X=createByteBuffer();return H.serialize(Q,X),X},writeToByteBuffer(Y,Q){const X=j.get(Y);if(!X)throw new Error(`[writeToByteBuffer] Component ${W} for ${Y} not found`);H.serialize(X,Q)},updateFromBinary(H,Y){if(!j.get(H))throw new Error(`[updateFromBinary] Component ${W} for ${H} not found`);return this.upsertFromBinary(H,Y)},upsertFromBinary(W,Y){const X=H.deserialize(Y);return j.set(W,X),Q.add(W),X},clearDirty:function(){Q.clear()}}}function EntityContainer(){const W=Entity(Ir.STATIC_ENTITIES_RANGE),H=Entity(Ir.DYNAMIC_ENTITIES_RANGE);return{generateEntity:(Y=!1)=>Y?H.generateEntity():W.generateEntity(),removeEntity:Y=>W.removeEntity(Y)||H.removeEntity(Y),entityExists:Y=>Ir.isReservedEntity(Y)||W.getExistingEntities().has(Y)||H.getExistingEntities().has(Y),getExistingEntities:()=>new Set([...W.getExistingEntities(),...H.getExistingEntities()])}}function Entity(W){let H=W[0];const Y=new Set;return{getExistingEntities:()=>new Set(Y),generateEntity:function(){if(H>=W[1])throw new Error(`It fails trying to generate an entity out of range [${W[0]}, ${W[1]}].`);const j=H;return H++,Y.add(j),j},removeEntity:function(W){return Y.delete(W)}}}!function(W){W.MESSAGE_HEADER_LENGTH=20,W.write=function(H,Y,j,Q,X){const Z=X.incrementWriteOffset(kr.HEADER_LENGTH+W.MESSAGE_HEADER_LENGTH);H===kr.Enum.PUT_COMPONENT&&Q.writeToByteBuffer(Y,X);const J=X.size()-Z;X.setUint32(Z,J),X.setUint32(Z+4,H),X.setUint32(Z+8,Y),X.setUint32(Z+12,Q._id),X.setUint64(Z+16,BigInt(j)),X.setUint32(Z+24,J-W.MESSAGE_HEADER_LENGTH-kr.HEADER_LENGTH)},W.read=function(W){const H=kr.readHeader(W);if(!H)return null;const Y={...H,entity:W.readUint32(),componentId:W.readInt32(),timestamp:Number(W.readUint64())};return H.type===kr.Enum.DELETE_COMPONENT?Y:{...Y,data:W.readBuffer()}}}(Cr||(Cr={})),function(W){function t(W,H){return W>=H[0]&&W<=H[1]}W.MAX_ENTITIES=4294967295,W.DYNAMIC_ENTITIES_START_AT=1e5,W.RESERVED_STATIC_ENTITIES=512,W.RESERVED_ENTITIES_RANGE=[0,W.RESERVED_STATIC_ENTITIES-1],W.STATIC_ENTITIES_RANGE=[W.RESERVED_STATIC_ENTITIES,W.DYNAMIC_ENTITIES_START_AT-1],W.DYNAMIC_ENTITIES_RANGE=[W.DYNAMIC_ENTITIES_START_AT,W.MAX_ENTITIES],W.isDynamicEntity=function(H){return t(H,W.DYNAMIC_ENTITIES_RANGE)},W.isStaticEntity=function(H){return t(H,W.STATIC_ENTITIES_RANGE)},W.isReservedEntity=function(H){return t(H,W.RESERVED_ENTITIES_RANGE)}}(Ir||(Ir={}));const zr=1e5;function SystemContainer(){const W=[];function t(){W.sort(((W,H)=>H.priority-W.priority))}return{add:function(H,Y,j){if(W.find((W=>W.fn===H)))throw new Error("System already added");if(j&&W.find((W=>W.name===j)))throw new Error("System name already used");W.push({fn:H,priority:Y,name:j}),t()},remove:function(H){let Y=-1;return Y="string"==typeof H?W.findIndex((W=>W.name===H)):W.findIndex((W=>W.fn===H)),-1!==Y&&(W.splice(Y,1),t(),!0)},getSystems:()=>W}}function preEngine(){const H=EntityContainer(),Y=new Map,j=SystemContainer();function r(W=!1){return H.generateEntity(W)}function o(W,H,j){if(Y.get(H))throw new Error(`Component ${H} already declared`);const Q=defineComponent(H,W,j);return Y.set(H,Q),Q}return{entityExists:function(W){return H.entityExists(W)},componentsDefinition:Y,addEntity:r,addDynamicEntity:function(){return r(!0)},removeEntity:function(W){for(const[,H]of Y)H.has(W)&&H.deleteFrom(W);return H.removeEntity(W)},addSystem:function(W,H=zr,Y){j.add(W,H,Y)},getSystems:function(){return j.getSystems()},removeSystem:function(W){return j.remove(W)},defineComponent:function(H,Y,j){return o(W.Schemas.Map(H),Y,j)},defineComponentFromSchema:o,getEntitiesWith:function*(...W){for(const[H,...Y]of function*(...W){const[H,...Y]=W;for(const[j]of H.iterator()){let H=!0;for(const W of Y)if(!W.has(j)){H=!1;break}H&&(yield[j,...W])}}(...W))yield[H,...Y.map((W=>W.get(H)))]},getComponent:function(W){const H=Y.get(W);if(!H)throw new Error(`Component ${W} not found. You need to declare the components at the beginnig of the engine declaration`);return H},removeComponentDefinition:function(W){Y.delete(W)}}}function Engine({transports:W}={}){const H=preEngine(),Y=crdtSceneSystem({engine:H}),j=defineSdkComponents(H);if(W)for(const H of W)Y.addTransport(H);function*o(W,Y){if(!Y.find((H=>W===H))){Y.push(W);for(const[Q,X]of H.getEntitiesWith(j.Transform))X.parent===W&&(yield*o(Q,Y));yield W}}return{addEntity:H.addEntity,addDynamicEntity:H.addDynamicEntity,removeEntity:H.removeEntity,removeEntityWithChildren:function(W){for(const Y of o(W,[]))H.removeEntity(Y)},addSystem:H.addSystem,removeSystem:H.removeSystem,defineComponent:H.defineComponent,defineComponentFromSchema:H.defineComponentFromSchema,getEntitiesWith:H.getEntitiesWith,getComponent:H.getComponent,removeComponentDefinition:H.removeComponentDefinition,update:function(W){Y.receiveMessages();for(const Y of H.getSystems())Y.fn(W);const j=new Map;for(const[W,Y]of H.componentsDefinition)for(const H of Y.dirtyIterator())j.has(H)||j.set(H,new Set),j.get(H).add(W);Y.createMessages(j);for(const[W,Y]of H.componentsDefinition)Y.clearDirty()},RootEntity:0,PlayerEntity:1,CameraEntity:2,baseComponents:j,entityExists:H.entityExists,addTransport:Y.addTransport}}var Nr;!function(W){W[W.Transform=1]="Transform",W[W.Animator=1042]="Animator",W[W.AudioSource=1020]="AudioSource",W[W.AudioStream=1021]="AudioStream",W[W.AvatarAttach=1073]="AvatarAttach",W[W.AvatarModifierArea=1070]="AvatarModifierArea",W[W.AvatarShape=1080]="AvatarShape",W[W.Billboard=1090]="Billboard",W[W.CameraMode=1072]="CameraMode",W[W.CameraModeArea=1071]="CameraModeArea",W[W.GltfContainer=1041]="GltfContainer",W[W.Material=1017]="Material",W[W.MeshCollider=1019]="MeshCollider",W[W.MeshRenderer=1018]="MeshRenderer",W[W.NftShape=1040]="NftShape",W[W.PointerEventsResult=1063]="PointerEventsResult",W[W.PointerHoverFeedback=1062]="PointerHoverFeedback",W[W.PointerLock=1074]="PointerLock",W[W.Raycast=1067]="Raycast",W[W.RaycastResult=1068]="RaycastResult",W[W.TextShape=1030]="TextShape",W[W.UiBackground=1053]="UiBackground",W[W.UiText=1052]="UiText",W[W.UiTransform=1050]="UiTransform",W[W.VisibilityComponent=1081]="VisibilityComponent"}(Nr||(Nr={}));const Or=Object.values(Nr).filter((W=>"number"==typeof W)).map(Number);function createRendererTransport(){if("undefined"==typeof dcl)throw new Error("Cannot create createRendererTransport without global dcl object");const W="renderer";return{type:W,send(W){dcl.callRpc("~system/EngineApi","crdtSendToRenderer",[{data:new Uint8Array(W)}]).catch(dcl.error)},filter:H=>H.transportType!==W&&!!Or.includes(H.componentId)&&!!H}}const Ur=[0,1,2,4,5,6,7,8,9,10,11,12,13],Pr={timestampLastUpdate:W.Schemas.Number,currentTimestamp:W.Schemas.Number,buttonState:W.Schemas.Array(W.Schemas.Map({value:W.Schemas.Boolean,ts:W.Schemas.Number}))},Lr=1500,Fr=1<<20,Dr=0;function createInput(W){const H=W.defineComponent(Pr,Lr);function n(W,H){if(3!==W)return r(W,H);for(const W of Ur){const Y=r(W,H);if(Y)return Y}return null}function r(Y,j){const Q=W.baseComponents.PointerEventsResult.getOrNull(W.RootEntity);if(!Q)return null;const X=Q.commands,Z=findLastAction(X,1,Y,j);if(!Z)return null;const J=findLastAction(X,0,Y,j);if(!J)return null;const K=H.get(W.RootEntity);return Z.timestamp<J.timestamp&&J.timestamp>K.timestampLastUpdate?(H.getMutable(W.RootEntity).currentTimestamp=Math.max(J.timestamp,K.currentTimestamp),{up:J,down:Z}):null}function o(W,H,Y){if(3!==W)return i(W,H,Y);for(const W of Ur){const j=i(W,H,Y);if(j)return j}return null}function i(Y,j,Q){const X=W.baseComponents.PointerEventsResult.getOrNull(W.RootEntity);if(!X)return null;const Z=findLastAction(X.commands,j,Y,Q);if(!Z)return null;const J=H.get(W.RootEntity);return Z.timestamp>J.timestampLastUpdate?(H.getMutable(W.RootEntity).currentTimestamp=Math.max(Z.timestamp,J.currentTimestamp),Z):null}return H.create(W.RootEntity,{buttonState:Array.from({length:Ur.length},(()=>({ts:0,value:!1})))}),W.addSystem((function(){const Y=W.baseComponents.PointerEventsResult.getOrNull(W.RootEntity);if(!Y)return;const j=H.getMutable(W.RootEntity);for(const W of Y.commands)W.timestamp>j.buttonState[W.button].ts&&(1===W.state?j.buttonState[W.button].value=!0:0===W.state&&(j.buttonState[W.button].value=!1))}),Dr),W.addSystem((function(){const Y=H.get(W.RootEntity);Y.currentTimestamp>Y.timestampLastUpdate&&(H.getMutable(W.RootEntity).timestampLastUpdate=Y.currentTimestamp)}),Fr),{isPressed:function(Y){return H.get(W.RootEntity).buttonState[Y].value},getClick:n,getInputCommand:o,isClicked:function(W,H){return null!==n(W,H)},isTriggered:function(W,H,Y){return null!==o(W,H,Y)}}}function findLastAction(W,H,Y,j){let Q;for(const X of W)X.button===Y&&X.state===H&&(!j||X.hit&&j===X.hit.entityId)&&(!Q||X.timestamp>=Q.timestamp)&&(Q=X);return Q}class ObserverEventState{constructor(W,H=!1,Y,j){this.initalize(W,H,Y,j)}initalize(W,H=!1,Y,j){return this.mask=W,this.skipNextObservers=H,this.target=Y,this.currentTarget=j,this}}class Observer{constructor(W,H,Y=null){this.callback=W,this.mask=H,this.scope=Y,this.unregisterOnNextCall=!1,this._willBeUnregistered=!1}}class Observable{constructor(W){this._observers=new Array,this._onObserverAdded=null,this._eventState=new ObserverEventState(0),W&&(this._onObserverAdded=W)}add(W,H=-1,Y=!1,j=null,Q=!1){if(!W)return null;const X=new Observer(W,H,j);return X.unregisterOnNextCall=Q,Y?this._observers.unshift(X):this._observers.push(X),this._onObserverAdded&&this._onObserverAdded(X),X}addOnce(W){return this.add(W,void 0,void 0,void 0,!0)}remove(W){return!!W&&-1!==this._observers.indexOf(W)&&(this._deferUnregister(W),!0)}removeCallback(W,H){for(let Y=0;Y<this._observers.length;Y++)if(this._observers[Y].callback===W&&(!H||H===this._observers[Y].scope))return this._deferUnregister(this._observers[Y]),!0;return!1}notifyObservers(W,H=-1,Y,j){if(!this._observers.length)return!0;const Q=this._eventState;Q.mask=H,Q.target=Y,Q.currentTarget=j,Q.skipNextObservers=!1,Q.lastReturnValue=W;for(const Y of this._observers)if(!Y._willBeUnregistered&&(Y.mask&H&&(Y.scope?Q.lastReturnValue=Y.callback.apply(Y.scope,[W,Q]):Q.lastReturnValue=Y.callback(W,Q),Y.unregisterOnNextCall&&this._deferUnregister(Y)),Q.skipNextObservers))return!1;return!0}notifyObserversWithPromise(W,H=-1,Y,j){let Q=Promise.resolve(W);if(!this._observers.length)return Q;const X=this._eventState;return X.mask=H,X.target=Y,X.currentTarget=j,X.skipNextObservers=!1,this._observers.forEach((Y=>{X.skipNextObservers||Y._willBeUnregistered||Y.mask&H&&(Q=Y.scope?Q.then((H=>(X.lastReturnValue=H,Y.callback.apply(Y.scope,[W,X])))):Q.then((H=>(X.lastReturnValue=H,Y.callback(W,X)))),Y.unregisterOnNextCall&&this._deferUnregister(Y))})),Q.then((()=>W))}notifyObserver(W,H,Y=-1){const j=this._eventState;j.mask=Y,j.skipNextObservers=!1,W.callback(H,j)}hasObservers(){return this._observers.length>0}clear(){this._observers=new Array,this._onObserverAdded=null}clone(){const W=new Observable;return W._observers=this._observers.slice(0),W}hasSpecificMask(W=-1){for(const H of this._observers)if(H.mask&W||H.mask===W)return!0;return!1}_deferUnregister(W){W.unregisterOnNextCall=!1,W._willBeUnregistered=!0,Promise.resolve().then.bind(Promise.resolve())((async()=>this._remove(W)))}_remove(W){if(!W)return!1;const H=this._observers.indexOf(W);return-1!==H&&(this._observers.splice(H,1),!0)}}function createSubscriber(W){return()=>{"undefined"!=typeof dcl&&dcl.subscribe(W)}}const Gr=new Observable(createSubscriber("onEnterScene")),qr=Gr,Vr=new Observable(createSubscriber("onLeaveScene")),Wr=Vr,Hr=new Observable(createSubscriber("sceneStart")),Yr=new Observable(createSubscriber("playerExpression")),$r=new Observable(createSubscriber("videoEvent")),jr=new Observable(createSubscriber("profileChanged")),Qr=new Observable(createSubscriber("playerConnected")),Xr=new Observable(createSubscriber("playerDisconnected")),Zr=new Observable(createSubscriber("onRealmChanged")),Jr=new Observable(createSubscriber("playerClicked"));function _initEventObservables(){"undefined"!=typeof dcl&&dcl.onEvent((W=>{switch(W.type){case"onEnterScene":return void Gr.notifyObservers(W.data);case"onLeaveScene":return void Vr.notifyObservers(W.data);case"sceneStart":return void Hr.notifyObservers(W.data);case"playerExpression":return void Yr.notifyObservers(W.data);case"videoEvent":{const H=W.data;return void $r.notifyObservers(H)}case"profileChanged":return void jr.notifyObservers(W.data);case"playerConnected":return void Qr.notifyObservers(W.data);case"playerDisconnected":return void Xr.notifyObservers(W.data);case"onRealmChanged":return void Zr.notifyObservers(W.data);case"playerClicked":return void Jr.notifyObservers(W.data)}}))}function initializeDcl(W,H){if("undefined"!=typeof dcl){async function n(){const W=await dcl.callRpc("~system/EngineApi","crdtGetMessageFromRenderer",[]);if(W.data?.length&&H.onmessage)for(const Y of W.data)H.onmessage(Y)}return dcl.loadModule("~system/EngineApi",{}).catch(dcl.error),dcl.onUpdate((H=>{n().catch(dcl.error).finally((()=>W.update(H)))})),_initEventObservables(),{log:dcl.log,error:dcl.error}}return{log:voidFn,error:voidFn}}function voidFn(){}function getAndClean(W){const H=Array.from(W);return W.length=0,H}function taskSystem(W){const H=[];return W.addSystem((function(){getAndClean(H).forEach((W=>async function(W){try{return await W()}catch(W){dcl.error(`executeTask: FAILED. ${W.toString()}`,W)}}(W)))})),{executeTask(W){H.push(W)}}}W.EventsSystem=void 0,function(W){let H;!function(W){W[W.Click=0]="Click",W[W.Down=1]="Down",W[W.Up=2]="Up"}(H||(H={}));const n=(W={})=>({button:3,hoverText:"Interact",maxDistance:100,...W}),Y=new Map;function o(W){return Y.get(W)||Y.set(W,new Map).get(W)}function i(W,H,Y){const{PointerHoverFeedback:j}=engine.baseComponents;Y.hoverText&&(j.getMutableOrNull(W)||j.create(W)).pointerEvents.push({eventType:H,eventInfo:{button:Y.button,showFeedback:!0,hoverText:Y.hoverText,maxDistance:Y.maxDistance}})}function a(W){return W===H.Up?0:1}function s(W,H){const Y=o(W),j=Y.get(H);j?.opts.hoverText&&function(W,H,Y){const{PointerHoverFeedback:j}=engine.baseComponents,Q=j.getMutableOrNull(W);Q&&(Q.pointerEvents=Q.pointerEvents.filter((W=>!(W.eventInfo?.button===Y&&W.eventType===H))))}(W,a(H),j.opts.button),Y.delete(H)}W.removeOnClick=function(W){s(W,H.Click)},W.removeOnPointerDown=function(W){s(W,H.Down)},W.removeOnPointerUp=function(W){s(W,H.Up)},W.onClick=function(W,Y,j){const Q=n(j);s(W,H.Click),o(W).set(H.Click,{cb:Y,opts:Q}),i(W,1,Q)},W.onPointerDown=function(W,Y,j){const Q=n(j);s(W,H.Down),o(W).set(H.Down,{cb:Y,opts:Q}),i(W,1,Q)},W.onPointerUp=function(W,Y,j){const Q=n(j);s(W,H.Up),o(W).set(H.Up,{cb:Y,opts:Q}),i(W,0,Q)},W.update=function(W){return function(){for(const[j,Q]of Y)if(engine.entityExists(j))for(const[Y,{cb:X,opts:Z}]of Q){if(Y===H.Click){const H=W.getClick(Z.button,j);H&&X(H.up)}if(Y===H.Down||Y===H.Up){const H=W.getInputCommand(Z.button,a(Y),j);H&&X(H)}}else Y.delete(j)}}}(W.EventsSystem||(W.EventsSystem={}));const Kr=createRendererTransport(),eo=Engine({transports:[Kr]}),to=initializeDcl(eo,Kr),no=to.log,ro=to.error,oo=createInput(eo),io=taskSystem(eo).executeTask;function cyclicParentingChecker(W){const H=W.baseComponents.Transform;return()=>{for(const W of H.dirtyIterator()){let Y=H.getOrNull(W);for(;Y&&Y.parent;){if(Y.parent===W){dcl.error(`There is a cyclic parent with entity ${W}`);break}Y=H.getOrNull(Y.parent)}}}}eo.addSystem(W.EventsSystem.update(oo));const ao=eo.baseComponents.Transform,so=eo.baseComponents.Animator,co=eo.baseComponents.AudioSource,uo=eo.baseComponents.AudioStream,fo=eo.baseComponents.AvatarAttach,lo=eo.baseComponents.AvatarModifierArea,ho=eo.baseComponents.AvatarShape,po=eo.baseComponents.Billboard,mo=eo.baseComponents.CameraMode,go=eo.baseComponents.CameraModeArea,yo=eo.baseComponents.GltfContainer,bo=eo.baseComponents.Material,vo=eo.baseComponents.MeshCollider,Eo=eo.baseComponents.MeshRenderer,To=eo.baseComponents.NftShape,_o=eo.baseComponents.PointerEventsResult,wo=eo.baseComponents.PointerHoverFeedback,Ao=eo.baseComponents.PointerLock,Ro=eo.baseComponents.Raycast,xo=eo.baseComponents.RaycastResult,Mo=eo.baseComponents.TextShape,So=eo.baseComponents.UiBackground,Bo=eo.baseComponents.UiText,ko=eo.baseComponents.UiTransform,Co=eo.baseComponents.VisibilityComponent;var Io;W.Components=void 0,Io=W.Components||(W.Components={}),Io.Transform=eo.baseComponents.Transform,Io.Animator=eo.baseComponents.Animator,Io.AudioSource=eo.baseComponents.AudioSource,Io.AudioStream=eo.baseComponents.AudioStream,Io.AvatarAttach=eo.baseComponents.AvatarAttach,Io.AvatarModifierArea=eo.baseComponents.AvatarModifierArea,Io.AvatarShape=eo.baseComponents.AvatarShape,Io.Billboard=eo.baseComponents.Billboard,Io.CameraMode=eo.baseComponents.CameraMode,Io.CameraModeArea=eo.baseComponents.CameraModeArea,Io.GltfContainer=eo.baseComponents.GltfContainer,Io.Material=eo.baseComponents.Material,Io.MeshCollider=eo.baseComponents.MeshCollider,Io.MeshRenderer=eo.baseComponents.MeshRenderer,Io.NftShape=eo.baseComponents.NftShape,Io.PointerEventsResult=eo.baseComponents.PointerEventsResult,Io.PointerHoverFeedback=eo.baseComponents.PointerHoverFeedback,Io.PointerLock=eo.baseComponents.PointerLock,Io.Raycast=eo.baseComponents.Raycast,Io.RaycastResult=eo.baseComponents.RaycastResult,Io.TextShape=eo.baseComponents.TextShape,Io.UiBackground=eo.baseComponents.UiBackground,Io.UiText=eo.baseComponents.UiText,Io.UiTransform=eo.baseComponents.UiTransform,Io.VisibilityComponent=eo.baseComponents.VisibilityComponent;let zo=null,No=null,Oo=null;function getMessageObserver(){return Oo||(Oo=new Observable),Oo}function ensureCommunicationsController(){if(!No){No=dcl.loadModule("~system/CommunicationsController",{}),No.then((W=>{zo=W}));const W=getMessageObserver();dcl.subscribe("comms"),dcl.onEvent((H=>{"comms"===H.type&&W.notifyObservers(H.data)}))}return No}class MessageBus{constructor(){this.messageQueue=[],this.connected=!1,this.flushing=!1,ensureCommunicationsController().then((()=>{this.connected=!0,this.flush()}))}on(W,H){return getMessageObserver().add((Y=>{try{const j=JSON.parse(Y.message);j.message===W&&H(j.payload,Y.sender)}catch(Y){dcl.error("Error parsing comms message "+(Y.message||""),Y)}}))}sendRaw(W){this.messageQueue.push(W),this.connected&&this.flush()}emit(W,H){const Y=JSON.stringify({message:W,payload:H});this.sendRaw(Y),getMessageObserver().notifyObservers({message:Y,sender:"self"})}flush(){if(0===this.messageQueue.length)return;if(!this.connected)return;if(!zo)return;if(this.flushing)return;const W=this.messageQueue.shift();this.flushing=!0,dcl.callRpc(zo.rpcHandle,"send",[W]).then((W=>{this.flushing=!1,this.flush()}),(W=>{this.flushing=!1}))}}W.Animator=so,W.AudioSource=co,W.AudioStream=uo,W.AvatarAttach=fo,W.AvatarModifierArea=lo,W.AvatarShape=ho,W.Billboard=po,W.CameraMode=mo,W.CameraModeArea=go,W.Color3=le.Color3,W.Color4=le.Color4,W.DEG2RAD=le.DEG2RAD,W.Engine=Engine,W.GltfContainer=yo,W.Input=oo,W.Material=bo,W.MeshCollider=vo,W.MeshRenderer=Eo,W.MessageBus=MessageBus,W.NftShape=To,W.Observable=Observable,W.Observer=Observer,W.ObserverEventState=ObserverEventState,W.PointerEventsResult=_o,W.PointerHoverFeedback=wo,W.PointerLock=Ao,W.Quaternion=le.Quaternion,W.RAD2DEG=le.RAD2DEG,W.Raycast=Ro,W.RaycastResult=xo,W.Scalar=le.Scalar,W.TextShape=Mo,W.Transform=ao,W.UiBackground=So,W.UiText=Bo,W.UiTransform=ko,W.Vector3=le.Vector3,W.VisibilityComponent=Co,W._initEventObservables=_initEventObservables,W.cyclicParentingChecker=cyclicParentingChecker,W.deepReadonly=deepReadonly,W.engine=eo,W.error=ro,W.executeTask=io,W.getMessageObserver=getMessageObserver,W.log=no,W.onEnterScene=qr,W.onEnterSceneObservable=Gr,W.onLeaveScene=Wr,W.onLeaveSceneObservable=Vr,W.onPlayerClickedObservable=Jr,W.onPlayerConnectedObservable=Qr,W.onPlayerDisconnectedObservable=Xr,W.onPlayerExpressionObservable=Yr,W.onProfileChanged=jr,W.onRealmChangedObservable=Zr,W.onSceneReadyObservable=Hr,W.onVideoEvent=$r,Object.defineProperty(W,"__esModule",{value:!0})}(this.self=this.self||{}),define("helper/interpolation",["require","exports"],(function(W,H){var Y;function bounce(W){const H=7.5625,Y=2.75;return W<1/Y?H*W*W:W<2/Y?H*(W-=1.5/Y)*W+.75:W<2.5/Y?H*(W-=2.25/Y)*W+.9375:H*(W-=2.625/Y)*W+.984375}Object.defineProperty(H,"__esModule",{value:!0}),H.Interpolate=H.InterpolationType=void 0,function(W){W[W.LINEAR=0]="LINEAR",W[W.EASEINQUAD=1]="EASEINQUAD",W[W.EASEOUTQUAD=2]="EASEOUTQUAD",W[W.EASEQUAD=3]="EASEQUAD",W[W.EASEINSINE=4]="EASEINSINE",W[W.EASEOUTSINE=5]="EASEOUTSINE",W[W.EASESINE=6]="EASESINE",W[W.EASEINEXPO=7]="EASEINEXPO",W[W.EASEOUTEXPO=8]="EASEOUTEXPO",W[W.EASEEXPO=9]="EASEEXPO",W[W.EASEINELASTIC=10]="EASEINELASTIC",W[W.EASEOUTELASTIC=11]="EASEOUTELASTIC",W[W.EASEELASTIC=12]="EASEELASTIC",W[W.EASEINBOUNCE=13]="EASEINBOUNCE",W[W.EASEOUTEBOUNCE=14]="EASEOUTEBOUNCE",W[W.EASEBOUNCE=15]="EASEBOUNCE"}(Y=H.InterpolationType||(H.InterpolationType={})),H.Interpolate=function(W,H){switch(W){case Y.LINEAR:return H;case Y.EASEINQUAD:return function(W){return W*W}(H);case Y.EASEOUTQUAD:return function(W){return W*(2-W)}(H);case Y.EASEQUAD:return function(W){return W*W/(2*(W*W-W)+1)}(H);case Y.EASEINSINE:return function(W){return 1-Math.cos(W*Math.PI/2)}(H);case Y.EASEOUTSINE:return function(W){return Math.sin(W*Math.PI/2)}(H);case Y.EASESINE:return function(W){return-(Math.cos(Math.PI*W)-1)/2}(H);case Y.EASEINEXPO:return function(W){return 0===W?0:Math.pow(2,10*W-10)}(H);case Y.EASEOUTEXPO:return function(W){return 1===W?1:1-Math.pow(2,-10*W)}(H);case Y.EASEEXPO:return function(W){return 0===W?0:1===W?1:W<.5?Math.pow(2,20*W-10)/2:(2-Math.pow(2,-20*W+10))/2}(H);case Y.EASEINELASTIC:return function(W){const H=2*Math.PI/3;return 0===W?0:1===W?1:-Math.pow(2,10*W-10)*Math.sin((10*W-10.75)*H)}(H);case Y.EASEOUTELASTIC:return function(W){const H=2*Math.PI/3;return 0===W?0:1===W?1:Math.pow(2,-10*W)*Math.sin((10*W-.75)*H)+1}(H);case Y.EASEELASTIC:return function(W){const H=2*Math.PI/4.5;return 0===W?0:1===W?1:W<.5?-Math.pow(2,20*W-10)*Math.sin((20*W-11.125)*H)/2:Math.pow(2,-20*W+10)*Math.sin((20*W-11.125)*H)/2+1}(H);case Y.EASEINBOUNCE:return function(W){return 1-bounce(1-W)}(H);case Y.EASEOUTEBOUNCE:return function(W){return bounce(W)}(H);case Y.EASEBOUNCE:return function(W){return W<.5?(1-bounce(1-2*W))/2:(1+bounce(2*W-1))/2}(H);default:return H}}})),define("components/moveTransport",["require","exports"],(function(W,H){Object.defineProperty(H,"__esModule",{value:!0}),H.MoveTransformComponent=void 0;const Y=Schemas.Map({x:Schemas.Float,y:Schemas.Float,z:Schemas.Float}),j={speed:Schemas.Float,start:Y,end:Y,normalizedTime:Schemas.Float,lerpTime:Schemas.Float,interpolationType:Schemas.Enum(Schemas.Int)};H.MoveTransformComponent=engine.defineComponent(j,2046)})),define("hummingBird",["require","exports","components/moveTransport","helper/interpolation"],(function(W,H,Y,j){Object.defineProperty(H,"__esModule",{value:!0}),H.turn=H.birdSystem=H.createHummingBird=H.isBird=void 0;const Q={waitingTime:Schemas.Int};function birdSystem(W){for(const[Q]of engine.getEntitiesWith(H.isBird)){if(Y.MoveTransformComponent.has(Q))return;const X=H.isBird.getMutable(Q);if(X.waitingTime-=W,X.waitingTime<=0){let W=Transform.get(Q).position;X.waitingTime=2;const H={x:12*Math.random()+2,y:3*Math.random()+1,z:12*Math.random()+2};Y.MoveTransformComponent.create(Q,{speed:1,start:W,end:H,normalizedTime:0,lerpTime:0,interpolationType:j.InterpolationType.EASESINE}),Transform.getMutable(Q),Vector3.Up(),turn(Q,H)}}}function turn(W,H){const Y=Transform.getMutable(W),j=Vector3.subtract(H,Y.position),Q=Vector3.normalize(j);Y.rotation=Quaternion.lookRotation(Q)}H.isBird=engine.defineComponent(Q,3333),H.createHummingBird=function(){const W=engine.addEntity();Transform.create(W,{position:{x:13,y:3.5,z:5},rotation:{x:0,y:0,z:0,w:1},scale:{x:.2,y:.2,z:.2}}),GltfContainer.create(W,{src:"models/hummingbird.glb"}),Animator.create(W,{states:[{clip:"fly",loop:!0,playing:!0,shouldReset:!1,speed:2,name:"fly"},{clip:"look",loop:!1,playing:!1,shouldReset:!1,name:"look"},{clip:"shake",loop:!1,playing:!1,shouldReset:!1,name:"shake"}]}),H.isBird.create(W,{waitingTime:0});let Y=CameraMode.getMutable(engine.CameraEntity);log("CAMERA MODE: ",Y.mode),Y.mode=0},H.birdSystem=birdSystem,engine.addSystem(birdSystem),H.turn=turn})),define("game",["require","exports","hummingBird"],(function(W,H,Y){Object.defineProperty(H,"__esModule",{value:!0});const j=engine.addEntity();Transform.create(j,{position:{x:8,y:0,z:8},rotation:{x:0,y:0,z:0,w:0},scale:{x:1.6,y:1.6,z:1.6}}),GltfContainer.create(j,{src:"models/Ground.gltf"});const Q=engine.addEntity();Transform.create(Q,{position:{x:8,y:0,z:8},rotation:{x:0,y:0,z:0,w:0},scale:{x:1.6,y:1.6,z:1.6}}),GltfContainer.create(Q,{src:"models/Tree.gltf"}),Animator.create(Q,{states:[{clip:"Tree_Action",loop:!1,playing:!1,shouldReset:!0,name:"Tree_Action"}]}),EventsSystem.onPointerDown(Q,(function(){(0,Y.createHummingBird)(),Animator.getMutable(Q).states[0].playing=!0}),{button:1,hoverText:"Shake"})})),define("systems/move",["require","exports","components/moveTransport"],(function(W,H,Y){function moveSystem(W){for(const[H]of engine.getEntitiesWith(Y.MoveTransformComponent,Transform)){const j=Y.MoveTransformComponent.getMutable(H),Q=Transform.getMutable(H);j.normalizedTime=Math.min(Math.max(j.normalizedTime+W*j.speed,0),1),j.lerpTime=j.normalizedTime,Q.position=Vector3.lerp(j.start,j.end,j.lerpTime),j.normalizedTime>=1&&Y.MoveTransformComponent.deleteFrom(H)}}Object.defineProperty(H,"__esModule",{value:!0}),H.moveSystem=void 0,H.moveSystem=moveSystem,engine.addSystem(moveSystem)})),define("systems/sound",["require","exports"],(function(W,H){Object.defineProperty(H,"__esModule",{value:!0}),H.playSounds=void 0,H.playSounds=function(W,H){if(H.t+=W,H.t<4)return;H.t=0;const Y=engine.getEntitiesWith(AudioSource);for(const[W]of Y){const H=AudioSource.getMutable(W);H.volume=1,H.pitch=5*Math.random(),H.playing=!0}}}));