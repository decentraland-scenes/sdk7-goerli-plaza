(function(exports){"use strict";var commonjsGlobal="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},dist$1={},Quaternion={},Vector3$1={},hasRequiredVector3;function requireVector3(){return hasRequiredVector3||(hasRequiredVector3=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.Vector3=void 0,function(e){function t(e=0,t=0,n=0){return{x:e,y:t,z:n}}function n(e,t){t.x=e.x,t.y=e.y,t.z=e.z}function r(e){return Math.sqrt(e.x*e.x+e.y*e.y+e.z*e.z)}function i(e,t,n){n.x=e.x*t,n.y=e.y*t,n.z=e.z*t}function o(e,n){const r=t(0,0,0);return a(e,n,r),r}function a(e,t,r){0!==t&&1!==t?i(e,1/t,r):n(e,r)}function s(e,t,n,r){r.x=e.x+(t.x-e.x)*n,r.y=e.y+(t.y-e.y)*n,r.z=e.z+(t.z-e.z)*n}e.create=t,e.add=function(e,t){return{x:e.x+t.x,y:e.y+t.y,z:e.z+t.z}},e.subtract=function(e,t){return{x:e.x-t.x,y:e.y-t.y,z:e.z-t.z}},e.subtractToRef=function(e,t,n){n.x=e.x-t.x,n.y=e.y-t.y,n.z=e.z-t.z},e.opposite=function(e){return{x:-e.x,y:-e.y,z:-e.z}},e.copy=n,e.clone=function(e){return Object.assign({},e)},e.length=r,e.lengthSquared=function(e){return e.x*e.x+e.y*e.y+e.z*e.z},e.scaleToRef=i,e.scale=function(e,n){return t(e.x*n,e.y*n,e.z*n)},e.normalizeFromLength=o,e.normalizeFromLengthToRef=a,e.normalize=function(e){return o(e,r(e))},e.normalizeToRef=function(e,t){a(e,r(e),t)},e.dot=function(e,t){return e.x*t.x+e.y*t.y+e.z*t.z},e.rotate=function(e,t){const{x:n,y:r,z:i}=e,{x:o,y:a,z:s,w:u}=t,c=u*n+a*i-s*r,l=u*r+s*n-o*i,d=u*i+o*r-a*n,f=-o*n-a*r-s*i;return{x:c*u+f*-o+l*-s-d*-a,y:l*u+f*-a+d*-o-c*-s,z:d*u+f*-s+c*-a-l*-o}},e.lerp=function(e,n,r){const i=t(0,0,0);return s(e,n,r,i),i},e.lerpToRef=s,e.cross=function(t,n){const r=e.Zero();return e.crossToRef(t,n,r),r},e.crossToRef=function(e,t,n){n.x=e.y*t.z-e.z*t.y,n.y=e.z*t.x-e.x*t.z,n.z=e.x*t.y-e.y*t.x},e.Zero=function(){return t(0,0,0)},e.One=function(){return t(1,1,1)},e.Up=function(){return t(0,1,0)},e.Down=function(){return t(0,-1,0)},e.Forward=function(){return t(0,0,1)},e.Backward=function(){return t(0,0,-1)},e.Right=function(){return t(1,0,0)},e.Left=function(){return t(-1,0,0)}}(e.Vector3||(e.Vector3={}))}(Vector3$1)),Vector3$1}var Scalar={},hasRequiredScalar;function requireScalar(){if(hasRequiredScalar)return Scalar;hasRequiredScalar=1,Object.defineProperty(Scalar,"__esModule",{value:!0}),Scalar.Scalar=void 0;const e=2*Math.PI;function t(e){const t=+e;return 0===t||isNaN(t)?t:t>0?1:-1}function n(e,t=0,n=1){return Math.min(n,Math.max(t,e))}function r(e,t){return e-Math.floor(e/t)*t}function i(e,t){let n=r(t-e,360);return n>180&&(n-=360),n}function o(e,n,r){let i=0;return i=Math.abs(n-e)<=r?n:e+t(n-e)*r,i}return Scalar.Scalar={withinEpsilon:function(e,t,n=1401298e-51){const r=e-t;return-n<=r&&r<=n},toHex:function(e){const t=e.toString(16);return e<=15?("0"+t).toUpperCase():t.toUpperCase()},sign:t,clamp:n,log2:function(e){return Math.log(e)*Math.LOG2E},repeat:r,normalize:function(e,t,n){return(e-t)/(n-t)},denormalize:function(e,t,n){return e*(n-t)+t},deltaAngle:i,pingPong:function(e,t){const n=r(e,2*t);return t-Math.abs(n-t)},smoothStep:function(e,t,r){let i=n(r);return i=-2*i*i*i+3*i*i,t*i+e*(1-i)},moveTowards:o,moveTowardsAngle:function(e,t,n){const r=i(e,t);let a=0;return a=-n<r&&r<n?t:o(e,e+r,n),a},lerp:function(e,t,n){return e+(t-e)*n},lerpAngle:function(e,t,i){let o=r(t-e,360);return o>180&&(o-=360),e+o*n(i)},inverseLerp:function(e,t,r){let i=0;return i=e!==t?n((r-e)/(t-e)):0,i},hermite:function(e,t,n,r,i){const o=i*i,a=i*o;return e*(2*a-3*o+1)+n*(-2*a+3*o)+t*(a-2*o+i)+r*(a-o)},randomRange:function(e,t){return e===t?e:Math.random()*(t-e)+e},rangeToPercent:function(e,t,n){return(e-t)/(n-t)},percentToRange:function(e,t,n){return(n-t)*e+t},normalizeRadians:function(t){return t-e*Math.floor((t+Math.PI)/e)},TwoPi:e},Scalar}var types$1={},hasRequiredTypes$1,hasRequiredQuaternion,hasRequiredDist$1;function requireTypes$1(){return hasRequiredTypes$1||(hasRequiredTypes$1=1,function(e){var t,n;Object.defineProperty(e,"__esModule",{value:!0}),e.RAD2DEG=e.DEG2RAD=e.Epsilon=e.ToLinearSpace=e.ToGammaSpace=e.Space=e.Orientation=void 0,(t=e.Orientation||(e.Orientation={}))[t.CW=0]="CW",t[t.CCW=1]="CCW",(n=e.Space||(e.Space={}))[n.LOCAL=0]="LOCAL",n[n.WORLD=1]="WORLD",n[n.BONE=2]="BONE",e.ToGammaSpace=1/2.2,e.ToLinearSpace=2.2,e.Epsilon=1e-6,e.DEG2RAD=Math.PI/180,e.RAD2DEG=360/(2*Math.PI)}(types$1)),types$1}function requireQuaternion(){return hasRequiredQuaternion||(hasRequiredQuaternion=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.Quaternion=void 0;const t=requireVector3(),n=requireScalar(),r=requireTypes$1();!function(e){function i(e=0,t=0,n=0,r=1){return{x:e,y:t,z:n,w:r}}function o(e,t,n){const r=.5*t,o=.5*e,a=.5*n,s=Math.cos(r),u=Math.cos(o),c=Math.cos(a),l=Math.sin(r),d=Math.sin(o),f=Math.sin(a);return i(u*l*c+d*s*f,d*s*c-u*l*f,u*s*f-d*l*c,u*s*c+d*l*f)}function a(e){return Math.sqrt(s(e))}function s(e){return e.x*e.x+e.y*e.y+e.z*e.z+e.w*e.w}function u(e,t){return e.x*t.x+e.y*t.y+e.z*t.z+e.w*t.w}function c(e,t){const n=u(e,t);return 2*Math.acos(Math.min(Math.abs(n),1))*r.RAD2DEG}function l(e){const t=1/a(e);return i(e.x*t,e.y*t,e.z*t,e.w*t)}function d(){return i(0,0,0,1)}function f(t,n,r){const i=e.Identity();return e.slerpToRef(t,n,r,i),i}function h(e,t,n){n.x=e.x*t.w+e.y*t.z-e.z*t.y+e.w*t.x,n.y=-e.x*t.z+e.y*t.w+e.z*t.x+e.w*t.y,n.z=e.x*t.y-e.y*t.x+e.z*t.w+e.w*t.z,n.w=-e.x*t.x-e.y*t.y-e.z*t.z+e.w*t.w}e.create=i,e.add=function(e,t){return{x:e.x+t.x,y:e.y+t.y,z:e.z+t.z,w:e.w+t.w}},e.rotationYawPitchRoll=o,e.euler=function(e,t,n){return o(t*r.DEG2RAD,e*r.DEG2RAD,n*r.DEG2RAD)},e.length=a,e.lengthSquared=s,e.dot=u,e.angle=c,e.rotateTowards=function(e,t,n){const r=c(e,t);return 0===r?t:f(e,t,Math.min(1,n/r))},e.lookRotation=function(e,n={x:0,y:1,z:0}){const r=t.Vector3.normalize(e),o=t.Vector3.normalize(t.Vector3.cross(n,r)),a=t.Vector3.cross(r,o),s=o.x,u=o.y,c=o.z,l=a.x,d=a.y,f=a.z,h=r.x,p=r.y,m=r.z,g=s+d+m,y=i();if(g>0){let e=Math.sqrt(g+1);return y.w=.5*e,e=.5/e,y.x=(f-p)*e,y.y=(h-c)*e,y.z=(u-l)*e,y}if(s>=d&&s>=m){const e=Math.sqrt(1+s-d-m),t=.5/e;return y.x=.5*e,y.y=(u+l)*t,y.z=(c+h)*t,y.w=(f-p)*t,y}if(d>m){const e=Math.sqrt(1+d-s-m),t=.5/e;return y.x=(l+u)*t,y.y=.5*e,y.z=(p+f)*t,y.w=(h-c)*t,y}const b=Math.sqrt(1+m-s-d),v=.5/b;return y.x=(h+c)*v,y.y=(p+f)*v,y.z=.5*b,y.w=(u-l)*v,y},e.normalize=l,e.fromToRotation=function(e,n,r=t.Vector3.Up()){const o=t.Vector3.normalize(e),a=t.Vector3.normalize(n),s=t.Vector3.cross(o,a),u=Math.sqrt(t.Vector3.lengthSquared(o)*t.Vector3.lengthSquared(a))+t.Vector3.dot(o,a);return t.Vector3.lengthSquared(s)<1e-4?Math.abs(u)<1e-4?l(i(r.x,r.y,r.z,0)):d():l(i(s.x,s.y,s.z,u))},e.Identity=d,e.eulerAngles=function(e){const i=t.Vector3.create(),o=e.x*e.x+e.y*e.y+e.z*e.z+e.w*e.w,a=e.x*e.w-e.y*e.z;return a>.4995*o?(i.x=Math.PI/2,i.y=2*Math.atan2(e.y,e.x),i.z=0):a<-.4995*o?(i.x=-Math.PI/2,i.y=-2*Math.atan2(e.y,e.x),i.z=0):(i.x=Math.asin(2*(e.w*e.x-e.y*e.z)),i.y=Math.atan2(2*e.w*e.y+2*e.z*e.x,1-2*(e.x*e.x+e.y*e.y)),i.z=Math.atan2(2*e.w*e.z+2*e.x*e.y,1-2*(e.z*e.z+e.x*e.x))),i.x*=r.RAD2DEG,i.y*=r.RAD2DEG,i.z*=r.RAD2DEG,i.x=n.Scalar.repeat(i.x,360),i.y=n.Scalar.repeat(i.y,360),i.z=n.Scalar.repeat(i.z,360),i},e.rotationYawPitchRollToRef=function(e,t,n,r){const i=.5*t,o=.5*e,a=.5*n,s=Math.cos(i),u=Math.cos(o),c=Math.cos(a),l=Math.sin(i),d=Math.sin(o),f=Math.sin(a);r.x=u*l*c+d*s*f,r.y=d*s*c-u*l*f,r.z=u*s*f-d*l*c,r.w=u*s*c+d*l*f},e.fromRotationMatrixToRef=function(e,t){const n=e._m,r=n[0],i=n[4],o=n[8],a=n[1],s=n[5],u=n[9],c=n[2],l=n[6],d=n[10],f=r+s+d;let h;f>0?(h=.5/Math.sqrt(f+1),t.w=.25/h,t.x=(l-u)*h,t.y=(o-c)*h,t.z=(a-i)*h):r>s&&r>d?(h=2*Math.sqrt(1+r-s-d),t.w=(l-u)/h,t.x=.25*h,t.y=(i+a)/h,t.z=(o+c)/h):s>d?(h=2*Math.sqrt(1+s-r-d),t.w=(o-c)/h,t.x=(i+a)/h,t.y=.25*h,t.z=(u+l)/h):(h=2*Math.sqrt(1+d-r-s),t.w=(a-i)/h,t.x=(o+c)/h,t.y=(u+l)/h,t.z=.25*h)},e.slerp=f,e.slerpToRef=function(e,t,n,r){let i,o,a=e.x*t.x+e.y*t.y+e.z*t.z+e.w*t.w,s=!1;if(a<0&&(s=!0,a=-a),a>.999999)o=1-n,i=s?-n:n;else{const e=Math.acos(a),t=1/Math.sin(e);o=Math.sin((1-n)*e)*t,i=s?-Math.sin(n*e)*t:Math.sin(n*e)*t}r.x=o*e.x+i*t.x,r.y=o*e.y+i*t.y,r.z=o*e.z+i*t.z,r.w=o*e.w+i*t.w},e.multiply=function(e,t){const n=i(0,0,0,1);return h(e,t,n),n},e.multiplyToRef=h,e.angleAxis=function(n,i){if(0===t.Vector3.lengthSquared(i))return e.Identity();const o=d();let a=n*r.DEG2RAD;a*=.5;const s=t.Vector3.normalize(i);return t.Vector3.scaleToRef(s,Math.sin(a),s),o.x=s.x,o.y=s.y,o.z=s.z,o.w=Math.cos(a),l(o)},e.Zero=function(){return i(0,0,0,0)}}(e.Quaternion||(e.Quaternion={}))}(Quaternion)),Quaternion}function requireDist$1(){return hasRequiredDist$1||(hasRequiredDist$1=1,function(e){var t=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),n=commonjsGlobal&&commonjsGlobal.__exportStar||function(e,n){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(n,r)||t(n,e,r)};Object.defineProperty(e,"__esModule",{value:!0}),n(requireQuaternion(),e),n(requireVector3(),e),n(requireTypes$1(),e),n(requireDist$1(),e)}(dist$1)),dist$1}var distExports$1=requireDist$1(),minimal$1={exports:{}},indexMinimal={},minimal={},aspromise,hasRequiredAspromise;function requireAspromise(){if(hasRequiredAspromise)return aspromise;return hasRequiredAspromise=1,aspromise=function(e,t){var n=new Array(arguments.length-1),r=0,i=2,o=!0;for(;i<arguments.length;)n[r++]=arguments[i++];return new Promise((function(i,a){n[r]=function(e){if(o)if(o=!1,e)a(e);else{for(var t=new Array(arguments.length-1),n=0;n<t.length;)t[n++]=arguments[n];i.apply(null,t)}};try{e.apply(t||null,n)}catch(e){o&&(o=!1,a(e))}}))},aspromise}var base64={},hasRequiredBase64,eventemitter,hasRequiredEventemitter,float,hasRequiredFloat,inquire_1,hasRequiredInquire;function requireBase64(){return hasRequiredBase64||(hasRequiredBase64=1,function(e){var t=e;t.length=function(e){var t=e.length;if(!t)return 0;for(var n=0;--t%4>1&&"="===e.charAt(t);)++n;return Math.ceil(3*e.length)/4-n};for(var n=new Array(64),r=new Array(123),i=0;i<64;)r[n[i]=i<26?i+65:i<52?i+71:i<62?i-4:i-59|43]=i++;t.encode=function(e,t,r){for(var i,o=null,a=[],s=0,u=0;t<r;){var c=e[t++];switch(u){case 0:a[s++]=n[c>>2],i=(3&c)<<4,u=1;break;case 1:a[s++]=n[i|c>>4],i=(15&c)<<2,u=2;break;case 2:a[s++]=n[i|c>>6],a[s++]=n[63&c],u=0}s>8191&&((o||(o=[])).push(String.fromCharCode.apply(String,a)),s=0)}return u&&(a[s++]=n[i],a[s++]=61,1===u&&(a[s++]=61)),o?(s&&o.push(String.fromCharCode.apply(String,a.slice(0,s))),o.join("")):String.fromCharCode.apply(String,a.slice(0,s))};var o="invalid encoding";t.decode=function(e,t,n){for(var i,a=n,s=0,u=0;u<e.length;){var c=e.charCodeAt(u++);if(61===c&&s>1)break;if(void 0===(c=r[c]))throw Error(o);switch(s){case 0:i=c,s=1;break;case 1:t[n++]=i<<2|(48&c)>>4,i=c,s=2;break;case 2:t[n++]=(15&i)<<4|(60&c)>>2,i=c,s=3;break;case 3:t[n++]=(3&i)<<6|c,s=0}}if(1===s)throw Error(o);return n-a},t.test=function(e){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(e)}}(base64)),base64}function requireEventemitter(){if(hasRequiredEventemitter)return eventemitter;function e(){this._listeners={}}return hasRequiredEventemitter=1,eventemitter=e,e.prototype.on=function(e,t,n){return(this._listeners[e]||(this._listeners[e]=[])).push({fn:t,ctx:n||this}),this},e.prototype.off=function(e,t){if(void 0===e)this._listeners={};else if(void 0===t)this._listeners[e]=[];else for(var n=this._listeners[e],r=0;r<n.length;)n[r].fn===t?n.splice(r,1):++r;return this},e.prototype.emit=function(e){var t=this._listeners[e];if(t){for(var n=[],r=1;r<arguments.length;)n.push(arguments[r++]);for(r=0;r<t.length;)t[r].fn.apply(t[r++].ctx,n)}return this},eventemitter}function requireFloat(){if(hasRequiredFloat)return float;function e(e){return"undefined"!=typeof Float32Array?function(){var t=new Float32Array([-0]),n=new Uint8Array(t.buffer),r=128===n[3];function i(e,r,i){t[0]=e,r[i]=n[0],r[i+1]=n[1],r[i+2]=n[2],r[i+3]=n[3]}function o(e,r,i){t[0]=e,r[i]=n[3],r[i+1]=n[2],r[i+2]=n[1],r[i+3]=n[0]}function a(e,r){return n[0]=e[r],n[1]=e[r+1],n[2]=e[r+2],n[3]=e[r+3],t[0]}function s(e,r){return n[3]=e[r],n[2]=e[r+1],n[1]=e[r+2],n[0]=e[r+3],t[0]}e.writeFloatLE=r?i:o,e.writeFloatBE=r?o:i,e.readFloatLE=r?a:s,e.readFloatBE=r?s:a}():function(){function o(e,t,n,r){var i=t<0?1:0;if(i&&(t=-t),0===t)e(1/t>0?0:2147483648,n,r);else if(isNaN(t))e(2143289344,n,r);else if(t>34028234663852886e22)e((i<<31|2139095040)>>>0,n,r);else if(t<11754943508222875e-54)e((i<<31|Math.round(t/1401298464324817e-60))>>>0,n,r);else{var o=Math.floor(Math.log(t)/Math.LN2);e((i<<31|o+127<<23|8388607&Math.round(t*Math.pow(2,-o)*8388608))>>>0,n,r)}}function a(e,t,n){var r=e(t,n),i=2*(r>>31)+1,o=r>>>23&255,a=8388607&r;return 255===o?a?NaN:i*(1/0):0===o?1401298464324817e-60*i*a:i*Math.pow(2,o-150)*(a+8388608)}e.writeFloatLE=o.bind(null,t),e.writeFloatBE=o.bind(null,n),e.readFloatLE=a.bind(null,r),e.readFloatBE=a.bind(null,i)}(),"undefined"!=typeof Float64Array?function(){var t=new Float64Array([-0]),n=new Uint8Array(t.buffer),r=128===n[7];function i(e,r,i){t[0]=e,r[i]=n[0],r[i+1]=n[1],r[i+2]=n[2],r[i+3]=n[3],r[i+4]=n[4],r[i+5]=n[5],r[i+6]=n[6],r[i+7]=n[7]}function o(e,r,i){t[0]=e,r[i]=n[7],r[i+1]=n[6],r[i+2]=n[5],r[i+3]=n[4],r[i+4]=n[3],r[i+5]=n[2],r[i+6]=n[1],r[i+7]=n[0]}function a(e,r){return n[0]=e[r],n[1]=e[r+1],n[2]=e[r+2],n[3]=e[r+3],n[4]=e[r+4],n[5]=e[r+5],n[6]=e[r+6],n[7]=e[r+7],t[0]}function s(e,r){return n[7]=e[r],n[6]=e[r+1],n[5]=e[r+2],n[4]=e[r+3],n[3]=e[r+4],n[2]=e[r+5],n[1]=e[r+6],n[0]=e[r+7],t[0]}e.writeDoubleLE=r?i:o,e.writeDoubleBE=r?o:i,e.readDoubleLE=r?a:s,e.readDoubleBE=r?s:a}():function(){function o(e,t,n,r,i,o){var a=r<0?1:0;if(a&&(r=-r),0===r)e(0,i,o+t),e(1/r>0?0:2147483648,i,o+n);else if(isNaN(r))e(0,i,o+t),e(2146959360,i,o+n);else if(r>17976931348623157e292)e(0,i,o+t),e((a<<31|2146435072)>>>0,i,o+n);else{var s;if(r<22250738585072014e-324)e((s=r/5e-324)>>>0,i,o+t),e((a<<31|s/4294967296)>>>0,i,o+n);else{var u=Math.floor(Math.log(r)/Math.LN2);1024===u&&(u=1023),e(4503599627370496*(s=r*Math.pow(2,-u))>>>0,i,o+t),e((a<<31|u+1023<<20|1048576*s&1048575)>>>0,i,o+n)}}}function a(e,t,n,r,i){var o=e(r,i+t),a=e(r,i+n),s=2*(a>>31)+1,u=a>>>20&2047,c=4294967296*(1048575&a)+o;return 2047===u?c?NaN:s*(1/0):0===u?5e-324*s*c:s*Math.pow(2,u-1075)*(c+4503599627370496)}e.writeDoubleLE=o.bind(null,t,0,4),e.writeDoubleBE=o.bind(null,n,4,0),e.readDoubleLE=a.bind(null,r,0,4),e.readDoubleBE=a.bind(null,i,4,0)}(),e}function t(e,t,n){t[n]=255&e,t[n+1]=e>>>8&255,t[n+2]=e>>>16&255,t[n+3]=e>>>24}function n(e,t,n){t[n]=e>>>24,t[n+1]=e>>>16&255,t[n+2]=e>>>8&255,t[n+3]=255&e}function r(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16|e[t+3]<<24)>>>0}function i(e,t){return(e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3])>>>0}return hasRequiredFloat=1,float=e(e)}function requireInquire(){if(hasRequiredInquire)return inquire_1;function inquire(moduleName){try{var mod=eval("quire".replace(/^/,"re"))(moduleName);if(mod&&(mod.length||Object.keys(mod).length))return mod}catch(e){}return null}return hasRequiredInquire=1,inquire_1=inquire,inquire_1}var utf8={},hasRequiredUtf8,pool_1,hasRequiredPool,longbits,hasRequiredLongbits,hasRequiredMinimal$1,writer,hasRequiredWriter,writer_buffer,hasRequiredWriter_buffer,reader,hasRequiredReader,reader_buffer,hasRequiredReader_buffer;function requireUtf8(){return hasRequiredUtf8||(hasRequiredUtf8=1,function(e){var t=e;t.length=function(e){for(var t=0,n=0,r=0;r<e.length;++r)(n=e.charCodeAt(r))<128?t+=1:n<2048?t+=2:55296==(64512&n)&&56320==(64512&e.charCodeAt(r+1))?(++r,t+=4):t+=3;return t},t.read=function(e,t,n){if(n-t<1)return"";for(var r,i=null,o=[],a=0;t<n;)(r=e[t++])<128?o[a++]=r:r>191&&r<224?o[a++]=(31&r)<<6|63&e[t++]:r>239&&r<365?(r=((7&r)<<18|(63&e[t++])<<12|(63&e[t++])<<6|63&e[t++])-65536,o[a++]=55296+(r>>10),o[a++]=56320+(1023&r)):o[a++]=(15&r)<<12|(63&e[t++])<<6|63&e[t++],a>8191&&((i||(i=[])).push(String.fromCharCode.apply(String,o)),a=0);return i?(a&&i.push(String.fromCharCode.apply(String,o.slice(0,a))),i.join("")):String.fromCharCode.apply(String,o.slice(0,a))},t.write=function(e,t,n){for(var r,i,o=n,a=0;a<e.length;++a)(r=e.charCodeAt(a))<128?t[n++]=r:r<2048?(t[n++]=r>>6|192,t[n++]=63&r|128):55296==(64512&r)&&56320==(64512&(i=e.charCodeAt(a+1)))?(r=65536+((1023&r)<<10)+(1023&i),++a,t[n++]=r>>18|240,t[n++]=r>>12&63|128,t[n++]=r>>6&63|128,t[n++]=63&r|128):(t[n++]=r>>12|224,t[n++]=r>>6&63|128,t[n++]=63&r|128);return n-o}}(utf8)),utf8}function requirePool(){if(hasRequiredPool)return pool_1;return hasRequiredPool=1,pool_1=function(e,t,n){var r=n||8192,i=r>>>1,o=null,a=r;return function(n){if(n<1||n>i)return e(n);a+n>r&&(o=e(r),a=0);var s=t.call(o,a,a+=n);return 7&a&&(a=1+(7|a)),s}}}function requireLongbits(){if(hasRequiredLongbits)return longbits;hasRequiredLongbits=1,longbits=t;var e=requireMinimal$1();function t(e,t){this.lo=e>>>0,this.hi=t>>>0}var n=t.zero=new t(0,0);n.toNumber=function(){return 0},n.zzEncode=n.zzDecode=function(){return this},n.length=function(){return 1};var r=t.zeroHash="\0\0\0\0\0\0\0\0";t.fromNumber=function(e){if(0===e)return n;var r=e<0;r&&(e=-e);var i=e>>>0,o=(e-i)/4294967296>>>0;return r&&(o=~o>>>0,i=~i>>>0,++i>4294967295&&(i=0,++o>4294967295&&(o=0))),new t(i,o)},t.from=function(r){if("number"==typeof r)return t.fromNumber(r);if(e.isString(r)){if(!e.Long)return t.fromNumber(parseInt(r,10));r=e.Long.fromString(r)}return r.low||r.high?new t(r.low>>>0,r.high>>>0):n},t.prototype.toNumber=function(e){if(!e&&this.hi>>>31){var t=1+~this.lo>>>0,n=~this.hi>>>0;return t||(n=n+1>>>0),-(t+4294967296*n)}return this.lo+4294967296*this.hi},t.prototype.toLong=function(t){return e.Long?new e.Long(0|this.lo,0|this.hi,Boolean(t)):{low:0|this.lo,high:0|this.hi,unsigned:Boolean(t)}};var i=String.prototype.charCodeAt;return t.fromHash=function(e){return e===r?n:new t((i.call(e,0)|i.call(e,1)<<8|i.call(e,2)<<16|i.call(e,3)<<24)>>>0,(i.call(e,4)|i.call(e,5)<<8|i.call(e,6)<<16|i.call(e,7)<<24)>>>0)},t.prototype.toHash=function(){return String.fromCharCode(255&this.lo,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,255&this.hi,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)},t.prototype.zzEncode=function(){var e=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^e)>>>0,this.lo=(this.lo<<1^e)>>>0,this},t.prototype.zzDecode=function(){var e=-(1&this.lo);return this.lo=((this.lo>>>1|this.hi<<31)^e)>>>0,this.hi=(this.hi>>>1^e)>>>0,this},t.prototype.length=function(){var e=this.lo,t=(this.lo>>>28|this.hi<<4)>>>0,n=this.hi>>>24;return 0===n?0===t?e<16384?e<128?1:2:e<2097152?3:4:t<16384?t<128?5:6:t<2097152?7:8:n<128?9:10},longbits}function requireMinimal$1(){return hasRequiredMinimal$1||(hasRequiredMinimal$1=1,function(e){var t=e;function n(e,t,n){for(var r=Object.keys(t),i=0;i<r.length;++i)void 0!==e[r[i]]&&n||(e[r[i]]=t[r[i]]);return e}function r(e){function t(e,r){if(!(this instanceof t))return new t(e,r);Object.defineProperty(this,"message",{get:function(){return e}}),Error.captureStackTrace?Error.captureStackTrace(this,t):Object.defineProperty(this,"stack",{value:(new Error).stack||""}),r&&n(this,r)}return(t.prototype=Object.create(Error.prototype)).constructor=t,Object.defineProperty(t.prototype,"name",{get:function(){return e}}),t.prototype.toString=function(){return this.name+": "+this.message},t}t.asPromise=requireAspromise(),t.base64=requireBase64(),t.EventEmitter=requireEventemitter(),t.float=requireFloat(),t.inquire=requireInquire(),t.utf8=requireUtf8(),t.pool=requirePool(),t.LongBits=requireLongbits(),t.isNode=Boolean(void 0!==commonjsGlobal&&commonjsGlobal&&commonjsGlobal.process&&commonjsGlobal.process.versions&&commonjsGlobal.process.versions.node),t.global=t.isNode&&commonjsGlobal||"undefined"!=typeof window&&window||"undefined"!=typeof self&&self||commonjsGlobal,t.emptyArray=Object.freeze?Object.freeze([]):[],t.emptyObject=Object.freeze?Object.freeze({}):{},t.isInteger=Number.isInteger||function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e},t.isString=function(e){return"string"==typeof e||e instanceof String},t.isObject=function(e){return e&&"object"==typeof e},t.isset=t.isSet=function(e,t){var n=e[t];return!(null==n||!e.hasOwnProperty(t))&&("object"!=typeof n||(Array.isArray(n)?n.length:Object.keys(n).length)>0)},t.Buffer=function(){try{var e=t.inquire("buffer").Buffer;return e.prototype.utf8Write?e:null}catch(e){return null}}(),t._Buffer_from=null,t._Buffer_allocUnsafe=null,t.newBuffer=function(e){return"number"==typeof e?t.Buffer?t._Buffer_allocUnsafe(e):new t.Array(e):t.Buffer?t._Buffer_from(e):"undefined"==typeof Uint8Array?e:new Uint8Array(e)},t.Array="undefined"!=typeof Uint8Array?Uint8Array:Array,t.Long=t.global.dcodeIO&&t.global.dcodeIO.Long||t.global.Long||t.inquire("long"),t.key2Re=/^true|false|0|1$/,t.key32Re=/^-?(?:0|[1-9][0-9]*)$/,t.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/,t.longToHash=function(e){return e?t.LongBits.from(e).toHash():t.LongBits.zeroHash},t.longFromHash=function(e,n){var r=t.LongBits.fromHash(e);return t.Long?t.Long.fromBits(r.lo,r.hi,n):r.toNumber(Boolean(n))},t.merge=n,t.lcFirst=function(e){return e.charAt(0).toLowerCase()+e.substring(1)},t.newError=r,t.ProtocolError=r("ProtocolError"),t.oneOfGetter=function(e){for(var t={},n=0;n<e.length;++n)t[e[n]]=1;return function(){for(var e=Object.keys(this),n=e.length-1;n>-1;--n)if(1===t[e[n]]&&void 0!==this[e[n]]&&null!==this[e[n]])return e[n]}},t.oneOfSetter=function(e){return function(t){for(var n=0;n<e.length;++n)e[n]!==t&&delete this[e[n]]}},t.toJSONOptions={longs:String,enums:String,bytes:String,json:!0},t._configure=function(){var e=t.Buffer;e?(t._Buffer_from=e.from!==Uint8Array.from&&e.from||function(t,n){return new e(t,n)},t._Buffer_allocUnsafe=e.allocUnsafe||function(t){return new e(t)}):t._Buffer_from=t._Buffer_allocUnsafe=null}}(minimal)),minimal}function requireWriter(){if(hasRequiredWriter)return writer;hasRequiredWriter=1,writer=u;var e,t=requireMinimal$1(),n=t.LongBits,r=t.base64,i=t.utf8;function o(e,t,n){this.fn=e,this.len=t,this.next=void 0,this.val=n}function a(){}function s(e){this.head=e.head,this.tail=e.tail,this.len=e.len,this.next=e.states}function u(){this.len=0,this.head=new o(a,0,0),this.tail=this.head,this.states=null}var c=function(){return t.Buffer?function(){return(u.create=function(){return new e})()}:function(){return new u}};function l(e,t,n){t[n]=255&e}function d(e,t){this.len=e,this.next=void 0,this.val=t}function f(e,t,n){for(;e.hi;)t[n++]=127&e.lo|128,e.lo=(e.lo>>>7|e.hi<<25)>>>0,e.hi>>>=7;for(;e.lo>127;)t[n++]=127&e.lo|128,e.lo=e.lo>>>7;t[n++]=e.lo}function h(e,t,n){t[n]=255&e,t[n+1]=e>>>8&255,t[n+2]=e>>>16&255,t[n+3]=e>>>24}u.create=c(),u.alloc=function(e){return new t.Array(e)},t.Array!==Array&&(u.alloc=t.pool(u.alloc,t.Array.prototype.subarray)),u.prototype._push=function(e,t,n){return this.tail=this.tail.next=new o(e,t,n),this.len+=t,this},d.prototype=Object.create(o.prototype),d.prototype.fn=function(e,t,n){for(;e>127;)t[n++]=127&e|128,e>>>=7;t[n]=e},u.prototype.uint32=function(e){return this.len+=(this.tail=this.tail.next=new d((e>>>=0)<128?1:e<16384?2:e<2097152?3:e<268435456?4:5,e)).len,this},u.prototype.int32=function(e){return e<0?this._push(f,10,n.fromNumber(e)):this.uint32(e)},u.prototype.sint32=function(e){return this.uint32((e<<1^e>>31)>>>0)},u.prototype.uint64=function(e){var t=n.from(e);return this._push(f,t.length(),t)},u.prototype.int64=u.prototype.uint64,u.prototype.sint64=function(e){var t=n.from(e).zzEncode();return this._push(f,t.length(),t)},u.prototype.bool=function(e){return this._push(l,1,e?1:0)},u.prototype.fixed32=function(e){return this._push(h,4,e>>>0)},u.prototype.sfixed32=u.prototype.fixed32,u.prototype.fixed64=function(e){var t=n.from(e);return this._push(h,4,t.lo)._push(h,4,t.hi)},u.prototype.sfixed64=u.prototype.fixed64,u.prototype.float=function(e){return this._push(t.float.writeFloatLE,4,e)},u.prototype.double=function(e){return this._push(t.float.writeDoubleLE,8,e)};var p=t.Array.prototype.set?function(e,t,n){t.set(e,n)}:function(e,t,n){for(var r=0;r<e.length;++r)t[n+r]=e[r]};return u.prototype.bytes=function(e){var n=e.length>>>0;if(!n)return this._push(l,1,0);if(t.isString(e)){var i=u.alloc(n=r.length(e));r.decode(e,i,0),e=i}return this.uint32(n)._push(p,n,e)},u.prototype.string=function(e){var t=i.length(e);return t?this.uint32(t)._push(i.write,t,e):this._push(l,1,0)},u.prototype.fork=function(){return this.states=new s(this),this.head=this.tail=new o(a,0,0),this.len=0,this},u.prototype.reset=function(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new o(a,0,0),this.len=0),this},u.prototype.ldelim=function(){var e=this.head,t=this.tail,n=this.len;return this.reset().uint32(n),n&&(this.tail.next=e.next,this.tail=t,this.len+=n),this},u.prototype.finish=function(){for(var e=this.head.next,t=this.constructor.alloc(this.len),n=0;e;)e.fn(e.val,t,n),n+=e.len,e=e.next;return t},u._configure=function(t){e=t,u.create=c(),e._configure()},writer}function requireWriter_buffer(){if(hasRequiredWriter_buffer)return writer_buffer;hasRequiredWriter_buffer=1,writer_buffer=n;var e=requireWriter();(n.prototype=Object.create(e.prototype)).constructor=n;var t=requireMinimal$1();function n(){e.call(this)}function r(e,n,r){e.length<40?t.utf8.write(e,n,r):n.utf8Write?n.utf8Write(e,r):n.write(e,r)}return n._configure=function(){n.alloc=t._Buffer_allocUnsafe,n.writeBytesBuffer=t.Buffer&&t.Buffer.prototype instanceof Uint8Array&&"set"===t.Buffer.prototype.set.name?function(e,t,n){t.set(e,n)}:function(e,t,n){if(e.copy)e.copy(t,n,0,e.length);else for(var r=0;r<e.length;)t[n++]=e[r++]}},n.prototype.bytes=function(e){t.isString(e)&&(e=t._Buffer_from(e,"base64"));var r=e.length>>>0;return this.uint32(r),r&&this._push(n.writeBytesBuffer,r,e),this},n.prototype.string=function(e){var n=t.Buffer.byteLength(e);return this.uint32(n),n&&this._push(r,n,e),this},n._configure(),writer_buffer}function requireReader(){if(hasRequiredReader)return reader;hasRequiredReader=1,reader=o;var e,t=requireMinimal$1(),n=t.LongBits,r=t.utf8;function i(e,t){return RangeError("index out of range: "+e.pos+" + "+(t||1)+" > "+e.len)}function o(e){this.buf=e,this.pos=0,this.len=e.length}var a,s="undefined"!=typeof Uint8Array?function(e){if(e instanceof Uint8Array||Array.isArray(e))return new o(e);throw Error("illegal buffer")}:function(e){if(Array.isArray(e))return new o(e);throw Error("illegal buffer")},u=function(){return t.Buffer?function(n){return(o.create=function(n){return t.Buffer.isBuffer(n)?new e(n):s(n)})(n)}:s};function c(){var e=new n(0,0),t=0;if(!(this.len-this.pos>4)){for(;t<3;++t){if(this.pos>=this.len)throw i(this);if(e.lo=(e.lo|(127&this.buf[this.pos])<<7*t)>>>0,this.buf[this.pos++]<128)return e}return e.lo=(e.lo|(127&this.buf[this.pos++])<<7*t)>>>0,e}for(;t<4;++t)if(e.lo=(e.lo|(127&this.buf[this.pos])<<7*t)>>>0,this.buf[this.pos++]<128)return e;if(e.lo=(e.lo|(127&this.buf[this.pos])<<28)>>>0,e.hi=(e.hi|(127&this.buf[this.pos])>>4)>>>0,this.buf[this.pos++]<128)return e;if(t=0,this.len-this.pos>4){for(;t<5;++t)if(e.hi=(e.hi|(127&this.buf[this.pos])<<7*t+3)>>>0,this.buf[this.pos++]<128)return e}else for(;t<5;++t){if(this.pos>=this.len)throw i(this);if(e.hi=(e.hi|(127&this.buf[this.pos])<<7*t+3)>>>0,this.buf[this.pos++]<128)return e}throw Error("invalid varint encoding")}function l(e,t){return(e[t-4]|e[t-3]<<8|e[t-2]<<16|e[t-1]<<24)>>>0}function d(){if(this.pos+8>this.len)throw i(this,8);return new n(l(this.buf,this.pos+=4),l(this.buf,this.pos+=4))}return o.create=u(),o.prototype._slice=t.Array.prototype.subarray||t.Array.prototype.slice,o.prototype.uint32=(a=4294967295,function(){if(a=(127&this.buf[this.pos])>>>0,this.buf[this.pos++]<128)return a;if(a=(a|(127&this.buf[this.pos])<<7)>>>0,this.buf[this.pos++]<128)return a;if(a=(a|(127&this.buf[this.pos])<<14)>>>0,this.buf[this.pos++]<128)return a;if(a=(a|(127&this.buf[this.pos])<<21)>>>0,this.buf[this.pos++]<128)return a;if(a=(a|(15&this.buf[this.pos])<<28)>>>0,this.buf[this.pos++]<128)return a;if((this.pos+=5)>this.len)throw this.pos=this.len,i(this,10);return a}),o.prototype.int32=function(){return 0|this.uint32()},o.prototype.sint32=function(){var e=this.uint32();return e>>>1^-(1&e)|0},o.prototype.bool=function(){return 0!==this.uint32()},o.prototype.fixed32=function(){if(this.pos+4>this.len)throw i(this,4);return l(this.buf,this.pos+=4)},o.prototype.sfixed32=function(){if(this.pos+4>this.len)throw i(this,4);return 0|l(this.buf,this.pos+=4)},o.prototype.float=function(){if(this.pos+4>this.len)throw i(this,4);var e=t.float.readFloatLE(this.buf,this.pos);return this.pos+=4,e},o.prototype.double=function(){if(this.pos+8>this.len)throw i(this,4);var e=t.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,e},o.prototype.bytes=function(){var e=this.uint32(),t=this.pos,n=this.pos+e;if(n>this.len)throw i(this,e);return this.pos+=e,Array.isArray(this.buf)?this.buf.slice(t,n):t===n?new this.buf.constructor(0):this._slice.call(this.buf,t,n)},o.prototype.string=function(){var e=this.bytes();return r.read(e,0,e.length)},o.prototype.skip=function(e){if("number"==typeof e){if(this.pos+e>this.len)throw i(this,e);this.pos+=e}else do{if(this.pos>=this.len)throw i(this)}while(128&this.buf[this.pos++]);return this},o.prototype.skipType=function(e){switch(e){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;4!=(e=7&this.uint32());)this.skipType(e);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+e+" at offset "+this.pos)}return this},o._configure=function(n){e=n,o.create=u(),e._configure();var r=t.Long?"toLong":"toNumber";t.merge(o.prototype,{int64:function(){return c.call(this)[r](!1)},uint64:function(){return c.call(this)[r](!0)},sint64:function(){return c.call(this).zzDecode()[r](!1)},fixed64:function(){return d.call(this)[r](!0)},sfixed64:function(){return d.call(this)[r](!1)}})},reader}function requireReader_buffer(){if(hasRequiredReader_buffer)return reader_buffer;hasRequiredReader_buffer=1,reader_buffer=n;var e=requireReader();(n.prototype=Object.create(e.prototype)).constructor=n;var t=requireMinimal$1();function n(t){e.call(this,t)}return n._configure=function(){t.Buffer&&(n.prototype._slice=t.Buffer.prototype.slice)},n.prototype.string=function(){var e=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+e,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+e,this.len))},n._configure(),reader_buffer}var rpc={},service,hasRequiredService,hasRequiredRpc,roots,hasRequiredRoots,hasRequiredIndexMinimal,hasRequiredMinimal;function requireService(){if(hasRequiredService)return service;hasRequiredService=1,service=t;var e=requireMinimal$1();function t(t,n,r){if("function"!=typeof t)throw TypeError("rpcImpl must be a function");e.EventEmitter.call(this),this.rpcImpl=t,this.requestDelimited=Boolean(n),this.responseDelimited=Boolean(r)}return(t.prototype=Object.create(e.EventEmitter.prototype)).constructor=t,t.prototype.rpcCall=function t(n,r,i,o,a){if(!o)throw TypeError("request must be specified");var s=this;if(!a)return e.asPromise(t,s,n,r,i,o);if(s.rpcImpl)try{return s.rpcImpl(n,r[s.requestDelimited?"encodeDelimited":"encode"](o).finish(),(function(e,t){if(e)return s.emit("error",e,n),a(e);if(null!==t){if(!(t instanceof i))try{t=i[s.responseDelimited?"decodeDelimited":"decode"](t)}catch(e){return s.emit("error",e,n),a(e)}return s.emit("data",t,n),a(null,t)}s.end(!0)}))}catch(e){return s.emit("error",e,n),void setTimeout((function(){a(e)}),0)}else setTimeout((function(){a(Error("already ended"))}),0)},t.prototype.end=function(e){return this.rpcImpl&&(e||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this},service}function requireRpc(){return hasRequiredRpc||(hasRequiredRpc=1,function(e){e.Service=requireService()}(rpc)),rpc}function requireRoots(){return hasRequiredRoots?roots:(hasRequiredRoots=1,roots={})}function requireIndexMinimal(){return hasRequiredIndexMinimal||(hasRequiredIndexMinimal=1,function(e){var t=e;function n(){t.util._configure(),t.Writer._configure(t.BufferWriter),t.Reader._configure(t.BufferReader)}t.build="minimal",t.Writer=requireWriter(),t.BufferWriter=requireWriter_buffer(),t.Reader=requireReader(),t.BufferReader=requireReader_buffer(),t.util=requireMinimal$1(),t.rpc=requireRpc(),t.roots=requireRoots(),t.configure=n,n()}(indexMinimal)),indexMinimal}function requireMinimal(){return hasRequiredMinimal||(hasRequiredMinimal=1,minimal$1.exports=requireIndexMinimal()),minimal$1.exports}var minimalExports=requireMinimal();function createBasePBAnimator(){return{states:[]}}const PBAnimator={encode(e,t=minimalExports.Writer.create()){for(const n of e.states)PBAnimationState.encode(n,t.uint32(10).fork()).ldelim();return t},decode(e,t){const n=e instanceof minimalExports.Reader?e:new minimalExports.Reader(e);let r=void 0===t?n.len:n.pos+t;const i=createBasePBAnimator();for(;n.pos<r;){const e=n.uint32();if(e>>>3==1)i.states.push(PBAnimationState.decode(n,n.uint32()));else n.skipType(7&e)}return i}};function createBasePBAnimationState(){return{name:"",clip:"",playing:void 0,weight:void 0,speed:void 0,loop:void 0,shouldReset:void 0}}const PBAnimationState={encode:(e,t=minimalExports.Writer.create())=>(""!==e.name&&t.uint32(10).string(e.name),""!==e.clip&&t.uint32(18).string(e.clip),void 0!==e.playing&&t.uint32(24).bool(e.playing),void 0!==e.weight&&t.uint32(37).float(e.weight),void 0!==e.speed&&t.uint32(45).float(e.speed),void 0!==e.loop&&t.uint32(48).bool(e.loop),void 0!==e.shouldReset&&t.uint32(56).bool(e.shouldReset),t),decode(e,t){const n=e instanceof minimalExports.Reader?e:new minimalExports.Reader(e);let r=void 0===t?n.len:n.pos+t;const i=createBasePBAnimationState();for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:i.name=n.string();break;case 2:i.clip=n.string();break;case 3:i.playing=n.bool();break;case 4:i.weight=n.float();break;case 5:i.speed=n.float();break;case 6:i.loop=n.bool();break;case 7:i.shouldReset=n.bool();break;default:n.skipType(7&e)}}return i}},COMPONENT_ID$p=1042,AnimatorSchema={serialize(e,t){const n=PBAnimator.encode(e),r=new Uint8Array(n.finish(),0,n.len);t.writeBuffer(r,!1)},deserialize:e=>PBAnimator.decode(e.buffer(),e.remainingBytes()),create:()=>PBAnimator.decode(new Uint8Array)};function createBasePBAudioSource(){return{playing:void 0,volume:void 0,loop:void 0,pitch:void 0,audioClipUrl:""}}const PBAudioSource={encode:(e,t=minimalExports.Writer.create())=>(void 0!==e.playing&&t.uint32(8).bool(e.playing),void 0!==e.volume&&t.uint32(21).float(e.volume),void 0!==e.loop&&t.uint32(24).bool(e.loop),void 0!==e.pitch&&t.uint32(37).float(e.pitch),""!==e.audioClipUrl&&t.uint32(42).string(e.audioClipUrl),t),decode(e,t){const n=e instanceof minimalExports.Reader?e:new minimalExports.Reader(e);let r=void 0===t?n.len:n.pos+t;const i=createBasePBAudioSource();for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:i.playing=n.bool();break;case 2:i.volume=n.float();break;case 3:i.loop=n.bool();break;case 4:i.pitch=n.float();break;case 5:i.audioClipUrl=n.string();break;default:n.skipType(7&e)}}return i}},COMPONENT_ID$o=1020,AudioSourceSchema={serialize(e,t){const n=PBAudioSource.encode(e),r=new Uint8Array(n.finish(),0,n.len);t.writeBuffer(r,!1)},deserialize:e=>PBAudioSource.decode(e.buffer(),e.remainingBytes()),create:()=>PBAudioSource.decode(new Uint8Array)};var AvatarAnchorPoint;function createBasePBAvatarAttach(){return{avatarId:"",anchorPointId:0}}!function(e){e[e.POSITION=0]="POSITION",e[e.NAME_TAG=1]="NAME_TAG",e[e.LEFT_HAND=2]="LEFT_HAND",e[e.RIGHT_HAND=3]="RIGHT_HAND",e[e.UNRECOGNIZED=-1]="UNRECOGNIZED"}(AvatarAnchorPoint||(AvatarAnchorPoint={}));const PBAvatarAttach={encode:(e,t=minimalExports.Writer.create())=>(""!==e.avatarId&&t.uint32(10).string(e.avatarId),0!==e.anchorPointId&&t.uint32(16).int32(e.anchorPointId),t),decode(e,t){const n=e instanceof minimalExports.Reader?e:new minimalExports.Reader(e);let r=void 0===t?n.len:n.pos+t;const i=createBasePBAvatarAttach();for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:i.avatarId=n.string();break;case 2:i.anchorPointId=n.int32();break;default:n.skipType(7&e)}}return i}},COMPONENT_ID$n=1073,AvatarAttachSchema={serialize(e,t){const n=PBAvatarAttach.encode(e),r=new Uint8Array(n.finish(),0,n.len);t.writeBuffer(r,!1)},deserialize:e=>PBAvatarAttach.decode(e.buffer(),e.remainingBytes()),create:()=>PBAvatarAttach.decode(new Uint8Array)};function createBaseVector3(){return{x:0,y:0,z:0}}const Vector3={encode:(e,t=minimalExports.Writer.create())=>(0!==e.x&&t.uint32(13).float(e.x),0!==e.y&&t.uint32(21).float(e.y),0!==e.z&&t.uint32(29).float(e.z),t),decode(e,t){const n=e instanceof minimalExports.Reader?e:new minimalExports.Reader(e);let r=void 0===t?n.len:n.pos+t;const i=createBaseVector3();for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:i.x=n.float();break;case 2:i.y=n.float();break;case 3:i.z=n.float();break;default:n.skipType(7&e)}}return i}};var AvatarModifier;function createBasePBAvatarModifierArea(){return{area:void 0,excludeIds:[],modifiers:[]}}!function(e){e[e.HIDE_AVATARS=0]="HIDE_AVATARS",e[e.DISABLE_PASSPORTS=1]="DISABLE_PASSPORTS",e[e.UNRECOGNIZED=-1]="UNRECOGNIZED"}(AvatarModifier||(AvatarModifier={}));const PBAvatarModifierArea={encode(e,t=minimalExports.Writer.create()){void 0!==e.area&&Vector3.encode(e.area,t.uint32(10).fork()).ldelim();for(const n of e.excludeIds)t.uint32(18).string(n);t.uint32(26).fork();for(const n of e.modifiers)t.int32(n);return t.ldelim(),t},decode(e,t){const n=e instanceof minimalExports.Reader?e:new minimalExports.Reader(e);let r=void 0===t?n.len:n.pos+t;const i=createBasePBAvatarModifierArea();for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:i.area=Vector3.decode(n,n.uint32());break;case 2:i.excludeIds.push(n.string());break;case 3:if(2==(7&e)){const e=n.uint32()+n.pos;for(;n.pos<e;)i.modifiers.push(n.int32())}else i.modifiers.push(n.int32());break;default:n.skipType(7&e)}}return i}},COMPONENT_ID$m=1070,AvatarModifierAreaSchema={serialize(e,t){const n=PBAvatarModifierArea.encode(e),r=new Uint8Array(n.finish(),0,n.len);t.writeBuffer(r,!1)},deserialize:e=>PBAvatarModifierArea.decode(e.buffer(),e.remainingBytes()),create:()=>PBAvatarModifierArea.decode(new Uint8Array)};var long,hasRequiredLong;function requireLong(){if(hasRequiredLong)return long;hasRequiredLong=1,long=t;var e=null;try{e=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch(e){}function t(e,t,n){this.low=0|e,this.high=0|t,this.unsigned=!!n}function n(e){return!0===(e&&e.__isLong__)}t.prototype.__isLong__,Object.defineProperty(t.prototype,"__isLong__",{value:!0}),t.isLong=n;var r={},i={};function o(e,t){var n,o,a;return t?(a=0<=(e>>>=0)&&e<256)&&(o=i[e])?o:(n=s(e,(0|e)<0?-1:0,!0),a&&(i[e]=n),n):(a=-128<=(e|=0)&&e<128)&&(o=r[e])?o:(n=s(e,e<0?-1:0,!1),a&&(r[e]=n),n)}function a(e,t){if(isNaN(e))return t?g:m;if(t){if(e<0)return g;if(e>=f)return E}else{if(e<=-h)return B;if(e+1>=h)return w}return e<0?a(-e,t).neg():s(e%d|0,e/d|0,t)}function s(e,n,r){return new t(e,n,r)}t.fromInt=o,t.fromNumber=a,t.fromBits=s;var u=Math.pow;function c(e,t,n){if(0===e.length)throw Error("empty string");if("NaN"===e||"Infinity"===e||"+Infinity"===e||"-Infinity"===e)return m;if("number"==typeof t?(n=t,t=!1):t=!!t,(n=n||10)<2||36<n)throw RangeError("radix");var r;if((r=e.indexOf("-"))>0)throw Error("interior hyphen");if(0===r)return c(e.substring(1),t,n).neg();for(var i=a(u(n,8)),o=m,s=0;s<e.length;s+=8){var l=Math.min(8,e.length-s),d=parseInt(e.substring(s,s+l),n);if(l<8){var f=a(u(n,l));o=o.mul(f).add(a(d))}else o=(o=o.mul(i)).add(a(d))}return o.unsigned=t,o}function l(e,t){return"number"==typeof e?a(e,t):"string"==typeof e?c(e,t):s(e.low,e.high,"boolean"==typeof t?t:e.unsigned)}t.fromString=c,t.fromValue=l;var d=4294967296,f=d*d,h=f/2,p=o(1<<24),m=o(0);t.ZERO=m;var g=o(0,!0);t.UZERO=g;var y=o(1);t.ONE=y;var b=o(1,!0);t.UONE=b;var v=o(-1);t.NEG_ONE=v;var w=s(-1,2147483647,!1);t.MAX_VALUE=w;var E=s(-1,-1,!0);t.MAX_UNSIGNED_VALUE=E;var B=s(0,-2147483648,!1);t.MIN_VALUE=B;var x=t.prototype;return x.toInt=function(){return this.unsigned?this.low>>>0:this.low},x.toNumber=function(){return this.unsigned?(this.high>>>0)*d+(this.low>>>0):this.high*d+(this.low>>>0)},x.toString=function(e){if((e=e||10)<2||36<e)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative()){if(this.eq(B)){var t=a(e),n=this.div(t),r=n.mul(t).sub(this);return n.toString(e)+r.toInt().toString(e)}return"-"+this.neg().toString(e)}for(var i=a(u(e,6),this.unsigned),o=this,s="";;){var c=o.div(i),l=(o.sub(c.mul(i)).toInt()>>>0).toString(e);if((o=c).isZero())return l+s;for(;l.length<6;)l="0"+l;s=""+l+s}},x.getHighBits=function(){return this.high},x.getHighBitsUnsigned=function(){return this.high>>>0},x.getLowBits=function(){return this.low},x.getLowBitsUnsigned=function(){return this.low>>>0},x.getNumBitsAbs=function(){if(this.isNegative())return this.eq(B)?64:this.neg().getNumBitsAbs();for(var e=0!=this.high?this.high:this.low,t=31;t>0&&0==(e&1<<t);t--);return 0!=this.high?t+33:t+1},x.isZero=function(){return 0===this.high&&0===this.low},x.eqz=x.isZero,x.isNegative=function(){return!this.unsigned&&this.high<0},x.isPositive=function(){return this.unsigned||this.high>=0},x.isOdd=function(){return 1==(1&this.low)},x.isEven=function(){return 0==(1&this.low)},x.equals=function(e){return n(e)||(e=l(e)),(this.unsigned===e.unsigned||this.high>>>31!=1||e.high>>>31!=1)&&(this.high===e.high&&this.low===e.low)},x.eq=x.equals,x.notEquals=function(e){return!this.eq(e)},x.neq=x.notEquals,x.ne=x.notEquals,x.lessThan=function(e){return this.comp(e)<0},x.lt=x.lessThan,x.lessThanOrEqual=function(e){return this.comp(e)<=0},x.lte=x.lessThanOrEqual,x.le=x.lessThanOrEqual,x.greaterThan=function(e){return this.comp(e)>0},x.gt=x.greaterThan,x.greaterThanOrEqual=function(e){return this.comp(e)>=0},x.gte=x.greaterThanOrEqual,x.ge=x.greaterThanOrEqual,x.compare=function(e){if(n(e)||(e=l(e)),this.eq(e))return 0;var t=this.isNegative(),r=e.isNegative();return t&&!r?-1:!t&&r?1:this.unsigned?e.high>>>0>this.high>>>0||e.high===this.high&&e.low>>>0>this.low>>>0?-1:1:this.sub(e).isNegative()?-1:1},x.comp=x.compare,x.negate=function(){return!this.unsigned&&this.eq(B)?B:this.not().add(y)},x.neg=x.negate,x.add=function(e){n(e)||(e=l(e));var t=this.high>>>16,r=65535&this.high,i=this.low>>>16,o=65535&this.low,a=e.high>>>16,u=65535&e.high,c=e.low>>>16,d=0,f=0,h=0,p=0;return h+=(p+=o+(65535&e.low))>>>16,f+=(h+=i+c)>>>16,d+=(f+=r+u)>>>16,d+=t+a,s((h&=65535)<<16|(p&=65535),(d&=65535)<<16|(f&=65535),this.unsigned)},x.subtract=function(e){return n(e)||(e=l(e)),this.add(e.neg())},x.sub=x.subtract,x.multiply=function(t){if(this.isZero())return m;if(n(t)||(t=l(t)),e)return s(e.mul(this.low,this.high,t.low,t.high),e.get_high(),this.unsigned);if(t.isZero())return m;if(this.eq(B))return t.isOdd()?B:m;if(t.eq(B))return this.isOdd()?B:m;if(this.isNegative())return t.isNegative()?this.neg().mul(t.neg()):this.neg().mul(t).neg();if(t.isNegative())return this.mul(t.neg()).neg();if(this.lt(p)&&t.lt(p))return a(this.toNumber()*t.toNumber(),this.unsigned);var r=this.high>>>16,i=65535&this.high,o=this.low>>>16,u=65535&this.low,c=t.high>>>16,d=65535&t.high,f=t.low>>>16,h=65535&t.low,g=0,y=0,b=0,v=0;return b+=(v+=u*h)>>>16,y+=(b+=o*h)>>>16,b&=65535,y+=(b+=u*f)>>>16,g+=(y+=i*h)>>>16,y&=65535,g+=(y+=o*f)>>>16,y&=65535,g+=(y+=u*d)>>>16,g+=r*h+i*f+o*d+u*c,s((b&=65535)<<16|(v&=65535),(g&=65535)<<16|(y&=65535),this.unsigned)},x.mul=x.multiply,x.divide=function(t){if(n(t)||(t=l(t)),t.isZero())throw Error("division by zero");var r,i,o;if(e)return this.unsigned||-2147483648!==this.high||-1!==t.low||-1!==t.high?s((this.unsigned?e.div_u:e.div_s)(this.low,this.high,t.low,t.high),e.get_high(),this.unsigned):this;if(this.isZero())return this.unsigned?g:m;if(this.unsigned){if(t.unsigned||(t=t.toUnsigned()),t.gt(this))return g;if(t.gt(this.shru(1)))return b;o=g}else{if(this.eq(B))return t.eq(y)||t.eq(v)?B:t.eq(B)?y:(r=this.shr(1).div(t).shl(1)).eq(m)?t.isNegative()?y:v:(i=this.sub(t.mul(r)),o=r.add(i.div(t)));if(t.eq(B))return this.unsigned?g:m;if(this.isNegative())return t.isNegative()?this.neg().div(t.neg()):this.neg().div(t).neg();if(t.isNegative())return this.div(t.neg()).neg();o=m}for(i=this;i.gte(t);){r=Math.max(1,Math.floor(i.toNumber()/t.toNumber()));for(var c=Math.ceil(Math.log(r)/Math.LN2),d=c<=48?1:u(2,c-48),f=a(r),h=f.mul(t);h.isNegative()||h.gt(i);)h=(f=a(r-=d,this.unsigned)).mul(t);f.isZero()&&(f=y),o=o.add(f),i=i.sub(h)}return o},x.div=x.divide,x.modulo=function(t){return n(t)||(t=l(t)),e?s((this.unsigned?e.rem_u:e.rem_s)(this.low,this.high,t.low,t.high),e.get_high(),this.unsigned):this.sub(this.div(t).mul(t))},x.mod=x.modulo,x.rem=x.modulo,x.not=function(){return s(~this.low,~this.high,this.unsigned)},x.and=function(e){return n(e)||(e=l(e)),s(this.low&e.low,this.high&e.high,this.unsigned)},x.or=function(e){return n(e)||(e=l(e)),s(this.low|e.low,this.high|e.high,this.unsigned)},x.xor=function(e){return n(e)||(e=l(e)),s(this.low^e.low,this.high^e.high,this.unsigned)},x.shiftLeft=function(e){return n(e)&&(e=e.toInt()),0==(e&=63)?this:e<32?s(this.low<<e,this.high<<e|this.low>>>32-e,this.unsigned):s(0,this.low<<e-32,this.unsigned)},x.shl=x.shiftLeft,x.shiftRight=function(e){return n(e)&&(e=e.toInt()),0==(e&=63)?this:e<32?s(this.low>>>e|this.high<<32-e,this.high>>e,this.unsigned):s(this.high>>e-32,this.high>=0?0:-1,this.unsigned)},x.shr=x.shiftRight,x.shiftRightUnsigned=function(e){if(n(e)&&(e=e.toInt()),0===(e&=63))return this;var t=this.high;return e<32?s(this.low>>>e|t<<32-e,t>>>e,this.unsigned):s(32===e?t:t>>>e-32,0,this.unsigned)},x.shru=x.shiftRightUnsigned,x.shr_u=x.shiftRightUnsigned,x.toSigned=function(){return this.unsigned?s(this.low,this.high,!1):this},x.toUnsigned=function(){return this.unsigned?this:s(this.low,this.high,!0)},x.toBytes=function(e){return e?this.toBytesLE():this.toBytesBE()},x.toBytesLE=function(){var e=this.high,t=this.low;return[255&t,t>>>8&255,t>>>16&255,t>>>24,255&e,e>>>8&255,e>>>16&255,e>>>24]},x.toBytesBE=function(){var e=this.high,t=this.low;return[e>>>24,e>>>16&255,e>>>8&255,255&e,t>>>24,t>>>16&255,t>>>8&255,255&t]},t.fromBytes=function(e,n,r){return r?t.fromBytesLE(e,n):t.fromBytesBE(e,n)},t.fromBytesLE=function(e,n){return new t(e[0]|e[1]<<8|e[2]<<16|e[3]<<24,e[4]|e[5]<<8|e[6]<<16|e[7]<<24,n)},t.fromBytesBE=function(e,n){return new t(e[4]<<24|e[5]<<16|e[6]<<8|e[7],e[0]<<24|e[1]<<16|e[2]<<8|e[3],n)},long}var longExports=requireLong();function createBaseColor3(){return{r:0,g:0,b:0}}const Color3={encode:(e,t=minimalExports.Writer.create())=>(0!==e.r&&t.uint32(13).float(e.r),0!==e.g&&t.uint32(21).float(e.g),0!==e.b&&t.uint32(29).float(e.b),t),decode(e,t){const n=e instanceof minimalExports.Reader?e:new minimalExports.Reader(e);let r=void 0===t?n.len:n.pos+t;const i=createBaseColor3();for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:i.r=n.float();break;case 2:i.g=n.float();break;case 3:i.b=n.float();break;default:n.skipType(7&e)}}return i}};function createBasePBAvatarShape(){return{id:"",name:void 0,bodyShape:void 0,skinColor:void 0,hairColor:void 0,eyeColor:void 0,wearables:[],expressionTriggerId:void 0,expressionTriggerTimestamp:void 0,stickerTriggerId:void 0,stickerTriggerTimestamp:void 0,talking:void 0}}const PBAvatarShape={encode(e,t=minimalExports.Writer.create()){""!==e.id&&t.uint32(10).string(e.id),void 0!==e.name&&t.uint32(18).string(e.name),void 0!==e.bodyShape&&t.uint32(26).string(e.bodyShape),void 0!==e.skinColor&&Color3.encode(e.skinColor,t.uint32(34).fork()).ldelim(),void 0!==e.hairColor&&Color3.encode(e.hairColor,t.uint32(42).fork()).ldelim(),void 0!==e.eyeColor&&Color3.encode(e.eyeColor,t.uint32(50).fork()).ldelim();for(const n of e.wearables)t.uint32(58).string(n);return void 0!==e.expressionTriggerId&&t.uint32(66).string(e.expressionTriggerId),void 0!==e.expressionTriggerTimestamp&&t.uint32(72).int64(e.expressionTriggerTimestamp),void 0!==e.stickerTriggerId&&t.uint32(82).string(e.stickerTriggerId),void 0!==e.stickerTriggerTimestamp&&t.uint32(88).int64(e.stickerTriggerTimestamp),void 0!==e.talking&&t.uint32(96).bool(e.talking),t},decode(e,t){const n=e instanceof minimalExports.Reader?e:new minimalExports.Reader(e);let r=void 0===t?n.len:n.pos+t;const i=createBasePBAvatarShape();for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:i.id=n.string();break;case 2:i.name=n.string();break;case 3:i.bodyShape=n.string();break;case 4:i.skinColor=Color3.decode(n,n.uint32());break;case 5:i.hairColor=Color3.decode(n,n.uint32());break;case 6:i.eyeColor=Color3.decode(n,n.uint32());break;case 7:i.wearables.push(n.string());break;case 8:i.expressionTriggerId=n.string();break;case 9:i.expressionTriggerTimestamp=longToNumber(n.int64());break;case 10:i.stickerTriggerId=n.string();break;case 11:i.stickerTriggerTimestamp=longToNumber(n.int64());break;case 12:i.talking=n.bool();break;default:n.skipType(7&e)}}return i}};var globalThis$1=(()=>{if(void 0!==globalThis$1)return globalThis$1;if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if("undefined"!=typeof global)return global;throw"Unable to locate global object"})();function longToNumber(e){if(e.gt(Number.MAX_SAFE_INTEGER))throw new globalThis$1.Error("Value is larger than Number.MAX_SAFE_INTEGER");return e.toNumber()}minimalExports.util.Long!==longExports&&(minimalExports.util.Long=longExports,minimalExports.configure());const COMPONENT_ID$l=1080,AvatarShapeSchema={serialize(e,t){const n=PBAvatarShape.encode(e),r=new Uint8Array(n.finish(),0,n.len);t.writeBuffer(r,!1)},deserialize:e=>PBAvatarShape.decode(e.buffer(),e.remainingBytes()),create:()=>PBAvatarShape.decode(new Uint8Array)};function createBasePBBillboard(){return{x:void 0,y:void 0,z:void 0}}const PBBillboard={encode:(e,t=minimalExports.Writer.create())=>(void 0!==e.x&&t.uint32(8).bool(e.x),void 0!==e.y&&t.uint32(16).bool(e.y),void 0!==e.z&&t.uint32(24).bool(e.z),t),decode(e,t){const n=e instanceof minimalExports.Reader?e:new minimalExports.Reader(e);let r=void 0===t?n.len:n.pos+t;const i=createBasePBBillboard();for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:i.x=n.bool();break;case 2:i.y=n.bool();break;case 3:i.z=n.bool();break;default:n.skipType(7&e)}}return i}},COMPONENT_ID$k=1090,BillboardSchema={serialize(e,t){const n=PBBillboard.encode(e),r=new Uint8Array(n.finish(),0,n.len);t.writeBuffer(r,!1)},deserialize:e=>PBBillboard.decode(e.buffer(),e.remainingBytes()),create:()=>PBBillboard.decode(new Uint8Array)};function createBasePBBoxShape(){return{withCollisions:void 0,isPointerBlocker:void 0,visible:void 0,uvs:[]}}const PBBoxShape={encode(e,t=minimalExports.Writer.create()){void 0!==e.withCollisions&&t.uint32(8).bool(e.withCollisions),void 0!==e.isPointerBlocker&&t.uint32(16).bool(e.isPointerBlocker),void 0!==e.visible&&t.uint32(24).bool(e.visible),t.uint32(34).fork();for(const n of e.uvs)t.float(n);return t.ldelim(),t},decode(e,t){const n=e instanceof minimalExports.Reader?e:new minimalExports.Reader(e);let r=void 0===t?n.len:n.pos+t;const i=createBasePBBoxShape();for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:i.withCollisions=n.bool();break;case 2:i.isPointerBlocker=n.bool();break;case 3:i.visible=n.bool();break;case 4:if(2==(7&e)){const e=n.uint32()+n.pos;for(;n.pos<e;)i.uvs.push(n.float())}else i.uvs.push(n.float());break;default:n.skipType(7&e)}}return i}},COMPONENT_ID$j=1013,BoxShapeSchema={serialize(e,t){const n=PBBoxShape.encode(e),r=new Uint8Array(n.finish(),0,n.len);t.writeBuffer(r,!1)},deserialize:e=>PBBoxShape.decode(e.buffer(),e.remainingBytes()),create:()=>PBBoxShape.decode(new Uint8Array)};function createBasePBCameraMode(){return{mode:0}}const PBCameraMode={encode:(e,t=minimalExports.Writer.create())=>(0!==e.mode&&t.uint32(8).int32(e.mode),t),decode(e,t){const n=e instanceof minimalExports.Reader?e:new minimalExports.Reader(e);let r=void 0===t?n.len:n.pos+t;const i=createBasePBCameraMode();for(;n.pos<r;){const e=n.uint32();if(e>>>3==1)i.mode=n.int32();else n.skipType(7&e)}return i}},COMPONENT_ID$i=1072,CameraModeSchema={serialize(e,t){const n=PBCameraMode.encode(e),r=new Uint8Array(n.finish(),0,n.len);t.writeBuffer(r,!1)},deserialize:e=>PBCameraMode.decode(e.buffer(),e.remainingBytes()),create:()=>PBCameraMode.decode(new Uint8Array)};function createBasePBCameraModeArea(){return{area:void 0,mode:0}}const PBCameraModeArea={encode:(e,t=minimalExports.Writer.create())=>(void 0!==e.area&&Vector3.encode(e.area,t.uint32(10).fork()).ldelim(),0!==e.mode&&t.uint32(16).int32(e.mode),t),decode(e,t){const n=e instanceof minimalExports.Reader?e:new minimalExports.Reader(e);let r=void 0===t?n.len:n.pos+t;const i=createBasePBCameraModeArea();for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:i.area=Vector3.decode(n,n.uint32());break;case 2:i.mode=n.int32();break;default:n.skipType(7&e)}}return i}},COMPONENT_ID$h=1071,CameraModeAreaSchema={serialize(e,t){const n=PBCameraModeArea.encode(e),r=new Uint8Array(n.finish(),0,n.len);t.writeBuffer(r,!1)},deserialize:e=>PBCameraModeArea.decode(e.buffer(),e.remainingBytes()),create:()=>PBCameraModeArea.decode(new Uint8Array)};function createBasePBCylinderShape(){return{withCollisions:void 0,isPointerBlocker:void 0,visible:void 0,radiusTop:void 0,radiusBottom:void 0}}const PBCylinderShape={encode:(e,t=minimalExports.Writer.create())=>(void 0!==e.withCollisions&&t.uint32(8).bool(e.withCollisions),void 0!==e.isPointerBlocker&&t.uint32(16).bool(e.isPointerBlocker),void 0!==e.visible&&t.uint32(24).bool(e.visible),void 0!==e.radiusTop&&t.uint32(37).float(e.radiusTop),void 0!==e.radiusBottom&&t.uint32(45).float(e.radiusBottom),t),decode(e,t){const n=e instanceof minimalExports.Reader?e:new minimalExports.Reader(e);let r=void 0===t?n.len:n.pos+t;const i=createBasePBCylinderShape();for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:i.withCollisions=n.bool();break;case 2:i.isPointerBlocker=n.bool();break;case 3:i.visible=n.bool();break;case 4:i.radiusTop=n.float();break;case 5:i.radiusBottom=n.float();break;default:n.skipType(7&e)}}return i}},COMPONENT_ID$g=1016,CylinderShapeSchema={serialize(e,t){const n=PBCylinderShape.encode(e),r=new Uint8Array(n.finish(),0,n.len);t.writeBuffer(r,!1)},deserialize:e=>PBCylinderShape.decode(e.buffer(),e.remainingBytes()),create:()=>PBCylinderShape.decode(new Uint8Array)};function createBasePBGLTFShape(){return{withCollisions:void 0,isPointerBlocker:void 0,visible:void 0,src:""}}const PBGLTFShape={encode:(e,t=minimalExports.Writer.create())=>(void 0!==e.withCollisions&&t.uint32(8).bool(e.withCollisions),void 0!==e.isPointerBlocker&&t.uint32(16).bool(e.isPointerBlocker),void 0!==e.visible&&t.uint32(24).bool(e.visible),""!==e.src&&t.uint32(34).string(e.src),t),decode(e,t){const n=e instanceof minimalExports.Reader?e:new minimalExports.Reader(e);let r=void 0===t?n.len:n.pos+t;const i=createBasePBGLTFShape();for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:i.withCollisions=n.bool();break;case 2:i.isPointerBlocker=n.bool();break;case 3:i.visible=n.bool();break;case 4:i.src=n.string();break;default:n.skipType(7&e)}}return i}},COMPONENT_ID$f=1041,GLTFShapeSchema={serialize(e,t){const n=PBGLTFShape.encode(e),r=new Uint8Array(n.finish(),0,n.len);t.writeBuffer(r,!1)},deserialize:e=>PBGLTFShape.decode(e.buffer(),e.remainingBytes()),create:()=>PBGLTFShape.decode(new Uint8Array)};var TextureWrapMode,FilterMode,TransparencyMode;function createBasePBMaterial(){return{texture:void 0,alphaTest:void 0,castShadows:void 0,alphaTexture:void 0,emissiveTexture:void 0,bumpTexture:void 0,albedoColor:void 0,emissiveColor:void 0,reflectivityColor:void 0,transparencyMode:void 0,metallic:void 0,roughness:void 0,glossiness:void 0,specularIntensity:void 0,emissiveIntensity:void 0,directIntensity:void 0}}!function(e){e[e.Repeat=0]="Repeat",e[e.Clamp=1]="Clamp",e[e.Mirror=2]="Mirror",e[e.MirrorOnce=3]="MirrorOnce",e[e.UNRECOGNIZED=-1]="UNRECOGNIZED"}(TextureWrapMode||(TextureWrapMode={})),function(e){e[e.Point=0]="Point",e[e.Bilinear=1]="Bilinear",e[e.Trilinear=2]="Trilinear",e[e.UNRECOGNIZED=-1]="UNRECOGNIZED"}(FilterMode||(FilterMode={})),function(e){e[e.Opaque=0]="Opaque",e[e.AlphaTest=1]="AlphaTest",e[e.AlphaBlend=2]="AlphaBlend",e[e.AlphaTestAndAlphaBlend=3]="AlphaTestAndAlphaBlend",e[e.Auto=4]="Auto",e[e.UNRECOGNIZED=-1]="UNRECOGNIZED"}(TransparencyMode||(TransparencyMode={}));const PBMaterial={encode:(e,t=minimalExports.Writer.create())=>(void 0!==e.texture&&PBMaterial_Texture.encode(e.texture,t.uint32(10).fork()).ldelim(),void 0!==e.alphaTest&&t.uint32(21).float(e.alphaTest),void 0!==e.castShadows&&t.uint32(24).bool(e.castShadows),void 0!==e.alphaTexture&&PBMaterial_Texture.encode(e.alphaTexture,t.uint32(34).fork()).ldelim(),void 0!==e.emissiveTexture&&PBMaterial_Texture.encode(e.emissiveTexture,t.uint32(42).fork()).ldelim(),void 0!==e.bumpTexture&&PBMaterial_Texture.encode(e.bumpTexture,t.uint32(50).fork()).ldelim(),void 0!==e.albedoColor&&Color3.encode(e.albedoColor,t.uint32(58).fork()).ldelim(),void 0!==e.emissiveColor&&Color3.encode(e.emissiveColor,t.uint32(66).fork()).ldelim(),void 0!==e.reflectivityColor&&Color3.encode(e.reflectivityColor,t.uint32(74).fork()).ldelim(),void 0!==e.transparencyMode&&t.uint32(80).int32(e.transparencyMode),void 0!==e.metallic&&t.uint32(93).float(e.metallic),void 0!==e.roughness&&t.uint32(101).float(e.roughness),void 0!==e.glossiness&&t.uint32(109).float(e.glossiness),void 0!==e.specularIntensity&&t.uint32(117).float(e.specularIntensity),void 0!==e.emissiveIntensity&&t.uint32(125).float(e.emissiveIntensity),void 0!==e.directIntensity&&t.uint32(133).float(e.directIntensity),t),decode(e,t){const n=e instanceof minimalExports.Reader?e:new minimalExports.Reader(e);let r=void 0===t?n.len:n.pos+t;const i=createBasePBMaterial();for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:i.texture=PBMaterial_Texture.decode(n,n.uint32());break;case 2:i.alphaTest=n.float();break;case 3:i.castShadows=n.bool();break;case 4:i.alphaTexture=PBMaterial_Texture.decode(n,n.uint32());break;case 5:i.emissiveTexture=PBMaterial_Texture.decode(n,n.uint32());break;case 6:i.bumpTexture=PBMaterial_Texture.decode(n,n.uint32());break;case 7:i.albedoColor=Color3.decode(n,n.uint32());break;case 8:i.emissiveColor=Color3.decode(n,n.uint32());break;case 9:i.reflectivityColor=Color3.decode(n,n.uint32());break;case 10:i.transparencyMode=n.int32();break;case 11:i.metallic=n.float();break;case 12:i.roughness=n.float();break;case 13:i.glossiness=n.float();break;case 14:i.specularIntensity=n.float();break;case 15:i.emissiveIntensity=n.float();break;case 16:i.directIntensity=n.float();break;default:n.skipType(7&e)}}return i}};function createBasePBMaterial_Texture(){return{src:"",wrapMode:void 0,filterMode:void 0}}const PBMaterial_Texture={encode:(e,t=minimalExports.Writer.create())=>(""!==e.src&&t.uint32(10).string(e.src),void 0!==e.wrapMode&&t.uint32(16).int32(e.wrapMode),void 0!==e.filterMode&&t.uint32(24).int32(e.filterMode),t),decode(e,t){const n=e instanceof minimalExports.Reader?e:new minimalExports.Reader(e);let r=void 0===t?n.len:n.pos+t;const i=createBasePBMaterial_Texture();for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:i.src=n.string();break;case 2:i.wrapMode=n.int32();break;case 3:i.filterMode=n.int32();break;default:n.skipType(7&e)}}return i}},COMPONENT_ID$e=1017,MaterialSchema={serialize(e,t){const n=PBMaterial.encode(e),r=new Uint8Array(n.finish(),0,n.len);t.writeBuffer(r,!1)},deserialize:e=>PBMaterial.decode(e.buffer(),e.remainingBytes()),create:()=>PBMaterial.decode(new Uint8Array)};function createBasePBMeshRenderer(){return{box:void 0,sphere:void 0,cylinder:void 0,plane:void 0}}const PBMeshRenderer={encode:(e,t=minimalExports.Writer.create())=>(void 0!==e.box&&PBMeshRenderer_BoxMesh.encode(e.box,t.uint32(10).fork()).ldelim(),void 0!==e.sphere&&PBMeshRenderer_SphereMesh.encode(e.sphere,t.uint32(18).fork()).ldelim(),void 0!==e.cylinder&&PBMeshRenderer_CylinderMesh.encode(e.cylinder,t.uint32(26).fork()).ldelim(),void 0!==e.plane&&PBMeshRenderer_PlaneMesh.encode(e.plane,t.uint32(34).fork()).ldelim(),t),decode(e,t){const n=e instanceof minimalExports.Reader?e:new minimalExports.Reader(e);let r=void 0===t?n.len:n.pos+t;const i=createBasePBMeshRenderer();for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:i.box=PBMeshRenderer_BoxMesh.decode(n,n.uint32());break;case 2:i.sphere=PBMeshRenderer_SphereMesh.decode(n,n.uint32());break;case 3:i.cylinder=PBMeshRenderer_CylinderMesh.decode(n,n.uint32());break;case 4:i.plane=PBMeshRenderer_PlaneMesh.decode(n,n.uint32());break;default:n.skipType(7&e)}}return i}};function createBasePBMeshRenderer_BoxMesh(){return{uvs:[]}}const PBMeshRenderer_BoxMesh={encode(e,t=minimalExports.Writer.create()){t.uint32(10).fork();for(const n of e.uvs)t.float(n);return t.ldelim(),t},decode(e,t){const n=e instanceof minimalExports.Reader?e:new minimalExports.Reader(e);let r=void 0===t?n.len:n.pos+t;const i=createBasePBMeshRenderer_BoxMesh();for(;n.pos<r;){const e=n.uint32();if(e>>>3==1)if(2==(7&e)){const e=n.uint32()+n.pos;for(;n.pos<e;)i.uvs.push(n.float())}else i.uvs.push(n.float());else n.skipType(7&e)}return i}};function createBasePBMeshRenderer_CylinderMesh(){return{radiusTop:void 0,radiusBottom:void 0}}const PBMeshRenderer_CylinderMesh={encode:(e,t=minimalExports.Writer.create())=>(void 0!==e.radiusTop&&t.uint32(13).float(e.radiusTop),void 0!==e.radiusBottom&&t.uint32(21).float(e.radiusBottom),t),decode(e,t){const n=e instanceof minimalExports.Reader?e:new minimalExports.Reader(e);let r=void 0===t?n.len:n.pos+t;const i=createBasePBMeshRenderer_CylinderMesh();for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:i.radiusTop=n.float();break;case 2:i.radiusBottom=n.float();break;default:n.skipType(7&e)}}return i}};function createBasePBMeshRenderer_PlaneMesh(){return{uvs:[]}}const PBMeshRenderer_PlaneMesh={encode(e,t=minimalExports.Writer.create()){t.uint32(10).fork();for(const n of e.uvs)t.float(n);return t.ldelim(),t},decode(e,t){const n=e instanceof minimalExports.Reader?e:new minimalExports.Reader(e);let r=void 0===t?n.len:n.pos+t;const i=createBasePBMeshRenderer_PlaneMesh();for(;n.pos<r;){const e=n.uint32();if(e>>>3==1)if(2==(7&e)){const e=n.uint32()+n.pos;for(;n.pos<e;)i.uvs.push(n.float())}else i.uvs.push(n.float());else n.skipType(7&e)}return i}};function createBasePBMeshRenderer_SphereMesh(){return{}}const PBMeshRenderer_SphereMesh={encode:(e,t=minimalExports.Writer.create())=>t,decode(e,t){const n=e instanceof minimalExports.Reader?e:new minimalExports.Reader(e);let r=void 0===t?n.len:n.pos+t;const i=createBasePBMeshRenderer_SphereMesh();for(;n.pos<r;){const e=n.uint32();n.skipType(7&e)}return i}},COMPONENT_ID$d=1018,MeshRendererSchema={serialize(e,t){const n=PBMeshRenderer.encode(e),r=new Uint8Array(n.finish(),0,n.len);t.writeBuffer(r,!1)},deserialize:e=>PBMeshRenderer.decode(e.buffer(),e.remainingBytes()),create:()=>PBMeshRenderer.decode(new Uint8Array)};function createBasePBNFTShape(){return{withCollisions:void 0,isPointerBlocker:void 0,visible:void 0,src:"",assetId:void 0,style:void 0,color:void 0}}const PBNFTShape={encode:(e,t=minimalExports.Writer.create())=>(void 0!==e.withCollisions&&t.uint32(8).bool(e.withCollisions),void 0!==e.isPointerBlocker&&t.uint32(16).bool(e.isPointerBlocker),void 0!==e.visible&&t.uint32(24).bool(e.visible),""!==e.src&&t.uint32(34).string(e.src),void 0!==e.assetId&&t.uint32(42).string(e.assetId),void 0!==e.style&&t.uint32(48).int32(e.style),void 0!==e.color&&Color3.encode(e.color,t.uint32(58).fork()).ldelim(),t),decode(e,t){const n=e instanceof minimalExports.Reader?e:new minimalExports.Reader(e);let r=void 0===t?n.len:n.pos+t;const i=createBasePBNFTShape();for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:i.withCollisions=n.bool();break;case 2:i.isPointerBlocker=n.bool();break;case 3:i.visible=n.bool();break;case 4:i.src=n.string();break;case 5:i.assetId=n.string();break;case 6:i.style=n.int32();break;case 7:i.color=Color3.decode(n,n.uint32());break;default:n.skipType(7&e)}}return i}},COMPONENT_ID$c=1040,NFTShapeSchema={serialize(e,t){const n=PBNFTShape.encode(e),r=new Uint8Array(n.finish(),0,n.len);t.writeBuffer(r,!1)},deserialize:e=>PBNFTShape.decode(e.buffer(),e.remainingBytes()),create:()=>PBNFTShape.decode(new Uint8Array)};function createBasePBOnPointerDown(){return{button:void 0,hoverText:void 0,maxDistance:void 0,showFeedback:void 0}}const PBOnPointerDown={encode:(e,t=minimalExports.Writer.create())=>(void 0!==e.button&&t.uint32(8).int32(e.button),void 0!==e.hoverText&&t.uint32(18).string(e.hoverText),void 0!==e.maxDistance&&t.uint32(29).float(e.maxDistance),void 0!==e.showFeedback&&t.uint32(32).bool(e.showFeedback),t),decode(e,t){const n=e instanceof minimalExports.Reader?e:new minimalExports.Reader(e);let r=void 0===t?n.len:n.pos+t;const i=createBasePBOnPointerDown();for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:i.button=n.int32();break;case 2:i.hoverText=n.string();break;case 3:i.maxDistance=n.float();break;case 4:i.showFeedback=n.bool();break;default:n.skipType(7&e)}}return i}},COMPONENT_ID$b=1060,OnPointerDownSchema={serialize(e,t){const n=PBOnPointerDown.encode(e),r=new Uint8Array(n.finish(),0,n.len);t.writeBuffer(r,!1)},deserialize:e=>PBOnPointerDown.decode(e.buffer(),e.remainingBytes()),create:()=>PBOnPointerDown.decode(new Uint8Array)};function createBasePBOnPointerDownResult(){return{button:0,meshName:"",origin:void 0,direction:void 0,point:void 0,normal:void 0,distance:0,timestamp:0}}const PBOnPointerDownResult={encode:(e,t=minimalExports.Writer.create())=>(0!==e.button&&t.uint32(16).int32(e.button),""!==e.meshName&&t.uint32(26).string(e.meshName),void 0!==e.origin&&Vector3.encode(e.origin,t.uint32(34).fork()).ldelim(),void 0!==e.direction&&Vector3.encode(e.direction,t.uint32(42).fork()).ldelim(),void 0!==e.point&&Vector3.encode(e.point,t.uint32(50).fork()).ldelim(),void 0!==e.normal&&Vector3.encode(e.normal,t.uint32(58).fork()).ldelim(),0!==e.distance&&t.uint32(69).float(e.distance),0!==e.timestamp&&t.uint32(72).int32(e.timestamp),t),decode(e,t){const n=e instanceof minimalExports.Reader?e:new minimalExports.Reader(e);let r=void 0===t?n.len:n.pos+t;const i=createBasePBOnPointerDownResult();for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 2:i.button=n.int32();break;case 3:i.meshName=n.string();break;case 4:i.origin=Vector3.decode(n,n.uint32());break;case 5:i.direction=Vector3.decode(n,n.uint32());break;case 6:i.point=Vector3.decode(n,n.uint32());break;case 7:i.normal=Vector3.decode(n,n.uint32());break;case 8:i.distance=n.float();break;case 9:i.timestamp=n.int32();break;default:n.skipType(7&e)}}return i}},COMPONENT_ID$a=1066,OnPointerDownResultSchema={serialize(e,t){const n=PBOnPointerDownResult.encode(e),r=new Uint8Array(n.finish(),0,n.len);t.writeBuffer(r,!1)},deserialize:e=>PBOnPointerDownResult.decode(e.buffer(),e.remainingBytes()),create:()=>PBOnPointerDownResult.decode(new Uint8Array)};function createBasePBOnPointerUp(){return{button:void 0,hoverText:void 0,maxDistance:void 0,showFeedback:void 0}}const PBOnPointerUp={encode:(e,t=minimalExports.Writer.create())=>(void 0!==e.button&&t.uint32(8).int32(e.button),void 0!==e.hoverText&&t.uint32(18).string(e.hoverText),void 0!==e.maxDistance&&t.uint32(29).float(e.maxDistance),void 0!==e.showFeedback&&t.uint32(32).bool(e.showFeedback),t),decode(e,t){const n=e instanceof minimalExports.Reader?e:new minimalExports.Reader(e);let r=void 0===t?n.len:n.pos+t;const i=createBasePBOnPointerUp();for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:i.button=n.int32();break;case 2:i.hoverText=n.string();break;case 3:i.maxDistance=n.float();break;case 4:i.showFeedback=n.bool();break;default:n.skipType(7&e)}}return i}},COMPONENT_ID$9=1061,OnPointerUpSchema={serialize(e,t){const n=PBOnPointerUp.encode(e),r=new Uint8Array(n.finish(),0,n.len);t.writeBuffer(r,!1)},deserialize:e=>PBOnPointerUp.decode(e.buffer(),e.remainingBytes()),create:()=>PBOnPointerUp.decode(new Uint8Array)};function createBasePBOnPointerUpResult(){return{button:0,meshName:"",origin:void 0,direction:void 0,point:void 0,normal:void 0,distance:0,timestamp:0}}const PBOnPointerUpResult={encode:(e,t=minimalExports.Writer.create())=>(0!==e.button&&t.uint32(16).int32(e.button),""!==e.meshName&&t.uint32(26).string(e.meshName),void 0!==e.origin&&Vector3.encode(e.origin,t.uint32(34).fork()).ldelim(),void 0!==e.direction&&Vector3.encode(e.direction,t.uint32(42).fork()).ldelim(),void 0!==e.point&&Vector3.encode(e.point,t.uint32(50).fork()).ldelim(),void 0!==e.normal&&Vector3.encode(e.normal,t.uint32(58).fork()).ldelim(),0!==e.distance&&t.uint32(69).float(e.distance),0!==e.timestamp&&t.uint32(72).int32(e.timestamp),t),decode(e,t){const n=e instanceof minimalExports.Reader?e:new minimalExports.Reader(e);let r=void 0===t?n.len:n.pos+t;const i=createBasePBOnPointerUpResult();for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 2:i.button=n.int32();break;case 3:i.meshName=n.string();break;case 4:i.origin=Vector3.decode(n,n.uint32());break;case 5:i.direction=Vector3.decode(n,n.uint32());break;case 6:i.point=Vector3.decode(n,n.uint32());break;case 7:i.normal=Vector3.decode(n,n.uint32());break;case 8:i.distance=n.float();break;case 9:i.timestamp=n.int32();break;default:n.skipType(7&e)}}return i}},COMPONENT_ID$8=1065,OnPointerUpResultSchema={serialize(e,t){const n=PBOnPointerUpResult.encode(e),r=new Uint8Array(n.finish(),0,n.len);t.writeBuffer(r,!1)},deserialize:e=>PBOnPointerUpResult.decode(e.buffer(),e.remainingBytes()),create:()=>PBOnPointerUpResult.decode(new Uint8Array)};function createBasePBPlaneShape(){return{withCollisions:void 0,isPointerBlocker:void 0,visible:void 0,uvs:[]}}const PBPlaneShape={encode(e,t=minimalExports.Writer.create()){void 0!==e.withCollisions&&t.uint32(8).bool(e.withCollisions),void 0!==e.isPointerBlocker&&t.uint32(16).bool(e.isPointerBlocker),void 0!==e.visible&&t.uint32(24).bool(e.visible),t.uint32(34).fork();for(const n of e.uvs)t.float(n);return t.ldelim(),t},decode(e,t){const n=e instanceof minimalExports.Reader?e:new minimalExports.Reader(e);let r=void 0===t?n.len:n.pos+t;const i=createBasePBPlaneShape();for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:i.withCollisions=n.bool();break;case 2:i.isPointerBlocker=n.bool();break;case 3:i.visible=n.bool();break;case 4:if(2==(7&e)){const e=n.uint32()+n.pos;for(;n.pos<e;)i.uvs.push(n.float())}else i.uvs.push(n.float());break;default:n.skipType(7&e)}}return i}},COMPONENT_ID$7=1014,PlaneShapeSchema={serialize(e,t){const n=PBPlaneShape.encode(e),r=new Uint8Array(n.finish(),0,n.len);t.writeBuffer(r,!1)},deserialize:e=>PBPlaneShape.decode(e.buffer(),e.remainingBytes()),create:()=>PBPlaneShape.decode(new Uint8Array)};function createBasePBPointerLock(){return{isPointerLocked:!1}}const PBPointerLock={encode:(e,t=minimalExports.Writer.create())=>(!0===e.isPointerLocked&&t.uint32(8).bool(e.isPointerLocked),t),decode(e,t){const n=e instanceof minimalExports.Reader?e:new minimalExports.Reader(e);let r=void 0===t?n.len:n.pos+t;const i=createBasePBPointerLock();for(;n.pos<r;){const e=n.uint32();if(e>>>3==1)i.isPointerLocked=n.bool();else n.skipType(7&e)}return i}},COMPONENT_ID$6=1074,PointerLockSchema={serialize(e,t){const n=PBPointerLock.encode(e),r=new Uint8Array(n.finish(),0,n.len);t.writeBuffer(r,!1)},deserialize:e=>PBPointerLock.decode(e.buffer(),e.remainingBytes()),create:()=>PBPointerLock.decode(new Uint8Array)};function createBasePBSphereShape(){return{withCollisions:void 0,isPointerBlocker:void 0,visible:void 0}}const PBSphereShape={encode:(e,t=minimalExports.Writer.create())=>(void 0!==e.withCollisions&&t.uint32(8).bool(e.withCollisions),void 0!==e.isPointerBlocker&&t.uint32(16).bool(e.isPointerBlocker),void 0!==e.visible&&t.uint32(24).bool(e.visible),t),decode(e,t){const n=e instanceof minimalExports.Reader?e:new minimalExports.Reader(e);let r=void 0===t?n.len:n.pos+t;const i=createBasePBSphereShape();for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:i.withCollisions=n.bool();break;case 2:i.isPointerBlocker=n.bool();break;case 3:i.visible=n.bool();break;default:n.skipType(7&e)}}return i}},COMPONENT_ID$5=1015,SphereShapeSchema={serialize(e,t){const n=PBSphereShape.encode(e),r=new Uint8Array(n.finish(),0,n.len);t.writeBuffer(r,!1)},deserialize:e=>PBSphereShape.decode(e.buffer(),e.remainingBytes()),create:()=>PBSphereShape.decode(new Uint8Array)};function createBasePBTextShape(){return{text:"",visible:void 0,font:void 0,opacity:void 0,fontSize:void 0,fontAutoSize:void 0,hTextAlign:void 0,vTextAlign:void 0,width:void 0,height:void 0,paddingTop:void 0,paddingRight:void 0,paddingBottom:void 0,paddingLeft:void 0,lineSpacing:void 0,lineCount:void 0,textWrapping:void 0,shadowBlur:void 0,shadowOffsetX:void 0,shadowOffsetY:void 0,outlineWidth:void 0,shadowColor:void 0,outlineColor:void 0,textColor:void 0}}const PBTextShape={encode:(e,t=minimalExports.Writer.create())=>(""!==e.text&&t.uint32(10).string(e.text),void 0!==e.visible&&t.uint32(16).bool(e.visible),void 0!==e.font&&t.uint32(26).string(e.font),void 0!==e.opacity&&t.uint32(37).float(e.opacity),void 0!==e.fontSize&&t.uint32(45).float(e.fontSize),void 0!==e.fontAutoSize&&t.uint32(48).bool(e.fontAutoSize),void 0!==e.hTextAlign&&t.uint32(58).string(e.hTextAlign),void 0!==e.vTextAlign&&t.uint32(66).string(e.vTextAlign),void 0!==e.width&&t.uint32(77).float(e.width),void 0!==e.height&&t.uint32(85).float(e.height),void 0!==e.paddingTop&&t.uint32(93).float(e.paddingTop),void 0!==e.paddingRight&&t.uint32(101).float(e.paddingRight),void 0!==e.paddingBottom&&t.uint32(109).float(e.paddingBottom),void 0!==e.paddingLeft&&t.uint32(117).float(e.paddingLeft),void 0!==e.lineSpacing&&t.uint32(125).float(e.lineSpacing),void 0!==e.lineCount&&t.uint32(128).int32(e.lineCount),void 0!==e.textWrapping&&t.uint32(136).bool(e.textWrapping),void 0!==e.shadowBlur&&t.uint32(149).float(e.shadowBlur),void 0!==e.shadowOffsetX&&t.uint32(157).float(e.shadowOffsetX),void 0!==e.shadowOffsetY&&t.uint32(165).float(e.shadowOffsetY),void 0!==e.outlineWidth&&t.uint32(173).float(e.outlineWidth),void 0!==e.shadowColor&&Color3.encode(e.shadowColor,t.uint32(178).fork()).ldelim(),void 0!==e.outlineColor&&Color3.encode(e.outlineColor,t.uint32(186).fork()).ldelim(),void 0!==e.textColor&&Color3.encode(e.textColor,t.uint32(194).fork()).ldelim(),t),decode(e,t){const n=e instanceof minimalExports.Reader?e:new minimalExports.Reader(e);let r=void 0===t?n.len:n.pos+t;const i=createBasePBTextShape();for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:i.text=n.string();break;case 2:i.visible=n.bool();break;case 3:i.font=n.string();break;case 4:i.opacity=n.float();break;case 5:i.fontSize=n.float();break;case 6:i.fontAutoSize=n.bool();break;case 7:i.hTextAlign=n.string();break;case 8:i.vTextAlign=n.string();break;case 9:i.width=n.float();break;case 10:i.height=n.float();break;case 11:i.paddingTop=n.float();break;case 12:i.paddingRight=n.float();break;case 13:i.paddingBottom=n.float();break;case 14:i.paddingLeft=n.float();break;case 15:i.lineSpacing=n.float();break;case 16:i.lineCount=n.int32();break;case 17:i.textWrapping=n.bool();break;case 18:i.shadowBlur=n.float();break;case 19:i.shadowOffsetX=n.float();break;case 20:i.shadowOffsetY=n.float();break;case 21:i.outlineWidth=n.float();break;case 22:i.shadowColor=Color3.decode(n,n.uint32());break;case 23:i.outlineColor=Color3.decode(n,n.uint32());break;case 24:i.textColor=Color3.decode(n,n.uint32());break;default:n.skipType(7&e)}}return i}},COMPONENT_ID$4=1030,TextShapeSchema={serialize(e,t){const n=PBTextShape.encode(e),r=new Uint8Array(n.finish(),0,n.len);t.writeBuffer(r,!1)},deserialize:e=>PBTextShape.decode(e.buffer(),e.remainingBytes()),create:()=>PBTextShape.decode(new Uint8Array)};function createBasePBUiText(){return{text:"",textColor:void 0}}const PBUiText={encode:(e,t=minimalExports.Writer.create())=>(""!==e.text&&t.uint32(10).string(e.text),void 0!==e.textColor&&Color3.encode(e.textColor,t.uint32(18).fork()).ldelim(),t),decode(e,t){const n=e instanceof minimalExports.Reader?e:new minimalExports.Reader(e);let r=void 0===t?n.len:n.pos+t;const i=createBasePBUiText();for(;n.pos<r;){const e=n.uint32();switch(e>>>3){case 1:i.text=n.string();break;case 2:i.textColor=Color3.decode(n,n.uint32());break;default:n.skipType(7&e)}}return i}},COMPONENT_ID$3=1052,UiTextSchema={serialize(e,t){const n=PBUiText.encode(e),r=new Uint8Array(n.finish(),0,n.len);t.writeBuffer(r,!1)},deserialize:e=>PBUiText.decode(e.buffer(),e.remainingBytes()),create:()=>PBUiText.decode(new Uint8Array)};function createBasePBVisibilityComponent(){return{visible:void 0}}const PBVisibilityComponent={encode:(e,t=minimalExports.Writer.create())=>(void 0!==e.visible&&t.uint32(8).bool(e.visible),t),decode(e,t){const n=e instanceof minimalExports.Reader?e:new minimalExports.Reader(e);let r=void 0===t?n.len:n.pos+t;const i=createBasePBVisibilityComponent();for(;n.pos<r;){const e=n.uint32();if(e>>>3==1)i.visible=n.bool();else n.skipType(7&e)}return i}},COMPONENT_ID$2=1081,VisibilityComponentSchema={serialize(e,t){const n=PBVisibilityComponent.encode(e),r=new Uint8Array(n.finish(),0,n.len);t.writeBuffer(r,!1)},deserialize:e=>PBVisibilityComponent.decode(e.buffer(),e.remainingBytes()),create:()=>PBVisibilityComponent.decode(new Uint8Array)};function defineLibraryComponents({defineComponentFromSchema:e}){return{Animator:e(AnimatorSchema,COMPONENT_ID$p),AudioSource:e(AudioSourceSchema,COMPONENT_ID$o),AvatarAttach:e(AvatarAttachSchema,COMPONENT_ID$n),AvatarModifierArea:e(AvatarModifierAreaSchema,COMPONENT_ID$m),AvatarShape:e(AvatarShapeSchema,COMPONENT_ID$l),Billboard:e(BillboardSchema,COMPONENT_ID$k),BoxShape:e(BoxShapeSchema,COMPONENT_ID$j),CameraMode:e(CameraModeSchema,COMPONENT_ID$i),CameraModeArea:e(CameraModeAreaSchema,COMPONENT_ID$h),CylinderShape:e(CylinderShapeSchema,COMPONENT_ID$g),GLTFShape:e(GLTFShapeSchema,COMPONENT_ID$f),Material:e(MaterialSchema,COMPONENT_ID$e),MeshRenderer:e(MeshRendererSchema,COMPONENT_ID$d),NFTShape:e(NFTShapeSchema,COMPONENT_ID$c),OnPointerDown:e(OnPointerDownSchema,COMPONENT_ID$b),OnPointerDownResult:e(OnPointerDownResultSchema,COMPONENT_ID$a),OnPointerUp:e(OnPointerUpSchema,COMPONENT_ID$9),OnPointerUpResult:e(OnPointerUpResultSchema,COMPONENT_ID$8),PlaneShape:e(PlaneShapeSchema,COMPONENT_ID$7),PointerLock:e(PointerLockSchema,COMPONENT_ID$6),SphereShape:e(SphereShapeSchema,COMPONENT_ID$5),TextShape:e(TextShapeSchema,COMPONENT_ID$4),UiText:e(UiTextSchema,COMPONENT_ID$3),VisibilityComponent:e(VisibilityComponentSchema,COMPONENT_ID$2)}}const COMPONENT_ID$1=1,TRANSFORM_LENGTH=44,TransformSchema={serialize(e,t){const n=t.incrementWriteOffset(TRANSFORM_LENGTH);t.setFloat32(n,e.position.x),t.setFloat32(n+4,e.position.y),t.setFloat32(n+8,e.position.z),t.setFloat32(n+12,e.rotation.x),t.setFloat32(n+16,e.rotation.y),t.setFloat32(n+20,e.rotation.z),t.setFloat32(n+24,e.rotation.w),t.setFloat32(n+28,e.scale.x),t.setFloat32(n+32,e.scale.y),t.setFloat32(n+36,e.scale.z),t.setUint32(n+40,e.parent||0)},deserialize(e){const t=e.incrementReadOffset(TRANSFORM_LENGTH);return{position:{x:e.getFloat32(t),y:e.getFloat32(t+4),z:e.getFloat32(t+8)},rotation:{x:e.getFloat32(t+12),y:e.getFloat32(t+16),z:e.getFloat32(t+20),w:e.getFloat32(t+24)},scale:{x:e.getFloat32(t+28),y:e.getFloat32(t+32),z:e.getFloat32(t+36)},parent:e.getUint32(t+40)}},create:()=>({position:{x:0,y:0,z:0},scale:{x:1,y:1,z:1},rotation:{x:0,y:0,z:0,w:1}})};function defineTransformComponent({defineComponentFromSchema:e}){return e(TransformSchema,COMPONENT_ID$1)}var COMPONENT_ID;function defineSdkComponents(e){const t=defineLibraryComponents(e);return e.removeComponentDefinition(t.MeshRenderer._id),{...t,Transform:defineTransformComponent(e),MeshRenderer:e.defineComponentFromSchema(MeshRendererSchema,COMPONENT_ID$d)}}function IArray(e){return{serialize(t,n){n.writeUint32(t.length);for(const r of t)e.serialize(r,n)},deserialize(t){const n=[],r=t.readUint32();for(let i=0;i<r;i++)n.push(e.deserialize(t));return n},create:()=>[]}}!function(e){e[e.SYNC=1e3]="SYNC"}(COMPONENT_ID||(COMPONENT_ID={}));const Bool={serialize(e,t){t.writeInt8(e?1:0)},deserialize:e=>1===e.readInt8(),create:()=>!1};function IEnum(e){return{serialize(t,n){e.serialize(t,n)},deserialize:t=>e.deserialize(t),create:()=>e.create()}}const Float32={serialize(e,t){t.writeFloat32(e)},deserialize:e=>e.readFloat32(),create:()=>0},Float64={serialize(e,t){t.writeFloat64(e)},deserialize:e=>e.readFloat64(),create:()=>0},Int64={serialize(e,t){t.writeInt64(BigInt(e))},deserialize:e=>Number(e.readInt64()),create:()=>0},Int32={serialize(e,t){t.writeInt32(e)},deserialize:e=>e.readInt32(),create:()=>0},Int16={serialize(e,t){t.writeInt16(e)},deserialize:e=>e.readInt16(),create:()=>0},Int8={serialize(e,t){t.writeInt8(e)},deserialize:e=>e.readInt8(),create:()=>0},FlatString={serialize(e,t){t.writeBuffer((new TextEncoder).encode(e))},deserialize:e=>(new TextDecoder).decode(e.readBuffer()),create:()=>""},EcsString=FlatString;function IMap(e){return{serialize(t,n){for(const r in e)e[r].serialize(t[r],n)},deserialize(t){const n={};for(const r in e)n[r]=e[r].deserialize(t);return n},create(){const t={};for(const n in e)t[n]=e[n].create();return t}}}function IOptional(e){return{serialize(t,n){t?(n.writeInt8(1),e.serialize(t,n)):n.writeInt8(0)},deserialize(t){if(t.readInt8())return e.deserialize(t)},create(){}}}var Schemas;exports.Schemas=void 0,Schemas=exports.Schemas||(exports.Schemas={}),Schemas.Boolean=Bool,Schemas.String=EcsString,Schemas.Float=Float32,Schemas.Double=Float64,Schemas.Byte=Int8,Schemas.Short=Int16,Schemas.Int=Int32,Schemas.Int64=Int64,Schemas.Number=Float32,Schemas.Enum=IEnum,Schemas.Array=IArray,Schemas.Map=IMap,Schemas.Optional=IOptional;var dist={},types={},hasRequiredTypes,hasRequiredDist;function requireTypes(){return hasRequiredTypes||(hasRequiredTypes=1,Object.defineProperty(types,"__esModule",{value:!0})),types}function requireDist(){return hasRequiredDist||(hasRequiredDist=1,function(e){var t=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),n=commonjsGlobal&&commonjsGlobal.__exportStar||function(e,n){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(n,r)||t(n,e,r)};function r(e,t){if(e===t)return!0;if(e instanceof Uint8Array&&t instanceof Uint8Array){if(e.byteLength!==t.byteLength)return!1;for(let n=0;n<e.byteLength;n++)if(e[n]!==t[n])return!1;return!0}return!!(globalThis.Buffer&&e instanceof Buffer&&t instanceof Buffer)&&e.equals(t)}Object.defineProperty(e,"__esModule",{value:!0}),e.crdtProtocol=e.stateIterator=e.sameData=void 0,n(requireTypes(),e),e.sameData=r,e.stateIterator=function*(e){for(const[t,n]of e.entries())for(const[e,r]of n.entries())yield[t,e,r]},e.crdtProtocol=function(){const e=new Map;function t(t,n,r,i){const o=e.get(t),a=Math.max(i,o?.get(n)?.timestamp||0);if(o)o.set(n,{timestamp:a,data:r});else{const i=new Map;i.set(n,{timestamp:a,data:r}),e.set(t,i)}return{timestamp:a,data:r}}return{createEvent:function(n,r,i){const o=(e.get(n)?.get(r)?.timestamp||0)+1;return t(n,r,i,o),{key1:n,key2:r,data:i,timestamp:o}},processMessage:function(n){const{key1:i,key2:o,data:a,timestamp:s}=n,u=e.get(i)?.get(o);return!u||u.timestamp<s?(t(i,o,a,s),n):u.timestamp>s?{key1:i,key2:o,data:u.data,timestamp:u.timestamp}:r(u.data,a)?n:function(e,t){return e>t}(u.data,a)?{key1:i,key2:o,data:u.data,timestamp:u.timestamp}:(t(i,o,a,s).data,n)},getState:function(){return e}}}}(dist)),dist}var distExports=requireDist();function getNextSize(e,t){const n=Math.max(e,t)+1024;return 1024*Math.ceil(n/1024)}const defaultInitialCapacity=10240;function createByteBuffer(e={}){const t=e.reading?.currentOffset||0;let n=null,r=0;e.writing?(n=e.writing.buffer,e.writing.currentOffset&&(r=e.writing.currentOffset)):e.reading?(n=e.reading.buffer,r=e.reading.length||e.reading.buffer.length):n=new Uint8Array(e.initialCapacity||defaultInitialCapacity);let i=n,o=new DataView(i.buffer,i.byteOffset),a=r,s=t;const u=e=>{if(a+e>i.byteLength){const t=getNextSize(i.byteLength,a+e),n=new Uint8Array(t);n.set(i),i=n,o=new DataView(i.buffer)}return a+=e,a-e},c=e=>{if(s+e>a)throw new Error("Outside of the bounds of writen data.");return s+=e,s-e};return{buffer:()=>i,bufferLength:()=>i.length,resetBuffer(){s=0,a=0},currentReadOffset:()=>s,currentWriteOffset:()=>a,incrementReadOffset:e=>c(e),remainingBytes:()=>a-s,readFloat32:()=>o.getFloat32(c(4)),readFloat64:()=>o.getFloat64(c(8)),readInt8:()=>o.getInt8(c(1)),readInt16:()=>o.getInt16(c(2)),readInt32:()=>o.getInt32(c(4)),readInt64:()=>o.getBigInt64(c(8)),readUint8:()=>o.getUint8(c(1)),readUint16:()=>o.getUint16(c(2)),readUint32:()=>o.getUint32(c(4)),readUint64:()=>o.getBigUint64(c(8)),readBuffer(){const e=o.getUint32(c(4));return i.subarray(c(e),c(0))},incrementWriteOffset:e=>u(e),size:()=>a,toBinary:()=>i.subarray(0,a),toCopiedBinary(){return new Uint8Array(this.toBinary())},writeBuffer(e,t=!0){t&&this.writeUint32(e.byteLength);const n=u(e.byteLength);i.set(e,n)},writeFloat32(e){const t=u(4);o.setFloat32(t,e)},writeFloat64(e){const t=u(8);o.setFloat64(t,e)},writeInt8(e){const t=u(1);o.setInt8(t,e)},writeInt16(e){const t=u(2);o.setInt16(t,e)},writeInt32(e){const t=u(4);o.setInt32(t,e)},writeInt64(e){const t=u(8);o.setBigInt64(t,e)},writeUint8(e){const t=u(1);o.setUint8(t,e)},writeUint16(e){const t=u(2);o.setUint16(t,e)},writeUint32(e){const t=u(4);o.setUint32(t,e)},writeUint64(e){const t=u(8);o.setBigUint64(t,e)},getFloat32:e=>o.getFloat32(e),getFloat64:e=>o.getFloat64(e),getInt8:e=>o.getInt8(e),getInt16:e=>o.getInt16(e),getInt32:e=>o.getInt32(e),getInt64:e=>o.getBigInt64(e),getUint8:e=>o.getUint8(e),getUint16:e=>o.getUint16(e),getUint32:e=>o.getUint32(e),getUint64:e=>o.getBigUint64(e),setFloat32(e,t){o.setFloat32(e,t)},setFloat64(e,t){o.setFloat64(e,t)},setInt8(e,t){o.setInt8(e,t)},setInt16(e,t){o.setInt16(e,t)},setInt32(e,t){o.setInt32(e,t)},setInt64(e,t){o.setBigInt64(e,t)},setUint8(e,t){o.setUint8(e,t)},setUint16(e,t){o.setUint16(e,t)},setUint32(e,t){o.setUint32(e,t)},setUint64(e,t){o.setBigUint64(e,t)}}}var WireMessage;!function(e){var t;function n(t){const n=t.remainingBytes();if(n<e.HEADER_LENGTH)return!1;return!(n<t.getUint32(t.currentReadOffset()))}(t=e.Enum||(e.Enum={}))[t.RESERVED=0]="RESERVED",t[t.PUT_COMPONENT=1]="PUT_COMPONENT",t[t.DELETE_COMPONENT=2]="DELETE_COMPONENT",t[t.MAX_MESSAGE_TYPE=3]="MAX_MESSAGE_TYPE",e.HEADER_LENGTH=8,e.validate=n,e.readHeader=function(e){return n(e)?{length:e.readUint32(),type:e.readUint32()}:null}}(WireMessage||(WireMessage={}));var WireMessage$1=WireMessage,ComponentOperation,EntityUtils;function crdtSceneSystem({engine:e,transports:t}){const n=distExports.crdtProtocol(),r=[],i=[];function o(e){const t=Array.from(e);return e.length=0,t}return t.forEach((e=>{return e.onmessage=(t=e.type,function(e){const n=createByteBuffer({reading:{buffer:e,currentOffset:0}});for(;WireMessage$1.validate(n);){const e=n.currentReadOffset(),i=ComponentOperation.read(n),{type:o,entity:a,componentId:s,data:u,timestamp:c}=i;r.push({type:o,entity:a,componentId:s,data:u,timestamp:c,transportType:t,messageBuffer:n.buffer().subarray(e,n.currentReadOffset())})}});var t})),{createMessages:function(r){const a=o(i),s=createByteBuffer();for(const[i,o]of r)for(const r of o){const o=e.getComponent(r),u=o.has(i)?o.toBinary(i).toBinary():null,c=n.createEvent(i,r,u),l=s.currentWriteOffset(),d=o.has(i)?WireMessage$1.Enum.PUT_COMPONENT:WireMessage$1.Enum.DELETE_COMPONENT,f={type:d,componentId:r,entity:i,timestamp:c.timestamp};t.some((e=>e.filter(f)))&&(ComponentOperation.write(d,i,c.timestamp,o,s),a.push({...f,messageBuffer:s.buffer().subarray(l,s.currentWriteOffset())}))}const u=createByteBuffer();for(const e of t){u.resetBuffer();for(const t of a)e.filter(t)&&u.writeBuffer(t.messageBuffer,!1);u.size()&&e.send(u.toBinary())}},receiveMessages:function(){const a=o(r);for(const r of t){const t=createByteBuffer();for(const r of a){const{data:o,timestamp:a,componentId:s,entity:u,type:c}=r,l={key1:u,key2:s,data:o||null,timestamp:a},d=e.getComponent(s),f=n.processMessage(l);if(l!==f){const e=d.has(u)?WireMessage$1.Enum.PUT_COMPONENT:WireMessage$1.Enum.DELETE_COMPONENT;ComponentOperation.write(e,u,f.timestamp,d,t)}else{if(c===WireMessage$1.Enum.DELETE_COMPONENT)d.deleteFrom(u);else{const e=createByteBuffer({reading:{buffer:r.data,currentOffset:0}});d.upsertFromBinary(r.entity,e),d.clearDirty()}i.push(r)}}t.size()&&r.send(t.toBinary())}}}}function deepReadonly(e){return Object.freeze({...e})}function defineComponent(e,t,n){const r=new Map,i=new Set,o=createByteBuffer();function a(){return n?t.deserialize(createByteBuffer({writing:{buffer:o.buffer(),currentOffset:o.currentWriteOffset()}})):t.create()}function s(e){return{...a(),...e}}return n&&t.serialize(n,o),{_id:e,default:function(){return a()},isDirty:function(e){return i.has(e)},has:function(e){return r.has(e)},deleteFrom:function(e){const t=r.get(e);return r.delete(e),i.add(e),t||null},getOrNull:function(e){const t=r.get(e);return t?deepReadonly(t):null},get:function(t){const n=r.get(t);if(!n)throw new Error(`[getFrom] Component ${e} for ${t} not found`);return deepReadonly(n)},create:function(t,n){if(r.get(t))throw new Error(`[create] Component ${e} for ${t} already exists`);const o=void 0===n?a():s(n);return r.set(t,o),i.add(t),o},createOrReplace:function(e,t){const n=void 0===t?a():s(t);return r.set(e,n),i.add(e),n},getMutableOrNull:function(e){const t=r.get(e);return t?(i.add(e),t):null},getMutable:function(t){const n=this.getMutableOrNull(t);if(null===n)throw new Error(`[mutable] Component ${e} for ${t} not found`);return n},iterator:function*(){for(const[e,t]of r)yield[e,t]},dirtyIterator:function*(){for(const e of i)yield e},toBinary(n){const i=r.get(n);if(!i)throw new Error(`[toBinary] Component ${e} for ${n} not found`);const o=createByteBuffer();return t.serialize(i,o),o},writeToByteBuffer(n,i){const o=r.get(n);if(!o)throw new Error(`[writeToByteBuffer] Component ${e} for ${n} not found`);t.serialize(o,i)},updateFromBinary(t,n){if(!r.get(t))throw new Error(`[updateFromBinary] Component ${e} for ${t} not found`);return this.upsertFromBinary(t,n)},upsertFromBinary(e,n){const o=t.deserialize(n);return r.set(e,o),i.add(e),o},clearDirty:function(){i.clear()}}}function EntityContainer(){const e=Entity(EntityUtils.STATIC_ENTITIES_RANGE),t=Entity(EntityUtils.DYNAMIC_ENTITIES_RANGE);return{generateEntity:(n=!1)=>n?t.generateEntity():e.generateEntity(),removeEntity:n=>e.removeEntity(n)||t.removeEntity(n),isEntityExists:n=>EntityUtils.isReservedEntity(n)||e.getExistingEntities().has(n)||t.getExistingEntities().has(n),getExistingEntities:()=>new Set([...e.getExistingEntities(),...t.getExistingEntities()])}}function Entity(e){let t=e[0];const n=new Set;return{getExistingEntities:()=>new Set(n),generateEntity:function(){if(t>=e[1])throw new Error(`It fails trying to generate an entity out of range [${e[0]}, ${e[1]}].`);const r=t;return t++,n.add(r),r},removeEntity:function(e){return n.delete(e)}}}!function(e){e.MESSAGE_HEADER_LENGTH=20,e.write=function(t,n,r,i,o){const a=o.incrementWriteOffset(WireMessage$1.HEADER_LENGTH+e.MESSAGE_HEADER_LENGTH);t===WireMessage$1.Enum.PUT_COMPONENT&&i.writeToByteBuffer(n,o);const s=o.size()-a;o.setUint32(a,s),o.setUint32(a+4,t),o.setUint32(a+8,n),o.setUint32(a+12,i._id),o.setUint64(a+16,BigInt(r)),o.setUint32(a+24,s-e.MESSAGE_HEADER_LENGTH-WireMessage$1.HEADER_LENGTH)},e.read=function(e){const t=WireMessage$1.readHeader(e);if(!t)return null;const n={...t,entity:e.readUint32(),componentId:e.readInt32(),timestamp:Number(e.readUint64())};return t.type===WireMessage$1.Enum.DELETE_COMPONENT?n:{...n,data:e.readBuffer()}}}(ComponentOperation||(ComponentOperation={})),function(e){function t(e,t){return e>=t[0]&&e<=t[1]}e.MAX_ENTITIES=4294967295,e.DYNAMIC_ENTITIES_START_AT=1e5,e.RESERVED_STATIC_ENTITIES=512,e.RESERVED_ENTITIES_RANGE=[0,e.RESERVED_STATIC_ENTITIES-1],e.STATIC_ENTITIES_RANGE=[e.RESERVED_STATIC_ENTITIES,e.DYNAMIC_ENTITIES_START_AT-1],e.DYNAMIC_ENTITIES_RANGE=[e.DYNAMIC_ENTITIES_START_AT,e.MAX_ENTITIES],e.isDynamicEntity=function(n){return t(n,e.DYNAMIC_ENTITIES_RANGE)},e.isStaticEntity=function(n){return t(n,e.STATIC_ENTITIES_RANGE)},e.isReservedEntity=function(n){return t(n,e.RESERVED_ENTITIES_RANGE)}}(EntityUtils||(EntityUtils={}));const SYSTEMS_REGULAR_PRIORITY=1e5;function SystemContainer(){const e=[];function t(){e.sort(((e,t)=>t.priority-e.priority))}return{add:function(n,r,i){if(e.find((e=>e.fn===n)))throw new Error("System already added");if(i&&e.find((e=>e.name===i)))throw new Error("System name already used");e.push({fn:n,priority:r,name:i}),t()},remove:function(n){let r=-1;return r="string"==typeof n?e.findIndex((e=>e.name===n)):e.findIndex((e=>e.fn===n)),-1!==r&&(e.splice(r,1),t(),!0)},getSystems:()=>e}}function preEngine(){const e=EntityContainer(),t=new Map,n=new Map,r=SystemContainer();function i(t=!1){return e.generateEntity(t)}function o(e,n,r){if(t.get(n))throw new Error(`Component ${n} already declared`);const i=defineComponent(n,e,r);return t.set(n,i),i}return{entitiesComponent:n,componentsDefinition:t,addEntity:i,addDynamicEntity:function(){return i(!0)},removeEntity:function(n){for(const[,e]of t)e.has(n)&&e.deleteFrom(n);return e.removeEntity(n)},addSystem:function(e,t=SYSTEMS_REGULAR_PRIORITY,n){r.add(e,t,n)},getSystems:function(){return r.getSystems()},removeSystem:function(e){return r.remove(e)},defineComponent:function(e,t,n){return o(exports.Schemas.Map(e),t,n)},defineComponentFromSchema:o,getEntitiesWith:function*(...e){for(const[t,...n]of function*(...e){const[t,...n]=e;for(const[r]of t.iterator()){let t=!0;for(const e of n)if(!e.has(r)){t=!1;break}t&&(yield[r,...e])}}(...e))yield[t,...n.map((e=>e.get(t)))]},getComponent:function(e){const n=t.get(e);if(!n)throw new Error("Component not found. You need to declare the components at the beginnig of the engine declaration");return n},removeComponentDefinition:function(e){t.delete(e)}}}function Engine({transports:e}={}){const t=preEngine(),n=crdtSceneSystem({engine:t,transports:e||[]}),r=defineSdkComponents(t);return{addEntity:t.addEntity,addDynamicEntity:t.addDynamicEntity,removeEntity:t.removeEntity,addSystem:t.addSystem,removeSystem:t.removeSystem,defineComponent:t.defineComponent,defineComponentFromSchema:t.defineComponentFromSchema,getEntitiesWith:t.getEntitiesWith,getComponent:t.getComponent,removeComponentDefinition:t.removeComponentDefinition,update:function(e){n.receiveMessages();for(const n of t.getSystems())n.fn(e);const i=[r.OnPointerDownResult,r.OnPointerUpResult],o=i.map((e=>e._id));for(const e of i)for(const[n]of t.getEntitiesWith(e))e.deleteFrom(n);const a=new Map;for(const[e,n]of t.componentsDefinition)if(!o.includes(e))for(const t of n.dirtyIterator())a.has(t)||a.set(t,new Set),a.get(t).add(e);n.createMessages(a);for(const[e,n]of t.componentsDefinition)n.clearDirty()},baseComponents:r}}var ECSComponentIDs;!function(e){e[e.Transform=1]="Transform",e[e.Animator=1042]="Animator",e[e.AudioSource=1020]="AudioSource",e[e.AvatarAttach=1073]="AvatarAttach",e[e.AvatarModifierArea=1070]="AvatarModifierArea",e[e.AvatarShape=1080]="AvatarShape",e[e.Billboard=1090]="Billboard",e[e.BoxShape=1013]="BoxShape",e[e.CameraMode=1072]="CameraMode",e[e.CameraModeArea=1071]="CameraModeArea",e[e.CylinderShape=1016]="CylinderShape",e[e.GLTFShape=1041]="GLTFShape",e[e.Material=1017]="Material",e[e.MeshRenderer=1018]="MeshRenderer",e[e.NFTShape=1040]="NFTShape",e[e.OnPointerDown=1060]="OnPointerDown",e[e.OnPointerDownResult=1066]="OnPointerDownResult",e[e.OnPointerUp=1061]="OnPointerUp",e[e.OnPointerUpResult=1065]="OnPointerUpResult",e[e.PlaneShape=1014]="PlaneShape",e[e.PointerLock=1074]="PointerLock",e[e.SphereShape=1015]="SphereShape",e[e.TextShape=1030]="TextShape",e[e.UiText=1052]="UiText",e[e.VisibilityComponent=1081]="VisibilityComponent"}(ECSComponentIDs||(ECSComponentIDs={}));const componentIds=Object.values(ECSComponentIDs).filter((e=>"number"==typeof e)).map(Number);function createRendererTransport(){if("undefined"==typeof dcl)throw new Error("Cannot create createRendererTransport without global dcl object");const e="renderer";return{type:e,send(e){dcl.callRpc("@decentraland/ExperimentalAPI","sendToRenderer",[{data:new Uint8Array(e)}]).catch(dcl.error)},filter:t=>t.transportType!==e&&(!!componentIds.includes(t.componentId)&&!!t)}}function createNetworkTransport(){const e="network-transport";return{send:function(...e){},type:e,filter:t=>t.transportType!==e&&!!t}}const rendererTransport=createRendererTransport(),engine=Engine({transports:[rendererTransport,createNetworkTransport()]});if("undefined"!=typeof dcl){async function e(){const e=await dcl.callRpc("@decentraland/ExperimentalAPI","messageFromRenderer",[]);if(e.data?.length&&rendererTransport.onmessage)for(const t of e.data)rendererTransport.onmessage(t)}dcl.loadModule("@decentraland/ExperimentalAPI",{}).catch(dcl.error),dcl.onUpdate((t=>{e().catch(dcl.error).finally((()=>engine.update(t)))}))}const log=dcl.log,error=dcl.error,Transform=engine.baseComponents.Transform,Animator=engine.baseComponents.Animator,AudioSource=engine.baseComponents.AudioSource,AvatarAttach=engine.baseComponents.AvatarAttach,AvatarModifierArea=engine.baseComponents.AvatarModifierArea,AvatarShape=engine.baseComponents.AvatarShape,Billboard=engine.baseComponents.Billboard,BoxShape=engine.baseComponents.BoxShape,CameraMode=engine.baseComponents.CameraMode,CameraModeArea=engine.baseComponents.CameraModeArea,CylinderShape=engine.baseComponents.CylinderShape,GLTFShape=engine.baseComponents.GLTFShape,Material=engine.baseComponents.Material,MeshRenderer=engine.baseComponents.MeshRenderer,NFTShape=engine.baseComponents.NFTShape,OnPointerDown=engine.baseComponents.OnPointerDown,OnPointerDownResult=engine.baseComponents.OnPointerDownResult,OnPointerUp=engine.baseComponents.OnPointerUp,OnPointerUpResult=engine.baseComponents.OnPointerUpResult,PlaneShape=engine.baseComponents.PlaneShape,PointerLock=engine.baseComponents.PointerLock,SphereShape=engine.baseComponents.SphereShape,TextShape=engine.baseComponents.TextShape,UiText=engine.baseComponents.UiText,VisibilityComponent=engine.baseComponents.VisibilityComponent;var Components;exports.Components=void 0,Components=exports.Components||(exports.Components={}),Components.Transform=engine.baseComponents.Transform,Components.Animator=engine.baseComponents.Animator,Components.AudioSource=engine.baseComponents.AudioSource,Components.AvatarAttach=engine.baseComponents.AvatarAttach,Components.AvatarModifierArea=engine.baseComponents.AvatarModifierArea,Components.AvatarShape=engine.baseComponents.AvatarShape,Components.Billboard=engine.baseComponents.Billboard,Components.BoxShape=engine.baseComponents.BoxShape,Components.CameraMode=engine.baseComponents.CameraMode,Components.CameraModeArea=engine.baseComponents.CameraModeArea,Components.CylinderShape=engine.baseComponents.CylinderShape,Components.GLTFShape=engine.baseComponents.GLTFShape,Components.Material=engine.baseComponents.Material,Components.MeshRenderer=engine.baseComponents.MeshRenderer,Components.NFTShape=engine.baseComponents.NFTShape,Components.OnPointerDown=engine.baseComponents.OnPointerDown,Components.OnPointerDownResult=engine.baseComponents.OnPointerDownResult,Components.OnPointerUp=engine.baseComponents.OnPointerUp,Components.OnPointerUpResult=engine.baseComponents.OnPointerUpResult,Components.PlaneShape=engine.baseComponents.PlaneShape,Components.PointerLock=engine.baseComponents.PointerLock,Components.SphereShape=engine.baseComponents.SphereShape,Components.TextShape=engine.baseComponents.TextShape,Components.UiText=engine.baseComponents.UiText,Components.VisibilityComponent=engine.baseComponents.VisibilityComponent,exports.Animator=Animator,exports.AudioSource=AudioSource,exports.AvatarAttach=AvatarAttach,exports.AvatarModifierArea=AvatarModifierArea,exports.AvatarShape=AvatarShape,exports.Billboard=Billboard,exports.BoxShape=BoxShape,exports.CameraMode=CameraMode,exports.CameraModeArea=CameraModeArea,exports.CylinderShape=CylinderShape,exports.DEG2RAD=distExports$1.DEG2RAD,exports.Engine=Engine,exports.Epsilon=distExports$1.Epsilon,exports.GLTFShape=GLTFShape,exports.Material=Material,exports.MeshRenderer=MeshRenderer,exports.NFTShape=NFTShape,exports.OnPointerDown=OnPointerDown,exports.OnPointerDownResult=OnPointerDownResult,exports.OnPointerUp=OnPointerUp,exports.OnPointerUpResult=OnPointerUpResult,exports.Orientation=distExports$1.Orientation,exports.PlaneShape=PlaneShape,exports.PointerLock=PointerLock,exports.Quaternion=distExports$1.Quaternion,exports.RAD2DEG=distExports$1.RAD2DEG,exports.Space=distExports$1.Space,exports.SphereShape=SphereShape,exports.TextShape=TextShape,exports.ToGammaSpace=distExports$1.ToGammaSpace,exports.ToLinearSpace=distExports$1.ToLinearSpace,exports.Transform=Transform,exports.UiText=UiText,exports.Vector3=distExports$1.Vector3,exports.VisibilityComponent=VisibilityComponent,exports.deepReadonly=deepReadonly,exports.engine=engine,exports.error=error,exports.log=log,Object.defineProperty(exports,"__esModule",{value:!0})})(this.self=this.self||{});